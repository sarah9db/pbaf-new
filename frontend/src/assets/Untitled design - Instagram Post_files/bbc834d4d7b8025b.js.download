(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[1389],{

/***/ 813110:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;self._45f7853dc7660378a038952b53c0953e = self._45f7853dc7660378a038952b53c0953e || {};(function(__c) {/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var Rj;var U;var t;var y;var S;var E;var pi;var m;
var aa,ea,k,fa,ha,ia,ma,ka,ra,qa,oa,wa,ya,za,Da,Ea,Fa,Ha,r,u,C,Ia,G,H,Ja,Pa,Na,Ka,La,Ma,D,Oa,Qa,p,Sa,Ra,Ua,Ta,Va,Wa,Za,ab,cb,eb,fb,hb,gb,jb,kb,mb,nb,rb,sb,zb,Bb,Cb,Eb,Fb,Hb,Kb,Mb,Pb,Sb,Wb,Zb,bc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,pc,tc,vc,Ac,Gc,Hc,Ic,Jc,Kc,Lc,Mc,Nc,Pc,Qc,Vc,Yc,dd,fd,kd,md,ed,Zc,$c,M,bd,jd,od,pd,ld,qd,Uc,Sc,Rc,Tc,L,vd,wd,xd,yd,zd,Bd,Cd,Dd,Ed,Fd,Gd,Ad,Id,Jd,Ld,Md,Kd,Nd,Od,O,Rd,Td,Ud,Wd,Yd,$d,ae,be,ce,de,ee,fe,he,je,ge,ke,le,P,ne,oe,qe,re,te,xe,ze,Be,Ce,De,Ee,Ie,Ge,Oe,Te,Ve,We,Xe,Ze,af,
cf,ef,ff,hf,kf,mf,of,qf,sf,xf,yf,Af,zf,Bf,Ef,Gf,Jf,Lf,Mf,Nf,Of,Pf,Uf,Xf,Yf,cg,ag,eg,ig,kg,lg,ng,og,sg,tg,ug,vg,wg,zg,Ag,yg,xg,Cg,Dg,Ig,Jg,Kg,Lg,Mg,Ng,Pg,Rg,Vg,Wg,Xg,Yg,Zg,$g,ah,ch,bh,eh,hh,gh,jh,ih,lh,nh,oh,rh,th,vh,Gh,uh,Hh,ph,qh,Jh,Ih,Lh,Zh,$h,ai,ei,gi,hi,ii,ji,ki,li,ni,mi,oi,qi,ui,si,ri,wi,xi,Ai,Ci,Fi,Gi,yi,Hi,Ei,Ii,ti,Bi,Qi,Mi,Ri,bj,Zi,cj,lj,jj,kj,da,ca;
aa=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};ea=function(a,b){if(b)a:{var c=ca;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&da(c,a,{configurable:!0,writable:!0,value:b})}};
k=function(a,b,...c){if(!a)throw Error(null==b?"invalid argument":fa(b,...c));};fa=function(a,...b){let c=0;return a.replace(/\{}/g,()=>c<b.length?b[c++]:"{}")};ha=function(a,b){var c=[];if(!a)throw Error(null==b?"invalid state":fa(b,...c));};ia=function(a,b,...c){if(null==a)throw Error(null==b?"argument is null":fa(b,...c));return a};
ma=function(a,b,c){const d=c&&c.Je;c=c&&c.Jh;if(!(a in ja)){const e=self.bootstrap;if(!e)throw Error("Could not find bootstrap");ja[a]=Object.assign({},e[a]);c||delete e[a]}return ka(a,b,d&&a in la?la[a]:void 0)};
ka=function(a,b,c){if(a in na&&null==c&&null!=na[a])return na[a];null!=c&&0<c.size&&c.forEach((d,e)=>{e=e.split(".");let f=ja[a],g=e.shift();for(;e.length;)g in f||(f[g]=String(Number(e[0]))===e[0]?[]:{}),f=f[g],g=e.shift();f[g]=oa(d,f[g])});b=b(pa.required(a,ja));na[a]=null==c?b:void 0;return b};ra=function(){var a=window.location.search;const b={};["base","page","ui"].forEach(c=>{const d=qa(a,`bootstrap.${c}.`);0<d.size&&(b[c]=d)});return b};
qa=function(a,b){const c=new Map;(new URLSearchParams(a)).forEach((d,e)=>{e.startsWith(b)&&c.set(decodeURIComponent(e.replace(b,"").replace(/\+/g," ")),decodeURIComponent(d.replace(/\+/g," ")))});return c};
oa=function(a,b){b=typeof b;switch(b){case "undefined":if(""===a)return!0;b=sa.exec(a);return null!=b?b[1]:ta.has(a)?ta.get(a):""!==a.trim()&&Number.isFinite(Number(a))?Number(a):ua.has(a)?ua.get(a):a;case "boolean":return k(ta.has(a),"boolean value expected: {}",a),ta.get(a);case "number":return k(""!==a.trim()&&Number.isFinite(Number(a)),"finite numeral expected: {}",a),Number(a);case "object":return k(ua.has(a),"object value expected: {}",a),ua.get(a);case "string":return b=sa.exec(a),null!=b?
b[1]:a;case "function":case "bigint":case "symbol":throw Error(`unexpected hint type: ${b}`);default:throw new m(b);}};wa=function(a){return new va(a)};ya=function(a){return new xa(a)};za=function(a){return null!=a&&null!=a.then};Da=function(a){let b;return(...c)=>{k(0===c.length);if(null==b)try{b=Ba(a()),za(b.value)&&b.value.then(null,()=>!0)}catch(d){b=Ca(d)}if(b.ok)return b.value;throw b.error;}};
Ea=function(a,b,c,d){return{tag:c,U:2,H:b,default:null!=d?d:a.defaultValue,defaultValue:a.defaultValue,G:a.G}};Fa=function(a,b,c){return{tag:c,U:3,H:b,defaultValue:a.defaultValue,G:a.G}};Ha=function(a){return(b,c,d)=>{const {tag:e,H:f,ba:g}=p(b,c,d);return{U:5,tag:e,H:f,N:g,Be:Ga.G,G:"object"===a?"object":"enum"===a?"string":a.G}}};r=function(a,b){const {tag:c,H:d,ba:e}=p(a,b);return{tag:c,U:1,H:void 0,gf:d,value:e,Ag:!1,G:"string"}};
t=__c.t=function(a,b){const {tag:c,H:d,ba:e}=p(a,b);return{tag:c,U:2,H:d,N:e,G:"object"}};u=function(a,b){const {tag:c,H:d,ba:e}=p(a,b);return{tag:c,U:3,H:d,N:e,G:"object"}};y=__c.y=function(a,b){const {tag:c,H:d,ba:e}=p(a,b);return{tag:c,U:4,H:d,N:e,G:"object"}};C=function(a,b){const {tag:c,H:d,ba:e,rf:f}=p(a,b);return{tag:c,U:2,H:d,N:e,default:f,G:"string"}};Ia=function(a,b){const {tag:c,H:d,ba:e}=p(a,b);return{tag:c,U:3,H:d,N:e,G:"string"}};
E=__c.E=function(a){var b={};const c=Da(()=>{const e=a();var f=Object.keys(e);const g={},h={};for(const l of f)switch(f=e[l],f.U){case 1:h[f.tag]=Object.assign({},f,{name:l});break;case 2:case 3:case 4:case 5:g[f.tag]=Object.assign({},f,{name:l});break;default:throw new m(f);}return{type:1,fields:e,Ic:Ja(e,b.Hc),Tg:g,tg:h}});class d{static wg(e={}){return new d(e)}static C(e){return d.Wa(e,[])}static D(e){return d.La(e,[])}static La(e,f){var {Ic:g}=c(),h=Object.create(d.prototype);for(const A of g){const w=
A.config,F=A.name;var l=A.P,n=A.na,q=l;g=e[q];null==g&&null!=n&&null!=e[n]&&(q=n,g=e[q]);switch(w.U){case 3:if(null==g){h[F]=void 0;break}else if(typeof g!==w.G)throw Ka({P:l,na:n},g,w.G,f);f.push(q);h[F]=w.N?w.N.La(g,f):g;f.pop();break;case 2:if(null==g&&null!=w.defaultValue){h[F]=w.defaultValue;break}else if(null==g||typeof g!==w.G)throw La({P:l,na:n},g,w.G,f);f.push(q);h[F]=w.N?w.N.La(g,f):g;f.pop();break;case 1:var v=A.Tc;q=A.qe;if(null==g&&w.Ag){h[F]=w.value;break}if(g===v){h[F]=w.value;break}if(null!=
q&&g===q){h[F]=w.value;break}e=v;h=q;throw new TypeError(`Expected value ${h?`either "${e}" OR "${h}"`:`"${e}"`} for key ${Ma({P:l,na:n})} found: ${JSON.stringify(g)} ${D(f)}`);case 4:var z;if(null==g){h[F]=[];break}else if(!Array.isArray(g))throw Na({P:l,na:n},g,w.G,f);if(v=null===(z=w.N)||void 0===z?void 0:z.La){var B=Array(g.length);for(var x=0;x<g.length;++x){if(typeof g[x]!==w.G)throw La({P:l,na:n},g[x],w.G,[...f,q],x);f.push(`${q}[${x}]`);B[x]=v(g[x],f);f.pop()}h[F]=B}else{for(v=0;v<g.length;++v)if(typeof g[v]!==
w.G)throw La({P:l,na:n},g[v],w.G,[...f,q],v);h[F]=g}break;case 5:if(null==g){h[F]=new Map;break}else if("object"!==typeof g)throw new TypeError(`Expected Map for key ${Ma({P:l,na:n})}, found: ${Oa(g)} ${D(f)}`);l="number"===w.Be;n=Object.entries(g);v=Array(n.length);for(B=0;B<n.length;++B){const [ba,T]=n[B];if(l){if(x=Number(ba),isNaN(x))throw new TypeError(`Expected number map key, found: NaN ${D([...f,q])}`);}else x=ba;if(typeof T!==w.G)throw new TypeError(`Expected ${w.G} map value for map key "${x}", found: ${Oa(T)} ${D([...f,
q])}`);f.push(`${q}["${x}"]`);const Aa=w.N?w.N.La(T,f):g[ba];f.pop();v[B]=[x,Aa]}h[F]=new Map(v);break;default:throw new m(w);}}return h}constructor(e={}){var {Ic:f}=c();for(const g of f){f=g.config;const h=g.name,l=e[h];switch(f.U){case 1:this[h]=f.value;break;case 2:this[h]=null==l?f.default:l;break;case 3:this[h]=l;break;case 4:this[h]=null==l?[]:l;break;case 5:this[h]=null==l?new Map:l;break;default:throw new m(f);}}}}d.init=c;d.Wa=b.cd?(e,f)=>{throw new TypeError(`Unproducible oneof case ${D(f)}`);
}:(e,f)=>{if(null==e||"object"!==typeof e)throw new TypeError(`Expected type object, found: ${Oa(e)} ${D(f)}`);var {Ic:g}=c();const h={};for(const B of g){g=B.config;var l=B.P,n=e[B.name];const x=l;switch(g.U){case 1:if(n!==g.value)throw new TypeError(`Expected value ${JSON.stringify(g.value)} for key "${l}", found: ${JSON.stringify(n)} ${D(f)}`);h[x]=B.Tc;break;case 2:if(null!=g.defaultValue&&n===g.defaultValue)break;f.push(x);var q=g.N?g.N.Wa(n,f):n;f.pop();if(typeof q!==g.G)throw La({P:l},n,g.G,
f);h[x]=q;break;case 3:if(null==n)break;f.push(x);q=g.N?g.N.Wa(n,f):n;f.pop();if(typeof q!==g.G)throw Ka({P:l},n,g.G,f);h[x]=q;break;case 4:var v;if(null==n)break;else{if(!Array.isArray(n))throw Na({P:l},n,g.G,f);if(0===n.length)break}if(q=null===(v=g.N)||void 0===v?void 0:v.Wa){const A=Array(n.length);for(let w=0;w<n.length;++w){f.push(`${x}[${w}]`);const F=q(n[w],f);f.pop();if(typeof F!==g.G)throw La({P:l},F,g.G,[...f,x],w);A[w]=F}h[x]=A}else{for(q=0;q<n.length;++q)if(typeof n[q]!==g.G)throw La({P:l},
n[q],g.G,[...f,x],q);h[x]=n}break;case 5:var z;if(!(n instanceof Map))throw new TypeError(`Expected Map for key "${l}", found: ${Oa(n)} ${D(f)}`);if(0===n.size)break;l={};q=null===(z=g.N)||void 0===z?void 0:z.Wa;for(const [A,w]of n){if(typeof A!==g.Be)throw new TypeError(`Expected ${g.Be} map key, found: ${Oa(A)} ${D([...f,x])}`);f.push(`${x}["${A}"]`);n=q?q(w,f):w;f.pop();if(typeof n!==g.G)throw new TypeError(`Expected ${g.G} map value for map key "${A}", found: ${Oa(n)} ${D([...f,x])}`);l[A]=n}h[x]=
l;break;default:throw new m(g);}}return h};return d};
G=function(a,b){var c={};const d=Da(()=>{var g=a();const h=Object.keys(g)[0];let l;const n=new Map,q=new Map,v=new Map;for(var z=0;z<g[h].length;z+=2){var B=g[h][z];const w=g[h][z+1],F=w.init().fields[h];if(!F)throw new TypeError("Missing discriminator.");if(1!==F.U)throw new TypeError(`Discriminator must be FieldType.CONSTANT, was ${F.U}.}`);var x=Pa("A?",F.H,c.Hc);const {Fa:ba,Va:T}=Pa(Qa(B-1),F.gf,c.Hc);v.set(B,{ji:w,value:F.value});n.set(F.value,w);q.set(ba,w);T&&q.set(T,w);if(l&&l.P!==x.Fa)throw new TypeError(`oneOf JSON keys are not consistent. ${l.P} ${x.Fa}`);
if(l&&l.na!==x.Va)throw new TypeError(`oneOf secondary JSON keys are not consistent. ${l.na} ${x.Va}`);B=F.tag;l={P:x.Fa,na:x.Va}}if(null==l||null==B)throw new TypeError("OneOf has no cases.");g=b();x=Object.keys(g);z={};for(var A of x)z[g[A].tag]=Object.assign({},g[A],{name:A});A=null!=c.yg?c.yg():void 0;return{type:2,Ic:Ja(g,c.Hc),Cg:h,kh:n,Ji:B,Bg:l,Th:q,zg:A,fields:g,Tg:z,tg:{},Yj:v}}),e=(g,h)=>{const {Cg:l,kh:n}=d(),q=g[l],v=n.get(q);if(!v)throw new TypeError(`Unknown oneof deserialized case: ${JSON.stringify(q)} ${D(h)}`);
return v.Wa(g,h)},f=(g,h)=>{const {Th:l,Bg:n,zg:q}=d();var v=n.na;let z=g[n.P];null==z&&v&&(z=g[v]);if(null==z&&q)return q.La(g,h);v=l.get(z);if(!v)throw new TypeError(`Unknown oneof serialized case: ${JSON.stringify(z)} ${D(h)}`);return v.La(g,h)};return{init:d,C:g=>e(g,[]),Wa:e,D:g=>f(g,[]),La:f}};
H=function(a,b=0){var c={};const d=Da(()=>{const g=a(),h=[],l=new Map,n=new Map,q=new Map,v=new Map,z=new Set;let B=0,x=1;for(;B<g.length;){const w=x++,F=g[B];var A=Qa(F-b);B+=1;let ba;const T=g[B];"string"===typeof T&&(ba=T,B+=1);const {Fa:Aa,Va:pb}=Pa(A,ba,c.Hc);A=g[B];"object"===typeof A&&A.cd&&(z.add(w),B+=1);h.push(w);l.set(Aa,w);pb&&l.set(pb,w);n.set(w,Aa);q.set(w,F);v.set(F,w)}return{values:h,Uf:n,gk:q,Jj:v,Uh:l,cd:z.size?z:void 0}}),e=(g,h,l)=>{const {cd:n}=d();if(n&&n.has(g))throw new TypeError(`Unproducible enum value: ${JSON.stringify(g)} ${l?
D(l):""}`);h=h.get(g);if(null==h)throw new TypeError(`The proto enum serializer failed to serialize value ${JSON.stringify(g)} into JSON.
It does not recognize value ${JSON.stringify(g)} as a valid member of the TypeScript enum.
${l?D(l):""}`);return h},f=(g,h)=>{const l=d().Uh.get(g);if(null==l)throw new TypeError(`The proto enum deserializer failed to deserialize JSON ${JSON.stringify(g)} into an enum value.
It does not recognize JSON ${JSON.stringify(g)} as a valid JSON value encoding of the enum.
${D(h)}`);return l};return{values:()=>d().values,Ij:()=>{const {values:g,cd:h}=d();return null==h?g:g.filter(l=>!h.has(l))},C:g=>e(g,d().Uf,[]),Wa:(g,h)=>e(g,d().Uf,h),D:g=>f(g,[]),La:f}};Ja=function(a,b){return Object.entries(a).map(([c,d])=>{let e=Qa(d.tag-1);if(1===d.U){const {Fa:l,Va:n}=Pa(e,d.gf,b);e="A?";var f={Tc:l,qe:n}}const {Fa:g,Va:h}=Pa(e,d.H,b);return{config:d,name:c,P:g,na:h,Tc:null===f||void 0===f?void 0:f.Tc,qe:null===f||void 0===f?void 0:f.qe}})};
Pa=function(a,b,c){if(!b){if(void 0!==c)throw Error("Dual Deserialization config templated but JSON full key/value wasn't");return{Fa:a}}if(void 0===c)return{Fa:b};if(0===c)return{Fa:a,Va:b};if(1===c)return{Fa:b,Va:a};throw Error("function should have been exhaustive, but wasn't");};Na=function(a,b,c,d){return new TypeError(`Expected repeated ${c} value for key ${Ma(a)}, found: ${Oa(b)} ${D(d)}`)};Ka=function(a,b,c,d){return new TypeError(`Expected optional ${c} value for key ${Ma(a)}, found: ${Oa(b)} ${D(d)}`)};
La=function(a,b,c,d,e){return new TypeError(`Expected ${c} value${void 0!==e?` at index ${e}`:""} for key ${Ma(a)}, found: ${Oa(b)} ${D(d)}`)};Ma=function(a){const b=a.P;return(a=a.na)?`either "${b}" OR "${a}"`:`"${b}"`};D=function(a){return`(path: .${a.join(".")})`};Oa=function(a){return null===a?"null":Array.isArray(a)?"array":typeof a};
Qa=function(a){if(64>a)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a);const b=[];for(;0<a;)b.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a%64)),a=Math.floor(a/64);return b.reverse().join("")};p=function(a,b,c){return"string"===typeof a?{H:a,tag:b,ba:c,rf:void 0}:{tag:a,ba:b,rf:c}};Sa=function(a){const b=Ra(a);let c=0;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(d){d=Number(d);return(d^b[c++]&15>>d/4).toString(16)})};
Ra=function(a){if(!a&&"undefined"!==typeof window&&"undefined"!==typeof window.crypto&&"function"===typeof window.crypto.getRandomValues)return window.crypto.getRandomValues(new Uint8Array(31));const b=null!==a&&void 0!==a?a:Math.random;return Array.from({length:31},()=>Math.floor(255*b()))};Ua=function(a,b){var c=[];if(!a)throw new I({code:"BAD_REQUEST",message:Ta(b,...c)});};Ta=function(a,...b){let c=0;return a.replace(/\{}/g,()=>c<b.length?b[c++]:"{}")};
Va=function(a,b){var c=[];if(!a)throw new I({code:"INTERNAL_ERROR",message:Ta(b,...c)});};Wa=function(a,b,c){var d=[];if(null==a)throw new I({code:b,message:Ta(c,...d)});return a};Za=async function(a,b){b=Xa.C(b);a=await a.A.request("CONTENT_V1_WHEN_MEDIA_UPLOADED",b);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"CONTENT_V1_WHEN_MEDIA_UPLOADED: Response cannot be empty"});return Ya.D(a.value)};
ab=async function(a){const b=$a.C({});a=await a.A.request("CONTENT_V1_CLOSE_COLOR_SELECTOR",b);if(!a.ok)throw a.error;};cb=function(a,b){a.handle("CONTENT_V1_COLOR_SELECTION_EVENT",async c=>{if(void 0===c)throw new I({code:"INTERNAL_ERROR",message:"CONTENT_V1_COLOR_SELECTION_EVENT: Request cannot be undefined"});c=bb.D(c);return b.Rd(c)})};
eb=function({type:a,result:b,eb:c}){const d=b.type;switch(d){case "DONE":switch(a){case "IMAGE":return{ref:b.ref,whenUploaded:c({type:a,ref:b.ref,X:b.X})};case "VIDEO":return{ref:b.ref,whenUploaded:c({type:a,ref:b.ref,X:b.X})};case "AUDIO":return{ref:b.ref,whenUploaded:c({type:a,ref:b.ref,X:b.X})};default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected upload type '${a}'.`});}case "FAILED":throw db(b.Ua);default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected result type '${d}'.`});
}};
fb=function({type:a,result:b,eb:c}){const d=b.type;switch(d){case "DONE":switch(a){case "IMAGE":return{type:"done",ref:b.ref,whenUploaded:c({type:a,ref:b.ref,X:b.X})};case "VIDEO":return{type:"done",ref:b.ref,whenUploaded:c({type:a,ref:b.ref,X:b.X})};case "AUDIO":return{type:"done",ref:b.ref,whenUploaded:c({type:a,ref:b.ref,X:b.X})};default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected upload type '${a}'.`});}case "FAILED":return{type:"failed",reason:{type:b.Ua}};default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected result type '${d}'.`});
}};hb=function(a){void 0!==a&&(Array.isArray(a)?a.forEach(b=>{gb(b)}):gb(a))};gb=function(a){if(!K(a)||!ib.test(a))throw new I({code:"BAD_REQUEST",message:`Invalid font reference ${a}`});};
jb=function(a){switch(a.type){case 1:return{name:a.name,type:"string",values:JSON.parse(a.values)};case 2:return{name:a.name,type:"number",values:JSON.parse(a.values)};case 4:return{name:a.name,type:"boolean",values:JSON.parse(a.values)};case 3:return{name:a.name,type:"date",values:JSON.parse(a.values).map(b=>null==b?b:new Date(b))};default:throw new J({code:"BAD_REQUEST",message:`Invalid column type '${a.type}'`});}};
kb=async function(a){a=await a.A.request("DATA_PROVIDER_V1_REGISTER_SELECT_DATA_TABLE_HANDLER");if(!a.ok)throw a.error;};mb=function(a,b){a.handle("DATA_PROVIDER_V1_SELECT_DATA_TABLE",async()=>{const c=await b.selectDataTable();return lb.C(c)})};
nb=function(a){switch(a.type){case "string":return{name:a.name,type:1,values:JSON.stringify(a.values)};case "number":return{name:a.name,type:2,values:JSON.stringify(a.values)};case "boolean":return{name:a.name,type:4,values:JSON.stringify(a.values)};case "date":return{name:a.name,type:3,values:JSON.stringify(a.values)};default:throw new m(a);}};rb=function(a,b,c){return{dataProvider:new ob(a,b,c),dataConsumer:new qb(a,b,c)}};
sb=function(a,b,c,d,e){a.handle(b,async f=>{if(void 0===f)throw new I({code:"INTERNAL_ERROR",message:`${b}: request cannot be undefined.`});f=c.D(f);f=await d(f);if(e)return e.C(f)})};
zb=function(a,b){a.handle("DI_V1_SEND_APP_ELEMENT_CHANGE",async c=>{c=c?tb.D(c):void 0;return b.ue(c)});a.handle("DI_V1_SEND_APP_ELEMENT_CREATE_FROM_PRESET",async c=>{if(void 0===c)throw Error();c=ub.D(c);c=await b.Oh(c);return vb.C(c)});sb(a,"DI_V1_SEND_APP_ELEMENT_DROP",wb,c=>b.Ph(c),vb);sb(a,"DI_V1_SEND_SELECTION_ACTION_CHANGE_EVENT",xb,c=>b.Qh(c));sb(a,"DI_V1_SEND_SELECTION_OVERLAY_CAN_OPEN_CHANGE_EVENT",yb,c=>b.Rh(c))};
Bb=async function(a){a=await a.A.request("DI_V1_GET_APP_ELEMENT_ID");if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while setting app element data"}: ${a.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while setting app element data"}: ${a.error}`});}if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"DI_V1_GET_APP_ELEMENT_ID: Response cannot be empty"});return Ab.D(a.value)};
Cb=async function(a,b){await a.A.request("DI_V1_CLEAR_APP_ELEMENT_ID",b)};Eb=async function(a,b){await a.A.request("DI_V1_SET_APP_ELEMENT_LOADING",Db.C(b))};Fb=function(a){a.A.request("DI_V1_SUBSCRIBE_APP_ELEMENT_DATA_CHANGE").then(b=>{if(!b.ok)throw new I({code:"INTERNAL_ERROR",message:"Unable to subscribe to app element data change."});})};Hb=async function(a,b){a=await a.A.request("DI_V1_TRACK_APP_API_ELEMENT_ADD_OR_UPDATE_FAILED",Gb.C(b));if(!a.ok)throw a.error;};
Kb=async function(a,b){a=await a.A.request("DI_V1_GET_SELECTION_CONTENT",Ib.C(b));if(!a.ok||void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"Could not retrieve selection information."});return Jb.D(a.value)};Mb=async function(a,b){a=await a.A.request("DI_V1_UPDATE_SELECTION_CONTENT",Lb.C(b));if(!a.ok){if(a.error instanceof I)throw a.error;throw new I({code:"INTERNAL_ERROR",message:"Could not save selection content."});}};
Pb=async function(a,b){a=await a.A.request("DI_V1_SUBSCRIBE_SELECTION_ACTION_CHANGE",Nb.C(b));if(!a.ok||void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"Could not create selection listener."});return Ob.D(a.value)};Sb=async function(a,b){if(!(await a.A.request("DI_V1_UNSUBSCRIBE_SELECTION_ACTION_CHANGE",Qb.C(b))).ok)throw new I({code:"INTERNAL_ERROR",message:"Could not unsubscribe from selection listener."});};
Wb=async function(a,b){a=a.A;var c=a.request;b=Tb(Ub.C(b[0]),b[1]);b=await c.call(a,"DI_V1_OPEN_SELECTION_EVENT_OVERLAY",b);if(!b.ok){if(b.error instanceof I)throw new I({code:b.error.code,message:`${"Encountered an error while creating selection event overlay."}: ${b.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while creating selection event overlay."}: ${b.error}`});}if(void 0===b.value)throw new I({code:"INTERNAL_ERROR",message:"DI_V1_OPEN_SELECTION_EVENT_OVERLAY: Response cannot be empty"});
return Vb.D(b.value)};Zb=async function(a,b){a=await a.A.request("DI_V1_READ_TEXT_CHUNKS",Xb.C(b));if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while reading text"}: ${a.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while reading text"}: ${a.error}`});}if(null==a.value)throw new I({code:"INTERNAL_ERROR",message:"DI_V1_READ_TEXT_CHUNKS: Result Cannot be empty"});return Yb.D(a.value)};
bc=async function(a){a=await a.A.request("DI_V1_SUBSCRIBE_SELECTION_OVERLAY_CAN_OPEN_CHANGE",$b.C({target:"image_selection"}));if(!a.ok||void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"Could not create selection overlay can open listener."});return ac.D(a.value)};dc=async function(a,b){if(!(await a.A.request("DI_V1_UNSUBSCRIBE_SELECTION_ACTION_CHANGE",cc.C(b))).ok)throw new I({code:"INTERNAL_ERROR",message:"Could not unsubscribe from selection overlay can open listener."});};
ec=function(a){return Object.entries(a).reduce((b,[c,d])=>{"undefined"!==typeof d&&(b[c]=JSON.stringify(d));return b},{})};fc=function(a){const b={};for(const [c,d]of a)b[c]=JSON.parse(d);return b};gc=function(a){return"TEXT"===a.type?null!=a.top||null!=a.left||null!=a.width:null!=a.top||null!=a.left||null!=a.width||null!=a.height};hc=function(a){return null!=a?a:void 0};
ic=function(a){switch(a){case "normal":case "italic":case void 0:return a;default:throw new I({code:"BAD_REQUEST",message:`Invalid font style: ${a}`});}};jc=function(a){switch(a){case "start":case "center":case "end":case "justify":case void 0:return a;default:throw new I({code:"BAD_REQUEST",message:`Invalid text align: ${a}`});}};kc=function(a){switch(a){case "strikethrough":case "none":case void 0:return a;default:throw new I({code:"BAD_REQUEST",message:`Invalid strikethrough: ${a}`});}};
lc=function(a){switch(a){case "none":case "disc":case "circle":case "square":case "decimal":case "lower-alpha":case "lower-roman":case "checked":case "unchecked":case void 0:return a;default:throw new I({code:"BAD_REQUEST",message:`Invalid list marker: ${a}`});}};
mc=function(a){switch(a){case "normal":case "thin":case "extralight":case "light":case "medium":case "semibold":case "bold":case "ultrabold":case "heavy":case void 0:return a;default:throw new I({code:"BAD_REQUEST",message:`Invalid font weight: ${a}`});}};nc=function(a){switch(a){case "none":case "underline":case void 0:return a;default:throw new I({code:"BAD_REQUEST",message:`Invalid font decoration: ${a}`});}};
pc=function(a){if(gc(a))return"TEXT"===a.type?new oc({top:a.top,left:a.left,width:"undefined"===typeof a.width?void 0:String(a.width),rotation:a.rotation}):new oc({top:a.top,left:a.left,width:String(a.width),height:String(a.height),rotation:a.rotation})};tc=function(a){var b;return new qc({elements:null===(b=a.elements)||void 0===b?void 0:b.map(rc),background:a.background&&sc(a.background),title:a.title})};
vc=function(a){let b,c;Array.isArray(a.Ta)?b=a.Ta.map(rc):"INTERACTIVE_ELEMENT"===a.Ta.type&&(c=new uc(a.Ta));return new vb({Sa:a.kg,$a:new Map(Object.entries(a.$a)),Ta:b,interactiveElement:c,placement:a.placement&&new oc({top:a.placement.top,left:a.placement.left,width:String(a.placement.width),height:String(a.placement.height),rotation:a.placement.rotation})})};
Ac=function(a){switch(a.type){case "append":return new wc({Ka:[{Mb:a.Hb.text,formatting:a.Hb.formatting?new xc(a.Hb.formatting):void 0}]});case "replace":return new yc({bounds:a.bounds,Ka:a.$c.map(b=>({Mb:b.text,formatting:b.formatting?new xc(b.formatting):void 0}))});case "format":return new zc({bounds:a.bounds,formatting:new xc(a.formatting)});default:throw new m(a);}};
Gc=function(a,b){a=a.map(c=>{if(!c)return new Bc;switch(b){case "richtext":return new Cc({xa:c.xa.map(Ac),ma:c.ma});case "image":return new Dc({ref:c.ref});case "plaintext":return new Ec({text:c.text});case "video":return new Fc({ref:c.ref});default:throw new J({code:"INTERNAL_ERROR",message:`Invalid selection scope: '${b}'.`});}});return new Jb({values:a})};
Hc=function(a){const b=Object.assign({},a,{fontRef:hc(a.fontRef),fontWeight:mc(a.fontWeight),fontStyle:ic(a.fontStyle),decoration:nc(a.decoration),textAlign:jc(a.textAlign),strikethrough:kc(a.strikethrough),listMarker:lc(a.listMarker)});Object.keys(b).forEach(c=>{null==b[c]&&delete b[c]});return b};
Ic=function(a){switch(a.type){case "FORMAT":return{type:"format",formatting:Hc(a.formatting),bounds:a.bounds};case "APPEND":return{type:"append",Hb:{text:a.Ka[0].Mb,formatting:a.Ka[0].formatting&&Hc(a.Ka[0].formatting)}};case "REPLACE":return{type:"replace",bounds:a.bounds,$c:a.Ka.map(b=>({text:b.Mb,formatting:b.formatting&&Hc(b.formatting)}))};default:throw new m(a);}};
Jc=function(a){return a.values.map(b=>{switch(b.scope){case "TOMBSTONE":break;case "PLAINTEXT":return{text:b.text};case "RICHTEXT":return{ma:b.ma,xa:b.xa.map(Ic)};case "IMAGE":return{ref:b.ref};case "VIDEO":return{ref:b.ref};default:throw new I({code:"INTERNAL_ERROR",message:`Invalid ProtoSelectionValue: ${JSON.stringify(b)}`});}})};
Kc=function(a){switch(a){case "plaintext":return 1;case "image":return 2;case "video":return 4;case "richtext":return 3;default:throw new I({code:"INTERNAL_ERROR",message:`Invalid scope: ${a}`});}};Lc=function(a){switch(a){case 1:return"plaintext";case 2:return"image";case 4:return"video";case 3:return"richtext";default:throw new I({code:"INTERNAL_ERROR",message:`Invalid scope: ${a}`});}};Mc=function(a){return{id:a.Ga.id,scope:Lc(a.scope),count:a.count}};
Nc=function(a){if(a.canOpen)return{id:a.id,canOpen:!0};const b=Wa(a.reason,"INTERNAL_ERROR","Unable to overlay reason must exist.");return{id:a.id,canOpen:!1,reason:b}};
Pc=function(a,b){let c=()=>Promise.resolve();bc(a.l).then(d=>{const {id:e,kb:f}={id:d.Ub,kb:Nc(d.kb)};c=async()=>{await dc(a.l,{Ub:e})};const g=h=>{var l;null===(l=a.Pe)||void 0===l?void 0:l.qb&&(l.qb=!1);a.Pe=new Oc(h);const n=Wa(a.Pe,"INTERNAL_ERROR","this.currentInternalSelectionOverlay should exist.");b({get canOpen(){return n.canOpen},get reason(){return n.reason},open:async q=>{if(!n.canOpen)throw new I({code:"BAD_REQUEST",message:"Overlay can not be opened."});try{n.qb&&(n.od=!0);var v=a.l,
{target:z,yd:B}={target:"image_selection",yd:h.id};var x=new Ub({yd:B,target:z});return(await Wb(v,[x,q.launchParameters])).appProcessId}catch(A){throw n.qb&&(n.od=!1),new I({code:"INTERNAL_ERROR",message:"There was an issue with opening selection overlay. Please try again."});}}})};a.Cf.set(e,h=>g(h));g(f)});return()=>{c()}};Qc=function(a,b){a.Cf.forEach(c=>c(b))};
Vc=function(a,b){a=b.type;switch(a){case "append":return L("append"===b.type,"Operation is not an append operation","invalid_element_state"),{type:"append",Hb:Rc(b.Hb)};case "format":return L("format"===b.type,"Operation is not an append operation","invalid_element_state"),{type:"format",bounds:Sc(b.bounds),formatting:Tc(b.formatting)};case "replace":return Uc(b);default:throw new J({code:"BAD_REQUEST",message:`Invalid element type: ${a}`});}};
Yc=function(a,b,c){switch(c){case "image":return c=b.ref,L("string"===typeof c&&Wc.test(c),"Invalid content for image selection","invalid_element_state"),b;case "video":return c=b.ref,L("string"===typeof c&&Xc.test(c),"Invalid content for video selection","invalid_element_state"),b;case "plaintext":return L("string"===typeof b.text,"Invalid content for plaintext selection","invalid_element_state"),b;case "richtext":return a.T.Vb("preview","Richtext Selection"),L("string"===typeof b.ma,"Invalid content for plaintext selection",
"invalid_element_state"),{ma:b.ma,xa:b.xa.map(d=>Vc(a,d))};default:throw new J({code:"INTERNAL_ERROR",message:`Invalid scope: ${c}`});}};
dd=function(a){const b=a.children;L(null!=b,"TextElement children must exist.","invalid_element_state");L(Array.isArray(b)&&b.every(c=>"string"===typeof c),"TextElement children must be an array of string.","invalid_element_state");L(1===b.length,"TextElement children must have length of 1.","invalid_element_state");L(0!==b[0].length,"TextElement children cannot be an empty string.","invalid_element_state");a=Object.assign({},a,a.fontSize&&{fontSize:Zc(a.fontSize)},null!=a.color&&{color:$c(a.color)});
a.fontRef&&L(ad.test(a.fontRef),"Invalid font reference","invalid_element_state");a.fontSize&&L(M(a.fontSize,1,1E3),"Text fontSize should be between [1, 1000]","invalid_element_state");a.textAlign&&L(["start","center","end","justify"].includes(a.textAlign),'Incorrect fontAlign value. Allowed values: "start" | "center" | "end" | "justify".',"invalid_element_state");a.fontWeight&&L(bd(a.fontWeight),`Incorrect fontWeight value. Allowed values: ${cd}.`,"invalid_element_state");a.fontStyle&&L(["normal",
"italic"].includes(a.fontStyle),'Incorrect fontStyle value. Allowed values: "normal" | "italic".',"invalid_element_state");a.decoration&&L(["none","underline"].includes(a.decoration),'Incorrect decoration. Allowed values: "none" | "underline".',"invalid_element_state");return a};fd=function(a,b){L(1<b.children.length,"There should be at least 2 elements in a group element's children.","invalid_element_state");return Object.assign({},b,{children:b.children.map(c=>ed(a,c))})};
kd=function(a,b){L(null!=b,"element must exist","invalid_element_state");b=Object.assign({},b,"top"in b&&{top:void 0},"left"in b&&{left:void 0},"width"in b&&{width:void 0},"height"in b&&{height:void 0},"rotation"in b&&{rotation:void 0});var c=b.type;switch(c){case "IMAGE":c=b.dataUrl;a=b.ref;L(null!=c||null!=a,"Image must have either media ref or dataUrl.","invalid_element_state");L(!(null!=c&&null!=a),"Image elements cannot have both media ref and dataUrl.","invalid_element_state");if(null!=c){L(gd.test(c),
"invalid image dataUrl","invalid_element_state");var d=c.substring(c.indexOf(":")+1,c.indexOf(";"));switch(d){case "image/png":case "image/jpeg":break;case "image/svg+xml":if(hd.test(c))c=atob(c.replace(hd,""));else throw new I({code:"BAD_REQUEST",message:`Failed to load svg from image url: ${c}.`});c=c.toLowerCase();c=c.includes("<script")||c.includes("<metadata")||c.includes("<style");L(!c,"The following SVG tags <script>, <metadata> and <style> are not supported.","invalid_element_state");break;
default:throw new I({code:"BAD_REQUEST",message:`Invalid and/or unsupported image url mime type: '${d}'.`});}}null!=a&&L(Wc.test(a),"invalid image media reference","invalid_element_state");return b;case "VIDEO":return L(null!=b.ref,"Video must have a video reference.","invalid_element_state"),L(Xc.test(b.ref),"Invalid video reference","invalid_element_state"),b;case "EMBED":return a=b.url,L(null!=a,"embed url must exist","invalid_element_state"),L(id.test(a),"invalid embed url","invalid_element_state"),
b;case "TEXT":return dd(b);case "SHAPE":b=Object.assign({},b);c=b.viewBox;a=b.paths;L(null!=c,"Shape viewBox must exist.","invalid_element_state");L(M(c.top,-N,N-1),`viewBox top should be between [${-N}, ${N-1}]`,"invalid_element_state");L(M(c.left,-N,N-1),`viewBox left should be between [${-N}, ${N-1}]`,"invalid_element_state");L(M(c.width,0,N-1,{Ld:!0}),`viewBox width should be between (0, ${N-1}]`,"invalid_element_state");L(M(c.height,0,N-1,{Ld:!0}),`viewBox height should be between (0, ${N-1}]`,
"invalid_element_state");L(null!=a,"Shape paths must exist.","invalid_element_state");L(0<a.length&&30>=a.length,"There should be least 1 path and a maximum of 30 paths.","invalid_element_state");c=new Set;d=0;for(var e=0;e<a.length;e++){var f=a[e],g=f.fill,h=f.stroke,l=f.d;void 0===f.fill.dropTarget&&console.warn("Fill dropTarget should not be undefined. Please provide an explicit value.");null!=g.color&&(g.color=$c(g.color));if(null!=g.asset)switch(g.asset.type){case "IMAGE":L(Wc.test(g.asset.ref),
"Invalid image media reference","invalid_element_state");break;case "VIDEO":L(Xc.test(g.asset.ref),"Invalid video reference","invalid_element_state");break;default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected asset type: ${g.asset}.`});}h&&(h.color=$c(h.color),L(M(h.weight,0,100),"Path stroke weight must be between 0 and 100.","invalid_element_state"),L("inset"===h.strokeAlign,"Path stroke alignment should be inset.","invalid_element_state"));L(null!=l&&0<l.length,"Path must exist and cannot be empty.",
"invalid_element_state");h="m"===l[0].toLowerCase();L(h,"Path should begin with a move command.","invalid_element_state");h=l.match(/[mM]/g);L(!(h&&1<h.length),"Path should not have multiple move command.","invalid_element_state");h=l.match(/[qQ]/g);L(!(h&&0<h.length),"Quadratic bezier curve is not supported in path.","invalid_element_state");l=l.match(/\.[^\d]/g);L(!(l&&0<l.length),"Path contains invalid number.","invalid_element_state");c.add(g.color);d+=f.d.length}L(6>=c.size,"There should be a maximum of 6 distinct fill colors.",
"invalid_element_state");L(16384>=d,"There should be a maximum of 16384 bytes for all paths.","invalid_element_state");return b;case "GROUP":return fd(a,b);case "TABLE":a.T.Vb("preview","addNativeElement","TableElement");a={type:"TABLE",rows:[]};for(c=0;c<b.rows.length;c++){d=[];for(e=0;e<b.rows[c].cells.length;e++){g=b.rows[c].cells[e];f=g.text&&dd(g.text);if(l=g.fill)l=g.fill,h={},null!=l.color&&(h.color=$c(l.color)),l=h;f={text:f,fill:l,rowSpan:void 0!==g.rowSpan?jd(g.rowSpan):void 0,colSpan:void 0!==
g.colSpan?jd(g.colSpan):void 0};d.push(f)}a.rows.push({cells:d})}return a;default:throw new J({code:"BAD_REQUEST",message:`Invalid element type: ${c}`});}};
md=function(a){L(!("auto"===a.width&&"auto"===a.height),'Height and width cannot both be set to "auto".',"invalid_element_placement");var b=Object,c=b.assign,d=null!=a.top&&{top:Zc(a.top)},e=null!=a.left&&{left:Zc(a.left)},f=null!=a.width&&{width:ld(a.width)},g=null!=a.height&&{height:ld(a.height)},h;if(h=null!=a.rotation)a=Zc(a.rotation)%360,h={rotation:180<=a?a-360:-180>a?a+360:a};b=c.call(b,{},d,e,f,g,h);null!=b.top&&L(M(b.top,-N,N-1),`top should be between [${-N}, ${N-1}]`,"invalid_element_placement");
null!=b.left&&L(M(b.left,-N,N-1),`left should be between [${-N}, ${N-1}]`,"invalid_element_placement");null!=b.width&&"number"===typeof b.width&&L(M(b.width,0,N-1),`width should be between (${0}, ${N-1}]`,"invalid_element_placement");null!=b.height&&"number"===typeof b.height&&L(M(b.height,0,N-1),`height should be between (${0}, ${N-1}]`,"invalid_element_placement");null!=b.rotation&&L(M(b.rotation,-180,180),"rotation must be between -180deg to 180deg","invalid_element_placement");return b};
ed=function(a,b){L(!("TEXT"===b.type&&"auto"===b.width),"Text element width cannot be set to 'auto'","invalid_element_placement");const c={top:b.top,left:b.left,width:b.width,height:"height"in b?b.height:void 0,rotation:b.rotation};a=Object.assign({},kd(a,b),md(c));"TEXT"===b.type?L(null!=b.top&&null!=b.left,"Top and left properties must be defined for TextElement with box.","invalid_element_placement"):L(null!=b.top&&null!=b.left&&null!=b.width&&null!=b.height,"All box properties (top, left, width, height) must exist for elements with box.",
"invalid_element_placement");return a};Zc=function(a){if(!Number.isFinite(a))throw new I({code:"BAD_REQUEST",message:`Number ${a} should be finite.`});return-.001<=a&&.001>=a?0:parseFloat(a.toPrecision(6))};$c=function(a){L(nd.test(a),`Invalid color: ${a}. Color should be a valid 6 digit hex color code.`,"invalid_element_state");return a.toLowerCase()};
M=function(a,b,c,d){return Number.isFinite(a)?(null===d||void 0===d?0:d.Ld)&&(null===d||void 0===d?0:d.Ng)?a>b&&a<c:(null===d||void 0===d?0:d.Ld)?a>b&&a<=c:(null===d||void 0===d?0:d.Ng)?a>=b&&a<c:a>=b&&a<=c:!1};bd=function(a){switch(a){case "normal":case "thin":case "extralight":case "light":case "medium":case "semibold":case "bold":case "ultrabold":case "heavy":return!0;default:return!1}};
jd=function(a){if(!Number.isFinite(a)||!Number.isInteger(a)||0>=a)throw new I({code:"BAD_REQUEST",message:`Number ${a} should be an integer greater than 0.`});return a};od=function(a){if("string"!==typeof a)throw new I({code:"BAD_REQUEST",message:"Page title must be a string"});if(255<a.length)throw new I({code:"BAD_REQUEST",message:"Page title must be no longer than 255 characters"});return a};
pd=function(a){const b={};null!=a.color&&(b.color=$c(a.color));if(null!=a.asset){switch(a.asset.type){case "IMAGE":L(Wc.test(a.asset.ref),"Invalid image media reference","invalid_element_state");break;case "VIDEO":L(Xc.test(a.asset.ref),"Invalid video reference","invalid_element_state");break;default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected asset type: ${a.asset}.`});}b.asset=a.asset}return b};ld=function(a){return"auto"===a?"auto":Zc(a)};
qd=function(a){const b=ec(a);try{var c=(new TextEncoder).encode(JSON.stringify(b)).length}catch(d){c=0}if(5120<c)throw new I({code:"QUOTA_EXCEEDED",message:"Invalid app config data: Maximum limit of 5KB exceeded."});Object.keys(a).forEach(d=>{if(d.includes("$")||d.includes(".")||d.includes("\x00"))throw new I({code:"BAD_REQUEST",message:"Invalid app config data: AppElementData keys can not include '$' or '.' or '\x00' sign."});});return b};
Uc=function(a){L("replace"===a.type,"Operation is not an append operation","invalid_element_state");return{type:"replace",bounds:Sc(a.bounds),$c:a.$c.map(b=>Rc(b,!0))}};Sc=function(a){L(0<=a.index,"Bounds must start at position 0 or above","invalid_element_state");L(0<=a.length,"Bounds must have a positive length","invalid_element_state");return Object.assign({},a)};
Rc=function(a,b=!1){L("string"===typeof a.text&&(b||0<a.text.length),`A string ${b?"":"with at least 1 character "}is required`,"invalid_element_state");return{text:a.text,formatting:a.formatting&&Tc(a.formatting)}};
Tc=function(a){a=Object.assign({},a,a.fontSize&&{fontSize:Zc(a.fontSize)},a.listLevel&&{listLevel:jd(a.listLevel)},null!=a.color&&{color:$c(a.color)});a.fontRef&&L(ad.test(a.fontRef),"Invalid font reference","invalid_element_state");a.fontSize&&L(M(a.fontSize,1,1E3),"Text fontSize should be between [1, 1000]","invalid_element_state");a.textAlign&&L(["start","center","end","justify"].includes(a.textAlign),'Incorrect fontAlign value. Allowed values: "start" | "center" | "end" | "justify".',"invalid_element_state");
a.fontWeight&&L(bd(a.fontWeight),`Incorrect fontWeight value. Allowed values: ${cd}.`,"invalid_element_state");a.fontStyle&&L(["normal","italic"].includes(a.fontStyle),'Incorrect fontStyle value. Allowed values: "normal" | "italic".',"invalid_element_state");a.decoration&&L(["none","underline"].includes(a.decoration),'Incorrect decoration. Allowed values: "none" | "underline".',"invalid_element_state");a.strikethrough&&L(["none","strikethrough"].includes(a.strikethrough),'Incorrect strikethrough. Allowed values: "none" | "strikethrough".',
"invalid_element_state");a.link&&(L("string"===typeof a.link,"Incorrect link. Must be a string","invalid_element_state"),L(id.test(a.link),"Invalid link url","invalid_element_state"));a.listMarker&&L(rd.includes(a.listMarker),`Incorrect listMarker value. Allowed values: ${sd}.`,"invalid_element_state");return a};
L=function(a,b,c){if(!a)switch(c){case "invalid_element_placement":throw new I({code:"BAD_REQUEST",message:`Invalid element placement: ${b}`});case "invalid_element_state":throw new I({code:"BAD_REQUEST",message:`Invalid element state: ${b}`});default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected error type: ${c}.`});}};
vd=function(a,{scope:b,onChange:c}){a.B("registerOnSelectionChange");"richtext"===b&&a.T.Vb("preview","Richtext Selection");if(!td.includes(b))throw new I({code:"BAD_REQUEST",message:`${b} is not a valid selection scope.`});let d=()=>Promise.resolve();Pb(a.l,new Nb({scope:Kc(b)})).then(e=>{const {id:f,kb:g}={id:e.Ub.id,kb:Mc(e.kb)};d=async()=>{await Sb(a.l,new Qb({id:f}));a.Wc.delete(f)};const h=l=>{l.scope===b&&c({count:l.count,scope:b,read:async()=>{const n=await Kb(a.l,new Ib({id:l.id}));return new ud(a.l,
l.id,b,Jc(n),()=>a.Wc.has(f),a.va)}})};a.Wc.set(f,l=>{h(l)});h(g)});return()=>{d()}};wd=function(a,{target:b,onCanOpen:c}){a.B("registerOnOverlayOpenableChange");switch(b){case "image_selection":return Pc(a.Bf,c);default:throw new I({code:"BAD_REQUEST",message:"Invalid overlay target."});}};
xd=function(a,b){Va(null!=a.dc,"renderAppElement must not be null");b=a.dc(b);if(Array.isArray(b))b=b.map(c=>{const d=c.type;switch(d){case "EMBED":case "TEXT":case "SHAPE":case "IMAGE":case "VIDEO":return ed(a.va,c);default:throw new J({code:"BAD_REQUEST",message:`Unsupported element type '${d}' in app element.`});}});else{L(null!=b,"element must exist","invalid_element_state");if("INTERACTIVE_ELEMENT"!==b.type)throw new I({code:"INTERNAL_ERROR",message:`Attempting to validate element of type 'INTERACTIVE_ELEMENT', but received '${b.type}'`});
b=Object.assign({},{type:b.type},md({width:b.width,height:b.height}))}return b};
yd=async function(a,{error:b,yc:c,data:d}){try{var e=a.l;var f=new Gb({Lg:{code:b.code,message:b.rawMessage},yc:c,data:d?new Map(Object.entries(d)):void 0});await Hb(e,f)}catch(g){if(g instanceof I)throw new I({code:g.code,message:`${"Encountered an error while trackAppApiElementAddedOrUpdatedFailed"}: ${g.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while trackAppApiElementAddedOrUpdatedFailed"}: ${g instanceof Error?g.message:g}`});}};
zd=function(a,b,c){if(!a.dc)throw new I({code:"FAILED_PRECONDITION",message:`You've registered an ${b} callback for this AppElement using the '${c}' method,
without registering a render callback with the 'registerRenderAppElement' method.

This doesn't work because the AppElement re-renders based on the AppElementData produced by
the ${b} callback.

Please ensure you've registered the render callback using 'registerRenderAppElement'.`});};Bd=function(a){return new Promise(b=>{if(!Ad(a))return b(!1);const c=document.createElement("img");c.onload=()=>b(!0);c.onerror=()=>b(!1);c.src=a})};Cd=async function(a){const b=[Bd(a.fullSizeSrc)];a.previewUrl&&a.previewUrl!==a.fullSizeSrc&&b.push(Bd(a.previewUrl));if(0<(await Promise.all(b)).filter(c=>!c).length)throw new I({code:"BAD_REQUEST",message:"image could not be loaded"});};
Dd=function(a){try{return"string"===typeof a&&null!=(new URL(a)).toString()}catch(b){return!1}};Ed=function(a){return a instanceof Function};Fd=function(a,b){return"string"===typeof a&&(!b||a.length>=b)};Gd=function(a){return"number"===typeof a&&0<a};Ad=function(a){var b;return Fd(a)&&1===(null===(b=a.match(/^data:(?:image\/jpeg|image\/png)(?:;base64)?,/))||void 0===b?void 0:b.length)};Id=function(a){return Fd(a)&&Hd.has(a)};Jd=function(a,b){return b.some(c=>c===a)};
Ld=function(a){return null!=a&&"object"===typeof a&&Kd(a,{width:4,height:4})};Md=function(a,b){switch(b){case 1:return Ad(a);case 3:return Id(a);case 2:return"number"===typeof a;case 0:return Fd(a);case 4:return Gd(a);default:throw new m(b);}};
Kd=function(a,b,c){if("object"!==typeof a||(null===a||void 0===a?void 0:a.constructor)!==Object)return!1;const d=new Set(Object.keys(b)),e=new Set(c?Object.keys(c):[]);for(const f of Object.keys(a)){const g=e.has(f);if(!d.has(f)&&!g)throw new I({code:"BAD_REQUEST",message:`The following unexpected key was supplied: ${f}`});d.delete(f);const h=b[f]||(null===c||void 0===c?void 0:c[f])||(()=>!1);if(null==h)return!1;const l=a[f];if(!(g&&void 0===a[f]||(h instanceof Function?h(l):Md(l,h))))return!1}if(0===
d.size)return!0;throw new I({code:"BAD_REQUEST",message:`The following required keys were not supplied: ${Array.from(d).join(", ")}`});};Nd=function(a,b,c){if(Jd(a,b))return!0;throw new I({code:"BAD_REQUEST",message:`${c||a} must be one of ${b.join(", ")}`});};Od=function(a){return Fd(a)&&ad.test(a)};
O=function(a,b,c,d){d=void 0===d?!1:d;try{if(b(a)||d&&void 0===a)return!0}catch(e){if(e instanceof I)throw e;throw new I({code:"BAD_REQUEST",message:"string"===typeof e?e:`Error encountered while validating '${a}': ${e}`});}throw new I({code:"BAD_REQUEST",message:c});};Rd=function(a){return O(a,b=>Kd(b,Pd,Qd),"'UserData' is invalid")};Td=function(a){var b=Object.assign({},Sd);const c=Sd.type,d=(delete b.type,b);O(a,e=>Kd(e,d,{type:c}),"'UserData' is invalid")};
Ud=function(a){O(a,b=>Kd(b,{},Object.assign({},Pd,Qd)),"'UserData' is invalid",!0)};
Wd=function(a){O(a,b=>Kd(b,{type:c=>Nd(c,["TEXT"],"type"),fontStyle:c=>Nd(c,["italic","normal"],"fontStyle"),decoration:c=>Nd(c,["underline","none"],"decoration"),fontWeight:c=>Nd(c,Vd,"fontWeight"),textAlign:c=>Nd(c,["start","center","end","justify"],"textAlign"),children:c=>O(c,d=>{var e=Fd;return Array.isArray(d)&&d.every(e)},'"children must be a string array')},{fontRef:c=>O(c,Od,"Invalid font reference",!0)}),"'TextDragData' is invalid",!1)};
Yd=function(a){var b=Object.assign({},Xd);const c=Xd.fullSize,d=(delete b.fullSize,b);return O(a,e=>Kd(e,d,{fullSize:c}),"'UserData' is invalid")};$d=function(a){return O(a,b=>Kd(b,Zd),"'UserData' is invalid")};ae=function(a){var b=Object.assign({},Xd);const c=Xd.type,d=Xd.resolveVideoRef,e=(delete b.type,delete b.resolveVideoRef,b);O(a,f=>Kd(f,{type:c,resolveVideoRef:d},e),"'UserData' is invalid")};be=function(a){try{return"string"===typeof a&&null!=(new URL(a)).toString()}catch(b){return!1}};
ce=function(a){return a instanceof Function};de=function(a,b){return"string"===typeof a&&(!b||a.length>=b)};ee=function(a){return"number"===typeof a&&0<a};fe=function(a,b){return b.some(c=>c===a)};he=function(a){return null!=a&&"object"===typeof a&&ge(a,{width:4,height:4})};
je=function(a,b){switch(b){case 1:var c;return de(a)&&1===(null===(c=a.match(/^data:(?:image\/jpeg|image\/png)(?:;base64)?,/))||void 0===c?void 0:c.length);case 3:return de(a)&&ie.has(a);case 2:return"number"===typeof a;case 0:return de(a);case 4:return ee(a);default:throw new m(b);}};
ge=function(a,b,c){if("object"!==typeof a||(null===a||void 0===a?void 0:a.constructor)!==Object)return!1;const d=new Set(Object.keys(b)),e=new Set(c?Object.keys(c):[]);for(const f of Object.keys(a)){const g=e.has(f);if(!d.has(f)&&!g)throw new I({code:"BAD_REQUEST",message:`The following unexpected key was supplied: ${f}`});d.delete(f);const h=b[f]||(null===c||void 0===c?void 0:c[f])||(()=>!1);if(null==h)return!1;const l=a[f];if(!(g&&void 0===a[f]||(h instanceof Function?h(l):je(l,h))))return!1}if(0===
d.size)return!0;throw new I({code:"BAD_REQUEST",message:`The following required keys were not supplied: ${Array.from(d).join(", ")}`});};ke=function(a,b,c){if(fe(a,b))return!0;throw new I({code:"BAD_REQUEST",message:`${c||a} must be one of ${b.join(", ")}`});};le=function(a){return de(a)&&ad.test(a)};
P=function(a,b,c,d){d=void 0===d?!1:d;try{if(b(a)||d&&void 0===a)return!0}catch(e){if(e instanceof I)throw e;throw new I({code:"BAD_REQUEST",message:"string"===typeof e?e:`Error encountered while validating '${a}': ${e}`});}throw new I({code:"BAD_REQUEST",message:c});};ne=function(a){var b=Object.assign({},me);const c=me.type,d=(delete b.type,b);P(a,e=>ge(e,d,{type:c}),"'UserData' is invalid")};
oe=function(a){P(a,b=>ge(b,{type:c=>ke(c,["TEXT"],"type"),fontStyle:c=>ke(c,["italic","normal"],"fontStyle"),decoration:c=>ke(c,["underline","none"],"decoration"),fontWeight:c=>ke(c,Vd,"fontWeight"),textAlign:c=>ke(c,["start","center","end","justify"],"textAlign"),children:c=>P(c,d=>Array.isArray(d)&&d.every(de),'"children must be a string array')},{fontRef:c=>P(c,le,"Invalid font reference",!0)}),"'TextDragData' is invalid",!1)};
qe=function(a){var b=Object.assign({},pe);const c=pe.fullSize,d=(delete b.fullSize,b);return P(a,e=>ge(e,d,{fullSize:c}),"'UserData' is invalid")};re=function(a){var b=Object.assign({},pe);const c=pe.type,d=pe.resolveVideoRef,e=(delete b.type,delete b.resolveVideoRef,b);P(a,f=>ge(f,{type:c,resolveVideoRef:d},e),"'UserData' is invalid")};te=function(a){return P(a,b=>ge(b,se),"'UserData' is invalid")};
xe=function(a,b){a.handle("DND_V1_RESOLVE_QUEUED_IMAGE",async()=>{const c=await b.le();return ue.C(c)});a.handle("DND_V1_RESOLVE_QUEUED_VIDEO",async()=>{const c=await b.Ih();return ve.C(c)});a.handle("DND_V1_RESOLVE_QUEUED_AUDIO",async()=>{const c=await b.ke();return we.C(c)})};ze=async function(a,b){a=await a.A.request("DND_V2_START_DRAG",ye.C(b));if(!a.ok)throw a.error;};Be=async function(a,b){a=await a.A.request("DND_V1_SYNC_DRAG",Ae.C(b));if(!a.ok)throw a.error;};
Ce=function(a={}){return("IMAGE"===(null===a||void 0===a?void 0:a.type)||null==(null===a||void 0===a?void 0:a.type))&&null!=a.resolveImageRef};De=async function(a){try{await Cd(a)}catch(b){if(b instanceof I)throw new I({code:b.code,message:`Encountered an error while dragging element: ${b.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`Encountered an error while dragging element: ${b}`});}};Ee=function(a){switch(a){case "start":case "end":case "center":return a;default:return"start"}};
Ie=async function(a,b,c,d,e){const f=null===c||void 0===c?void 0:c.type;if(!f||!Fe.includes(f))throw new I({code:"BAD_REQUEST",message:`Unsupported and/or invalid drag data type: '${null===c||void 0===c?void 0:c.type}'`});switch(f){case "TEXT":b=await a.Rf.gb(b,c);await Ge(a,He(b,d),e);break;case "IMAGE":b=await a.Ze.gb(b,c);a.Sd=void 0;a.Hf(b.resolveImageRef);await Ge(a,He(b,d),e);break;case "VIDEO":b=await a.Vf.gb(b,c);a.Mf(b.resolveVideoRef);await Ge(a,He(b,d),e);break;case "AUDIO":b=a.Ke.gb(c);
a.Ef(b.resolveAudioRef);await Ge(a,He(b,d),e);break;case "EMBED":await Ge(a,He(c,d),e);break;default:throw new m(f);}};Ge=async function(a,b,c){try{a.Gc.start(),await ze(a.l,b)}finally{a.Gc.stop(),c()}};
Oe=function(a,b,c,d){return async e=>{const f=await d();c.onDragStart(b);a.Sd=void 0;try{switch(a.Gc.start(),f.type){case void 0:case "IMAGE":null!=f.resolveImageRef?(a.Hf(f.resolveImageRef),await a.l.startDrag(new Je(Object.assign({},f,e)))):await a.l.startDrag(new Ke(Object.assign({},f,e)));break;case "TEXT":await a.l.startDrag(new Le(Object.assign({},f,e)));break;case "VIDEO":a.Mf(f.resolveVideoRef);await a.l.startDrag(new Me(Object.assign({},f,e)));break;case "AUDIO":a.Ef(f.resolveAudioRef);await a.l.startDrag(new Ne(Object.assign({},
f,e)));break;default:throw new m(f);}}finally{a.Gc.stop(),c.onDragEnd(b)}}};Te=function(a,b,c){return{designInteraction:new Pe(a,b,c),dragAndDrop:new Qe(a,new Re(a,c),b,c),export:new Se(a,c)}};Ve=function(a,b){a.handle("IE_V1_SEND_APP_ELEMENT_DATA_CHANGE",async c=>{c=c?Ue.D(c):void 0;return b.ue(c)})};We=function(a){a.A.request("IE_V1_SUBSCRIBE_TO_APP_ELEMENT_DATA_CHANGE").then(b=>{if(!b.ok)throw new I({code:"INTERNAL_ERROR",message:"Unable to subscribe to app element data change."});})};
Xe=function(a){return Object.entries(a).reduce((b,[c,d])=>{"undefined"!==typeof d&&b.set(c,JSON.stringify(d));return b},new Map)};Ze=async function(a,b){b=Ye.C(b);await a.A.request("NATIVE_FETCH_ANALYTICS_V1_TRACK_NATIVE_FETCH_CALL_START",b)};af=async function(a,b){b=$e.C(b);await a.A.request("NATIVE_FETCH_ANALYTICS_V1_TRACK_NATIVE_FETCH_CALL",b)};cf=async function(a){const b=bf.C({type:1});await a.A.request("NATIVE_EVENTS_ANALYTICS_V1_TRACK_NATIVE_POINTER_EVENT",b)};
ef=async function(a,b){b=df.C(b);await a.A.request("TRACK_DEVELOPER_SERVER_PROCESSING_REQUEST_V1",b)};ff=async function(a){a=await a.A.request("UI_CONTEXT_V1_SUBSCRIBE_TO_UI_CONTEXT_CHANGE");if(!a.ok)throw a.error;};hf=async function(a,b){b=gf.C(b);a=await a.A.request("REGISTER_UNSTABLE_API_USAGE_V1",b);if(!a.ok)throw a.error;};kf=async function(a,b){b=jf.C(b);a=await a.A.request("REGISTER_DEPRECATED_API_USAGE_V1",b);if(!a.ok)throw a.error;};
mf=function(a,b){sb(a,"UI_CONTEXT_V1_SEND_UI_CONTEXT_CHANGE",lf,c=>b.Sh(c))};of=async function(a,b){b=nf.C(b);a=await a.A.request("APP_PROCESS_V1_SET_STATE_CHANGE_SUBSCRIPTION",b);if(!a.ok)throw a.error;};qf=async function(a,b){b=pf.C(b);a=await a.A.request("APP_PROCESS_V1_SET_MESSAGE_SUBSCRIPTION",b);if(!a.ok)throw a.error;};sf=async function(a,b){b=rf.C(b);a=await a.A.request("APP_PROCESS_V2_SET_STATE_HANDLER",b);if(!a.ok)throw a.error;};
xf=function(a,b){a.handle("APP_PROCESS_V1_NOTIFY_STATE_CHANGE",async c=>{if(void 0===c)throw new I({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_NOTIFY_STATE_CHANGE:Request can not be undefined"});if(!tf(c))throw new I({code:"INTERNAL_ERROR",message:"Could not convert object into NotifyStateChangeRequest"});var d=c[1];c=c[2];if(void 0===d)throw new I({code:"INTERNAL_ERROR",message:"Missing proto payload in NotifyStateChangeRequest"});d=[uf.D(d),c];await b.mh(d)});a.handle("APP_PROCESS_V1_RUN_STATE_HANDLER",
async c=>{if(void 0===c)throw new I({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_RUN_STATE_HANDLER:Request can not be undefined"});if(!tf(c))throw new I({code:"INTERNAL_ERROR",message:"Could not convert object into RunStateHandlerRequest"});var d=c[1];c=c[2];if(void 0===d)throw new I({code:"INTERNAL_ERROR",message:"Missing proto payload in RunStateHandlerRequest"});d=[vf.D(d),c];await b.Nh(d)});a.handle("APP_PROCESS_V1_ROUTE_MESSAGE",async c=>{if(void 0===c)throw new I({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_ROUTE_MESSAGE:Request can not be undefined"});
if(!tf(c))throw new I({code:"INTERNAL_ERROR",message:"Could not convert object into RouteMessageRequest"});var d=c[1];c=c[2];if(void 0===d)throw new I({code:"INTERNAL_ERROR",message:"Missing sender AppProcessInfo in RouteMessageRequest"});d=[wf.D(d),c];await b.Mh(d)})};yf=function(a){a=a[0];switch(a.type){case "OPENING":return"opening";case "OPEN":return"open";case "CLOSING":return"closing";case "CLOSED":return"closed";default:throw new m(a);}};
Af=function(a,b){return{processId:a.processId,launchParams:b,surface:zf(a.surface)}};zf=function(a){switch(a){case 1:case 3:return"object_panel";case 2:return"selected_image_overlay";default:throw new m(a);}};Bf=function(a){switch(a){case "completed":return 1;case "aborted":return 2;default:throw new m(a);}};Ef=async function(a,b,c){const d=await (new Cf(a)).getInfo();return new Df(a,Af(...d),b,c)};Gf=async function(a){a=await (new Cf(a)).getInfo();return new Ff(Af(...a))};
Jf=async function(a,b,c){b=await Ef(a,b,c);const d=await (new Hf(a)).getInfo();return{platform:new If(a,d.platform.wh,c),appProcess:b}};Lf=function(a,b,c,d){return b.includes(c)?{googleAdsAuth:new Kf(a,d)}:{}};
Mf=function(a){const b=a.type;switch(b){case "AUTHENTICATED":return{type:"authenticated"};case "CANCELED":return{type:"canceled"};case "DENIED":return{type:"denied",details:a.details};case "FAILED":return{type:"failed",reason:"signature_verification_failed"===a.Ua?{type:a.Ua,details:a.Ch}:{type:a.Ua}};default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected authentication result type: '${b}'.`});}};Nf=function(a){return Object.entries(null!==a&&void 0!==a?a:{}).map(([b,c])=>({key:b,value:c}))};
Of=function(a,{Qb:b,Rb:c,Yb:d}){console.warn(`${"Apps SDK"}: The "${c}" ${b} is deprecated. Instead, use "${d}".`);kf(a.Jc,new jf({Qb:b,Rb:c,Yb:d})).catch(e=>a.j.F(`Encountered an error while registering unstable api usage: ${e}`))};Pf=function(a,b){a.Vb("experimental",b)};Uf=function(a,b){var c=new Qf(a,b.Nb("bus"));a=new Rf(c.send,b.Nb("client"));b=new Sf(c.send,b.Nb("requestHandler"));c=c.handle(Tf(a,b));return c.ok?Ba({handle:b.handle,request:a.request}):c};
Xf=async function(a){var {parent:b,addEventListener:c,removeEventListener:d}=window;let e=new Vf(1E3);const f=({ports:h,data:l})=>{l=l?l.source?"parent"!==l.source?Ca("invalid source"):Ba():Ca("'source' is missing in MessageEvent data object"):Ca("missing 'data' field in MessageEvent");l.ok?1!==h.length?a.error("invalid number of ports received from the parent"):([h]=h,e.resolve(h)):a.info(l.error,{J:"failed to verify message"})};c("message",f);const g=async()=>{let h;const l={source:"iframe"};b.postMessage(l,
"*");let n=1;for(;4>=n;)try{h=await e.promise();break}catch(q){e=new Vf(1E3*n),b.postMessage(l,"*"),n++}if(null==h)throw Wf;return h};try{const h=await g();return Uf(h,a.Nb("comms"))}catch(h){return Ca(h)}finally{d("message",f)}};Yf=function(a){return null!=a};
cg=function(a,b){const c={};let d=Zf.get(a);d||Zf.set(a,d={});for(const [e,f]of Object.entries(b)){if(b=f){b=d;if(e in b){if(b[e]!==f)throw new $f(`Can not apply a different decorator to the already decorated ${e} property. Check the parent class decorator is the same.`);b=!0}else b[e]=f,b=!1;b=!b&&!ag(a,e,f)}b&&(e in a||Object.defineProperty(a,e,{configurable:!0}),c[e]=f)}bg(a,c)};
ag=function(a,b,c){if(c!==dg&&c!==dg.bound)return!1;let d=eg(a,c,a[b]);Object.defineProperty(a,b,{get(){return d},set(e){d=eg(a,c,e)},configurable:!fg().safeDescriptors});return!0};eg=function(a,b,c){return"function"!==typeof c?c:(null===c||void 0===c?0:c.ki)?c:b===dg.bound?dg(c.bind(a)):dg(c)};ig=function(){null==gg&&(gg=new Map([["light",hg(":global(.light)")],["dark",hg(":global(.dark)")]]));return gg};kg=function(){null==jg&&(jg=hg(":global(.theme)"));return jg};
lg=function(){const a=[kg(),...ig().values(),hg(":global(.classic)")];document.documentElement.classList.remove(...a);document.body.classList.remove(...a)};ng=function(a){return mg(()=>({classicLight:a.og,classicDark:a.ng,light:a.fh,dark:a.xg}),[a.og,a.ng,a.fh,a.xg])};og=function(a){return a.replace(/./g,b=>b.charCodeAt(0).toString(2).padStart(8,"0")).replace(/0/g,"\u2062").replace(/1/g,"\u2064")};
sg=function(a){var b=pg(),c=qg[b];c=c&&c[a];null==c&&(c=void 0);if(null==c)throw Error(`Could not find string for ${b} ${a}`);return rg?"\u2062"+c+og(a):c};tg=function({src:a,onerror:b,onload:c,async:d=!1,Fg:e}){const f=document.createElement("script");f.src=a;f.onload=null!==c&&void 0!==c?c:null;f.onerror=null!==b&&void 0!==b?b:null;f.async=d;e&&f.setAttribute("crossorigin","anonymous");document.body.append(f)};
ug=function({window:a,bc:b}){const c=b.Ve;if(c){var d=["config",c];"AAFbV22Umog"===b.appId&&d.push({cookie_domain:"app-aafbv22umog.canva-apps.com",cookie_flags:"secure;samesite=none"});var e;a.dataLayer=null!==(e=a.dataLayer)&&void 0!==e?e:[];a.dataLayer.push(["js",new Date],d);tg({src:`https://www.googletagmanager.com/gtag/js?id=${c}`})}};vg=function(a,b,c){const d=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(a,b,Object.assign({},d,{value:c,configurable:!1}))};
wg=function(a,b){a[b]&&delete a[b]};
zg=function(a){const b=window.fetch;vg(window,"fetch",async(...c)=>{[d]=c;var d=(xg(d)?d.url:d).toString();try{var e=(new URL(d)).hostname}catch(h){e="unknown"}e=yg(1,a,{hostname:e});e.start();try{const h=await b(...c);const [l,n]=c;var f=xg(l)?l.body:(null===n||void 0===n?void 0:n.body)||null;const [q,v]=c;var g=xg(q)?q.method:(null===v||void 0===v?void 0:v.method)||"GET";e.complete(h.status);a.Se.track({requestUrl:d.toString(),Uc:f,Fb:h.status,Vc:g});return h}catch(h){throw e.complete(499),c=e.span?
e.span.context.traceId:void 0,c&&a.j.setTag("fetch_trace_id",c),a.j.Jb(h,{J:"Fetch Exception: encountered an issue calling 3rd party endpoint"}),h;}})};
Ag=function(a){const b=window.XMLHttpRequest;class c extends b{open(d,e,f,g,h){this.url=e;this.method=d;try{this.hostname=(new URL(e)).hostname}catch(l){this.hostname="unknown"}super.open(d,e,f,g,h)}send(d){const e=yg(2,a,{hostname:this.hostname});e.start();this.addEventListener("loadend",()=>{var f;e.complete(this.status);a.Se.track({requestUrl:(null===(f=this.url)||void 0===f?void 0:f.toString())||"",Uc:d||null,Fb:this.status,Vc:this.method||"GET"})});super.send(d)}}vg(window,"XMLHttpRequest",c)};
yg=function(a,b,c){return new Bg(a,b,c)};xg=function(a){return!!a&&"object"===typeof a&&!(a instanceof URL)};
Cg=function(a){return new Promise((b,c)=>{if(!a.name)return b();const d=setTimeout(()=>{c(`Timed out whilst deleting database '${a.name}'`)},100),e=(g,h)=>{clearTimeout(d);"done"===g.readyState&&g.result&&g.result.close();h()},f=window.indexedDB.deleteDatabase(a.name);f.addEventListener("blocked",()=>e(f,b));f.addEventListener("error",g=>e(f,()=>c(g)));f.addEventListener("success",()=>e(f,b))})};Dg=function(a){window.addEventListener("click",()=>{cf(a)},{capture:!0})};
Ig=async function({Jc:a,j:b,Ha:c,appId:d,appName:e,Za:f,Lb:g,Sb:h}){Eg({Sb:h,window});c={j:b,Ca:a,Ha:c,appId:d,appName:e,Za:f,Lb:g,Se:new Fg(d,a,b)};zg(c);Ag(c);Gg();Dg(a);await Hg({Ca:a,j:b})};Jg=function(a){var b=window;for(const c in a){if(c in b)throw Error(`field '${c}' already defined`);const d=Object.freeze(a[c]);Object.defineProperty(b,c,{get(){return d},configurable:!1,enumerable:!1})}};Kg=function(a){return new Promise(b=>setTimeout(b,a))};Lg=function(a){return()=>Kg(a)};
Mg=function(a,b,c,d){const e=a.context?[a.context]:[];null!=d&&e.push(d);0<Object.keys(a.tags).length&&e.push(a.tags);return[`[ConsoleErrorClient][${a.name}][${b}]: ${c}`,...e]};Ng=function(a){Object.keys(a).forEach(b=>null==a[b]&&delete a[b])};Pg=function(a){if(a instanceof __c.Og){const b=[];a.values.forEach(c=>{b.push(Pg(c))});return b}if(a instanceof __c.Qg){const b={};a.values.forEach(c=>{b[c.name]=Pg(c.value)});return b}return a.value};
Rg=function(a,b){return null!=b&&"object"===typeof b&&null!=b.sampleRate&&b instanceof Error?Math.min(Math.max(0,b.sampleRate),1):a.Re};
Vg=function(a){const b=[],c=Error();c.name=a.error.name;c.message=a.error.message;var d;c.stack=null!==(d=a.error.stack)&&void 0!==d?d:void 0;const e=a.error.severity;a.contexts.forEach(f=>{var g=[...f.context.tags];g.push(new __c.Sg({name:"offlineCount",value:String(f.oa)}));g.push(new __c.Sg({name:"offline",value:"true"}));f=[...f.context.extra];f.push(new __c.Tg({name:"offlineFirstSeen",value:new __c.Ug({value:(new Date(a.Bb)).toString()})}));f.push(new __c.Tg({name:"offlineLastSeen",value:new __c.Ug({value:(new Date(a.Cb)).toString()})}));
g={fingerprint:[...a.error.fingerprint],J:a.error.J,tags:new Map(g.map(h=>[h.name,h.value])),extra:new Map(f.map(h=>[h.name,Pg(h.value)]))};b.push({error:c,dsn:a.error.dsn,severity:e,params:g})});return b};Wg=function(a,b){let c=b;Object.entries(a.Df).forEach(([d,e])=>{c=c.split(e).join(d)});return c};Xg=function(a,b={}){Object.keys(b).forEach(c=>{const d=b[c];"string"===typeof d&&(b[c]=Wg(a,d))})};
Yg=function(a,b){var c;return Object.assign({},b,{frames:null===b||void 0===b?void 0:null===(c=b.frames)||void 0===c?void 0:c.map(d=>{for(const [e,f]of Object.entries(a.Df)){const g=h=>null===h||void 0===h?void 0:h.replace(f,e);d.module=g(d.module);d.abs_path=g(d.abs_path);d.filename=g(d.filename)}return d})})};
Zg=function(a,b){var c,d;b.exception&&b.exception.values&&(b.exception=Object.assign({},b.exception,{values:null===(d=b.exception)||void 0===d?void 0:null===(c=d.values)||void 0===c?void 0:c.map(e=>Object.assign({},e,e.stacktrace&&{stacktrace:Yg(a,e.stacktrace)}))}))};$g=function(a,b){var c=b.request;null!=c&&null!=c.url&&(c.url=Wg(a,c.url));Zg(a,b);null!=b.tags&&Xg(a,b.tags)};
ah=function(a,b){const c=[];b.message&&c.push(b.message);if(b.exception){const {type:d="",value:e=""}=b.exception.values&&b.exception.values[0]||{};"Error"!==d&&c.push(d,e)}return c.some(d=>a.Zf.some(e=>"[object RegExp]"===Object.prototype.toString.call(e)?e.test(d):"string"===typeof e?-1!==d.indexOf(e):!1))};
ch=function(a,b){var c,d;if((null===a||void 0===a?void 0:a.message)!==(null===b||void 0===b?void 0:b.message))return!1;a=null===(c=a.exception)||void 0===c?void 0:c.values;b=null===(d=b.exception)||void 0===d?void 0:d.values;if(null==a||null==b||a.length!==b.length)return!1;for(d=0;d<a.length;d++)if(a[d].value!==b[d].value||a[d].type!==b[d].type||!bh(a[d].stacktrace,b[d].stacktrace))return!1;return!0};
bh=function(a,b){a=null===a||void 0===a?void 0:a.frames;b=null===b||void 0===b?void 0:b.frames;if(null==a&&null==b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c].filename!==b[c].filename||a[c].colno!==b[c].colno||a[c].lineno!==b[c].lineno)return!1;return!0};eh=function(a,b){const c=a.history.find(f=>ch(f.event,b));if(null==c)return!1;const d=dh.now(),e=c.timestamp;return ch(b,c.event)&&d-e<a.ci};hh=function(){return new fh({iteratee:a=>gh({frame:a,Wh:"/dist/renderer/"})})};
gh=function({frame:a,Wh:b}){if(null==a.filename)return a;const c=a.filename.replace(/\\/g,"/").split(b);if(1>=c.length)return a;a.filename="app://"+b+c.pop();return a};
jh=function(a,b){var c;null===b||void 0===b?void 0:null===(c=b.breadcrumbs)||void 0===c?void 0:c.map((d,e)=>{if(null===b||void 0===b?0:b.breadcrumbs){var f=b.breadcrumbs;if("http"===d.type){var g;d.data=d.data||{};var h;d.data.url=ih(a,null!==(h=null===(g=d.data)||void 0===g?void 0:g.url)&&void 0!==h?h:"")}f[e]=d}});b.request&&(b.request=a.pe(b.request));return b};
ih=function(a,b){try{const c=new URL(b,`${a.location.protocol}//${a.location.host}`);if(!["http:","https:"].includes(c.protocol))return"";a.$f.some(d=>c.hostname.includes(d))&&c.pathname.startsWith("/_ajax")||(c.pathname="");c.search="";return b.includes(c.host)?c.toString():c.pathname||"/"}catch(c){return""}};lh=function(a){const b=[];for(const c of kh){const d=c(a);d&&b.push(d)}return b};nh=function(a,b){null!=a&&"string"!==typeof a&&a instanceof mh&&null!=a.requestId&&b("requestId",a.requestId)};
oh=function(a){var b,c,d,e;const f=null!==(e=null===(c=a.L)||void 0===c?void 0:null===(b=c.Zb)||void 0===b?void 0:b.Hd)&&void 0!==e?e:!1;if(!f)return!1;b=void 0!==a.Eb;c=void 0!==a.Oa;var g;a=null!==(g=null===(d=a.Oa)||void 0===d?void 0:d.ok())&&void 0!==g?g:!1;return f&&b&&c&&a};
rh=async function(a){var b;if(!await ph(a)&&1===(null===(b=a.Eb)||void 0===b?void 0:b.status)){var c,d,e,f;const g=null!==(f=null===(c=a.L.Zb)||void 0===c?void 0:c.mf)&&void 0!==f?f:10;let h=await (null===(d=a.Oa)||void 0===d?void 0:d.uf(g,a.L.dsn));null===(e=a.Oa)||void 0===e?void 0:e.Yf(async()=>{for(var l;h&&0<h.length&&1===(null===(l=a.Eb)||void 0===l?void 0:l.status);){var n,q;for(const v of h){const z=Vg(v);for(const B of z)qh(a,B.severity,B.error,B.params)}await (null===(n=a.W)||void 0===n?
void 0:n.flush());await new Promise(v=>setTimeout(v,1E3));h=await (null===(q=a.Oa)||void 0===q?void 0:q.uf(g,a.L.dsn))}})}};th=async function(a,b){var c;(null===(c=b.Zb)||void 0===c?0:c.Hd)&&__webpack_require__.me(13778).then(()=>__c.sh).then(({Xf:d})=>{var e;a.Oa=new d(a.L.Zb);null===(e=a.Oa)||void 0===e?void 0:e.init().then(()=>{const f=self.requestIdleCallback;oh(a)&&f&&f(()=>{rh(a)})})})};
vh=function(a){return(b,c)=>{b.request&&(b.request=a.pe(b.request));if(uh(a,b))return null;nh(null===c||void 0===c?void 0:c.originalException,(d,e)=>{null==b.tags&&(b.tags={});b.tags[d]=e});try{$g(a.Qe,b)}catch(d){a.F(d)}return a.vd.reduce((d,e)=>e(d,c),b)}};
Gh=function(a,b,c){var d,e,f,g=null===(d=a.W)||void 0===d?void 0:d.getCurrentHub().getClient();d=g&&g.getOptions()||{};var h;g=[new wh,new xh,new yh,new zh(2E3),new Ah(null!==(h=b.sampleRate)&&void 0!==h?h:1),new Bh,new Ch,new Dh(a.allowUrls,location),hh()];a.L.flags&&a.L.flags.Gg&&g.push(new Eh(Fh));a.setTags(a.L.tags);a.setExtras(a.L.extra);if(h="undefined"!==typeof navigator?navigator.userAgent:void 0)h=lh(h),a.setTags(h);b=b.uh;1!==b&&a.setTag("webx",String(3===b));a.setTag("iframe",String("undefined"!==
typeof window&&window.self!==window.top));c.sf&&a.setTag("webview",c.sf);d.beforeSend=vh(a);c=Object.assign({},d,{maxValueLength:1024,dsn:d.dsn||a.L.dsn,environment:d.environment||a.L.environment,release:d.release||a.L.release,tracesSampleRate:0,sampleRate:1,integrations:g,allowUrls:a.allowUrls,autoSessionTracking:!1});Ng(c);null===(e=a.W)||void 0===e?void 0:e.init(c);null===(f=a.W)||void 0===f?void 0:f.configureScope(l=>{l.setUser({id:Sa()});l.setExtra("isAnonymousUser",!0)})};
uh=function(a,b){const c=b.exception&&b.exception.values&&0<b.exception.values.length&&b.exception.values[0],d=c&&c.stacktrace||void 0,e=d&&d.frames&&d.frames[0]&&d.frames[0].filename,f=b.message||c&&c.value||void 0;return a.Md.some(g=>g({message:f,filename:e,location,tags:b.tags}))};Hh=function(a,b){var c,d;b instanceof Error?null===(c=a.W)||void 0===c?void 0:c.captureException(b):null===(d=a.W)||void 0===d?void 0:d.captureMessage(b)};ph=async function(a){try{if(void 0!==a.Oa)return a.Oa.empty()}catch(b){}return!0};
qh=async function(a,b,c,d){null==a.W?(console.error(c),d&&console.log("errorParams",d)):a.W&&a.W.withScope(e=>{"string"===typeof d&&(d={J:d});c=Ih(e,c,"string"===typeof d?d:null===d||void 0===d?void 0:d.J);null!=d&&(d.fingerprint&&e.setFingerprint(d.fingerprint),d.ed&&e.setTag("userFlow",d.ed),d.extra&&d.extra.forEach((f,g)=>e.setExtra(g,f)),d.tags&&d.tags.forEach((f,g)=>e.setTag(g,f)));0<a.componentStack.length&&e.setTag("component",a.componentStack.join("."));e.setLevel(b);Hh(a,c)})};
Jh=async function(a,b,c,d){var e;if(oh(a)&&2===(null===(e=a.Eb)||void 0===e?void 0:e.status))try{var f;a.L.dsn&&(null===(f=a.Oa)||void 0===f?void 0:f.enqueue(b,a.L.dsn,c,d))}catch(g){}else qh(a,b,c,d),oh(a)&&await rh(a)};
Ih=function(a,b,c){if(null==b)return Error((c?c+" ":"")+"[null error thrown]");if("object"===typeof b){const d=b instanceof __c.Kh?new __c.Kh(b.message,b.sampleRate):Error(b.message);b.stack&&(d.stack=b.stack);if(c){if(b.message.startsWith(c))return a.setTag("prefixCollision","true"),b;a=c+" "+(d.message||"[no message on error]");try{d.message=a}catch(e){if(e instanceof TypeError)return Error(a);throw e;}}return d}return b.toString()};
Lh=function(a,b){const c=new Map;for(const [d,e]of a)c.set(d,b(e,d));return c};Zh=function(a){const b=a.statusCode;switch(b){case 400:return new Mh(a);case 401:return new Nh(a);case 403:return new Oh(a);case 404:return new Ph(a);case 409:return new Qh(a);case 418:return new Rh(a);case 429:return new Sh(a);case 500:return new Th(a);case 503:return new Uh(a);case 504:return new Vh(a);default:return 400<=b&&500>b?new Wh(a):500<=b&&600>b?new Xh(a):new Yh(a)}};
$h=function(a){if(!a.startsWith("'\"])}while(1);</x>//"))throw new Th;try{var b=JSON.parse(a.substring(20));if(null==b||"object"!==typeof b)throw new TypeError(`expected an object, found: ${b}`);return b}catch(c){throw new Th(c);}};ai=function(a){let b;try{b=$h(a)}catch(d){return{}}a=b.endUserMessage;const c=b.error;return{endUserMessage:"string"===typeof a?a:void 0,message:"string"===typeof c?c:void 0,body:b}};
ei=async function(a,b,c){const d=c&&c.tracing,e=d&&(c&&c.ec||d.Yc);e&&(c=Object.assign({},c,{tracing:Object.assign({},d,{Yc:`${e}.csrf`}),ec:`${e}.csrf`}));return a.Xc("GET",`${a.Gb}/${bi}/${b}`,{Da:c,mc:ci}).then(f=>di.D(f.body))};
gi=async function(a,b,c,d,e=1){let f=a.Ra.get(b);null==f&&(f=ei(a,b,c),a.Ra.set(b,f));let g;try{g=await f}catch(h){throw a.Ra.get(b)===f&&a.Ra.delete(b),h;}try{if(1===e&&g.Pg<a.Dc.now()+fi)throw new Rh;return await d(g)}catch(h){if(h instanceof Rh)return a.Ra.get(b)===f&&a.Ra.delete(b),gi(a,b,c,d,e+1);throw h;}};
hi=function(a,b,c){const d=c.status,e=c.body;if(200<=d&&300>d)return a.wf(c),{body:$h(e),getResponseHeader:l=>{l=c.getResponseHeader(l);return null!=l?l:void 0}};const {message:f,endUserMessage:g,body:h}=ai(e);a=c.getResponseHeader("x-request-id")||c.getResponseHeader("cf-ray")||void 0;throw Zh({statusCode:d,message:f,requestId:a,requestUrl:b,endUserMessage:g,body:h});};ii=function(a){k(a.startsWith("/")&&1<a.length);return a.split("/")[1]};
ji=async function(a,b,c,d,e,f){return(await a.Xc(b,`${a.Gb}/_ajax${c}`,{headers:null!=f?{"Content-Type":"application/json;charset=UTF-8"}:void 0,Da:d,mc:ci,Oe:e,body:null!=f?JSON.stringify(f):void 0})).body};ki=function(a){try{var b;null===(b=a.observer)||void 0===b?void 0:b.observe({type:a.Rc.type,buffered:a.Rc.buffered})}catch(d){var c;null===(c=a.observer)||void 0===c?void 0:c.observe({entryTypes:[a.Rc.type]})}};
li=function(a){var b,c;return(null===(c=a.PerformanceObserver)||void 0===c?void 0:null===(b=c.supportedEntryTypes)||void 0===b?void 0:b.includes(a.Rc.type||""))||!1};ni=function(a,b,c){if(!li(a))return{count:void 0,duration:void 0};if(null==b||null==c)return{count:0,duration:0};a=mi(a,b,c);return{count:a.length,duration:a.reduce((d,{duration:e})=>d+e,0)}};mi=function(a,b,c){const d=[];for(const e of a.Wb)a=e.startTime+e.duration,a>b&&a<=c&&d.push(e);return d};
oi=function(a,b,c){let d;for(const e of a.Ya){if(e.time>=b&&e.time<=c&&0===e.status)return!1;e.time<=b&&(d=e)}if(null!=d)return 1===d.status;if(a.Sf===a.Ya[0].time)return 1===a.Ya[0].status};pi=__c.pi=function(a){return[["name",a.name],["status",a.status],["instrumentationScope",a.aa],["startTime",a.startTime],["endTime",a.endTime],["duration",a.duration],["parentSpanId",a.parentSpanId]]};qi=function(a){let b,c;a instanceof Map?b=a:a&&(c=a);return{Oc:b,Pc:c}};
ui=function({span:a,j:b,ya:c,performance:d=window.performance,Fi:e=new Map,yj:f="spanStart"}){try{var g,h,l,n;ha(null!=c,"Global trace provider has not been set!");ha(!a.df(),"Span must be ended before a PerformanceContext can be generated");const q=c.Qd("LongTaskService"),v=c.Qd("VisibilityService"),z=a.startTime,B=a.endTime;if(null==z||null==B)return{};let x,A;switch(f){case "navigationStart":x=0;A="navigation_start";break;case "responseStart":x=ri(d);A="response_start";break;case "spanStart":x=
z;A=void 0;break;default:throw new m(f);}if(null==x)return{};const w=si(a,x),F=w(z),ba=w(B),T=new Map([["start",F]]);a.xb.forEach(Rb=>T.set(Rb.name,w(Rb.startTime)));for(const [Rb,Al]of e.entries())T.set(Rb,w(Al));T.set("finish",ba);if(null==q||null==v)return Object.assign({},{jh:T},null===(h=a.Qa)||void 0===h?void 0:null===(g=h.frameRate)||void 0===g?void 0:ti(g));const {count:Aa,duration:pb}=ni(q,x,B),Bl=oi(v,F,ba);return Object.assign({},{jh:T,wj:A,tj:Aa,uj:pb,hk:Bl,resources:void 0},null===(n=
a.Qa)||void 0===n?void 0:null===(l=n.frameRate)||void 0===l?void 0:ti(l))}catch(q){return b.F(q),{}}};si=function(a,b){return c=>{let d=c;a&&(d=Math.max(c-b,0));return Math.round(d)}};ri=function(a=window.performance){if(a.getEntriesByType){const b=a.getEntriesByType("navigation")[0];if(b)return b.responseStart}if(a.timing&&(a=a.timing.responseStart-a.timing.navigationStart,0<=a))return a};
wi=function(a){return function(){for(let b=0;b<2*a;b++)vi[b]=Math.floor(16*Math.random())+48,58<=vi[b]&&(vi[b]+=39);return String.fromCharCode.apply(null,vi.slice(0,2*a))}};xi=function(a){for(const c of a.za.plugins)if(c.isEnabled())try{var b;null===(b=c.Xd)||void 0===b?void 0:b.call(c,a)}catch(d){a.j.F(d,{J:"Plugin.onSpanEnd error",extra:new Map([["plugin",c.name],...pi(a)])})}};
Ai=function(a){var b;null===(b=a.Aa)||void 0===b?void 0:yi(b,a);a.O instanceof zi&&null!=a.O.Aa&&a.O.Aa!==a.Aa&&yi(a.O.Aa,a)};
Ci=function(a,b,c,d){const e=a.Id={bb:a.bb,cb:a.cb};try{var f;a.timeout&&clearTimeout(a.timeout);let g,h,l;b instanceof Map?h=b:null!=b&&(g=b);c instanceof Map?h=c:null!=c&&(l=c);null!=d&&(l=d);a.Kb=!1;null!=g&&a.setStatus(g);h&&a.Xa(h);if(null===(f=a.Qa)||void 0===f?0:f.frameRate){Bi(a.Qa.frameRate);const {Nd:n,Ue:q,hb:v}=ti(a.Qa.frameRate);null!=n&&null!=q&&null!=v&&(a.attrs.set("frame_duration_mean",n),a.attrs.set("frame_duration_standard_deviation",q),a.attrs.set("frame_count",v),a.attrs.set("long_frame_duration",
n+2*q))}a.ended=!0;a.endTime=null!==l&&void 0!==l?l:a.getCurrentTime();a.duration=a.endTime-a.startTime;xi(a);Ai(a);a.za.cc.process(a);a.$b.forEach(n=>n(e));a.Kb=!0;return e}catch(g){return a.j.F(g,{J:"Error ending span",extra:new Map(pi(a))}),e}};
Fi=function({Pa:{performance:a,name:b,type:c,attrs:d,startTime:e,timeout:f},Ha:g,O:h,vg:l,j:n,oh:q}){d=d||new Map;c&&d.set("uop_attr_type",c);d.set("sample_rate_override",1);const v=null===h||void 0===h?void 0:h.Na();if(null!=h&&!h.Na()){const A=h.Ia();A instanceof Di&&(h=A.qa)}d.set("is_uop",!0);const z=h?g.startSpan(b,h,{performance:a,attrs:d,startTime:e,timeout:f}):g.Zc(b,{performance:a,attrs:d,startTime:e,timeout:f});z.setAttribute("user_operation_id",z.context.traceId);ha(z instanceof zi,"User operations can only be created by SpanImpls");
const B=[];l.forEach(A=>{try{const w=A.Gi();B.push(w)}catch(w){n.F(w)}});e=new Map(B.flatMap(A=>[...A.entries()]));const x=new Di(b,c,z,e,n,v,(null===a||void 0===a?0:a.$j)?new Map:void 0);z.Aa=x;x.vc(()=>{z.setAttribute("uop_attr_type",x.type,!0);Ei(z,x.type)});x.Xa(e);x.Xa(d);null===q||void 0===q?void 0:q(z);return x};Gi=function(a){a=null===a||void 0===a?void 0:a.Ia();return a instanceof Di?a:void 0};
yi=function(a,b){a.Fd.delete(b);if(!a.ended){if(a.Fc&&"span"===b.Ba&&!b.aborted){a.Fc.set(`${b.name}_start`,b.startTime);for(var c of b.xb)a.Fc.set(`${b.name}_${c.name}`,c.startTime);null!=b.endTime&&a.Fc.set(`${b.name}_end`,b.endTime)}c="error"===b.status;b=!0===b.attrs.get("timed_out");if(0===a.Fd.size||c||b){a.ended=!0;const e=Hi(a,a.qa);if(null!=e){b&&!a.qa.name.endsWith("timed_out")&&(a.qa.setAttribute("timed_out",!0,!0),a.qa.name+=".timed_out");var d=a.Jd=a.qa.end(c?"error":"ok",e.endTime);
a.$b.forEach(f=>f(d))}else a.qa.abort(),a.Vd.forEach(f=>f())}}};Hi=function(a,b){if(!b.aborted){var c=null!=b.endTime?b:void 0;for(const d of b.yb)b=Hi(a,d),null!=b&&(null==c||b.endTime>c.endTime)&&(c=b);return c}};Ei=function(a,b){if(b){for(const c of a.xb)c.setAttribute("uop_attr_type",b,!0);for(const c of a.yb)!0!==c.attrs.get("is_uop")&&(c.setAttribute("uop_attr_type",b,!0),Ei(c,b))}};Ii=function(a){if(a){var b=null===a||void 0===a?void 0:a.Ia();return b instanceof Di?b.fc:a.Na()}};
ti=function(a){return{hb:a.ob.count,Nd:0<a.ob.count?a.ob.ih:void 0,Ue:0<a.ob.count?a.ob.yh:void 0}};Bi=function(a){a.pd&&a.je.cancelAnimationFrame(a.pd);a.document.removeEventListener("visibilitychange",a.ac);a=ti(a);var b=Ji;const c=a.hb*a.Nd,d=a.Nd+2*a.Ue;0<c&&(b.hb+=a.hb,b.jf.add(d,c));for(const e of b.bf)e(a)};
Qi=function(a=new Ki({}),b){try{if("undefined"===typeof window)return new Li;const f=Mi(a,b);try{if("NOOP"!==a.M&&a.Jg){if(a.Ig){var c=new Ni(b);f.wc(c);var d=new Oi(b);f.wc(d)}var e=new Pi(b);f.wc(e)}}catch(g){b.F(g)}return f}catch(f){return b.F(f),new Li}};Mi=function(a=new Ki({}),b){if("NOOP"===a.M)return{jb:(new Li).jb,We:(new Li).jb,Ff:()=>{},Kf:()=>{},Lf:()=>{},wc:()=>{},Qd:()=>{}};a=Ri(a,b);return new Si(a,b)};
Ri=function(a,b){let c,d;if("HTTP"===a.M){c=new Ti(a.ei,b);var e,f,g,h;d=new Map([["telemetry_version","v2"],["app.component",a.app],["service.name",a.app],["app.release",null!==(e=a.release)&&void 0!==e?e:""],["app.source",null!==(f=a.source)&&void 0!==f?f:"web"],["app.flavor",null!==(g=a.Vg)&&void 0!==g?g:""],["app.build.variant",null!==(h=a.variant)&&void 0!==h?h:"baseline"],["session_id",Sa()],["ctx.user",a.fd],["ctx.anonymous_user",a.Ge],["x-canva-tenant","canva-app"],["device.platform",a.platform]])}else c=
new Ui,d=new Map([["telemetry_version","v2"],["app.component",a.app],["service.name",a.app],["app.source","web"],["session_id",Sa()],["ctx.user",a.fd],["ctx.anonymous_user",a.Ge],["x-canva-tenant","canva-app"]]);const l={L:a,j:b};a=__webpack_require__.me(143286).then(()=>__c.Vi).then(({dh:n})=>n(l));b=new Wi(a,b);return{Af:c,cc:b,Y:d}};
bj=async function({ud:a,dj:b}){a:{var c=a.j;switch(c.M){case "CONSOLE":b=new Xi;break a;case "SENTRY":c=new Yi(c);c.Gf([Zi]);if(b)for(var d of b)c.setTag(...d);b=c;break a;default:throw new m(c);}}d=Qi(a.ai,b);switch(a.mode){case "REAL":return c=new $i(a.Ye,void 0,new aj),{j:b,Ye:c,mode:a.mode,ad:d};case "FAKE":return{j:b,mode:a.mode,Xj:Lg(a.$h),ad:d};default:throw new m(a);}};Zi=function(a){return a.tags&&a.tags.app_approval_status?"RELEASED"!==a.tags.app_approval_status:!1};
cj=function(a,b){return`third_party_app.${a.toLowerCase().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"*")}_${b}`};
lj=async function({j:a,ad:b,bc:c,Lh:d}){var e=cj(c.appName,c.appId);b=b.jb(e);a.setTag("app_tracer_name",e);e=await Xf(a);if(!e.ok)throw a.Ob(e.error,{J:"Could not init sandbox comms"}),d.Ia().ra("init_comms_failed"),Error("Could not init sandbox comms");d.Ia().ra("init_comms_completed");e=e.value;const f=new Hf(e);let g="object_panel";try{g=(await Gf(e)).getInfo().surface}catch(n){a.info("Failed to retrieve the current surface, fallback to object panel")}let h;try{const n=()=>{};await Ig({window,
Jc:f,j:a,Ha:b,appId:c.appId,appName:c.appName,Za:c.Za,Lb:c.Lb,Sb:c.Sb});const q=new dj(f,a),v=await Jf(e,q,a);h={canva:Object.assign({},{authentication:new ej(e,q,a)},{CanvaError:I},Te(e,q,a),{content:new fj(e,q,a)},{fetch:{get:n,post:n}},{interactiveElement:new gj(e,q)},v,rb(e,q,a),{generation:new hj(e,a)}),__canva__:Object.assign({},{uiKit:new ij(e,a)},Lf(e,c.Zg,c.appId,a),{context:{locale:c.locale,country:c.country}})};Jg(h)}catch(n){throw a.Ob(n,{J:"failed to initialise sdk"}),console.error("failed to initialise sdk"),
d.Ia().ra("init_sdk_failed"),n;}d.Ia().ra("init_sdk_completed");lg();jj(g);c.Ve&&ug({window,bc:c});let l;try{l=(await h.__canva__.uiKit.getUiContext()).theme}catch(n){}null!==l&&void 0!==l?l:l="dark";try{await kj(a,c.eg,c.Za,l)}catch(n){throw d.Ia().ra("bootstrap_app_failed"),n;}d.Ia().ra("bootstrap_app_completed")};
jj=function(a){const b=Wa(document.getElementById("root"),"INTERNAL_ERROR","Page 'root' div is missing");b.style.margin="0px";b.style.height="100%";b.style.backgroundColor="transparent";switch(a){case "selected_image_overlay":b.style.paddingLeft="0";document.body.style.backgroundColor="transparent";document.documentElement.style.backgroundColor="transparent";b.style.overflow="hidden";break;case "object_panel":case "photo_editing_panel":b.style.paddingLeft="16px";b.style.overflow="auto";break;default:throw new m(a);
}};
kj=function(a,b,c,d){const {origin:e}=new URL(b);return new Promise((f,g)=>{tg({src:b,onerror:()=>{5===c?a.error(`Unable to load script from: '${b}',`,{J:"Could not load app JS script"}):console.error(`Unable to load script from: '${b}',`);const h=document.createElement("p");h.id="errorMessageBox";h.style.color="light"===d?"black":"white";h.style.fontFamily='"Canva Sans", Helvetica, sans-serif';h.style.fontSize="14px";h.style.whiteSpace="break-spaces";if(1===c){var l=[b],n=pg();var q={};for(let v=0;v<
l.length;++v)q[v]=l[v];if(l=mj.get("v/GPpw"))q=l.format(q),q=rg?"\u2062"+q+og("v/GPpw"):q;else{l=(l=qg[n])&&l["v/GPpw"];null==l&&(l=void 0);if(null==l)throw Error(`Could not find string for ${n} ${"v/GPpw"}`);switch(n){case "en-psaccent":n="en";break;case "ar":case "ar-AE":case "ar-EG":case "ar-SA":case "fa-IR":case "he-IL":case "pa-PK":case "ur-PK":case "ckb-IQ":case "ug-CN":n=`${n}-u-nu-latn`}try{nj.resolveLocale(n)}catch(v){n=nj.defaultLocale}n=new nj(l,n,oj,{ignoreTag:!0});mj.set("v/GPpw",n);
q=n.format(q);q=rg?"\u2062"+q+og("v/GPpw"):q}}else q=sg("taqVJQ");h.textContent=q;document.body.appendChild(h);g()},onload:()=>{var h;null===(h=document.getElementById("errorMessageBox"))||void 0===h?void 0:h.remove();f()},Fg:0<=pj.indexOf(e)})})};da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};ca=aa(this);
ea("Object.fromEntries",function(a){return a?a:function(b){var c={};if(!(Symbol.iterator in b))throw new TypeError(""+b+" is not iterable");b=b[Symbol.iterator].call(b);for(var d=b.next();!d.done;d=b.next()){d=d.value;if(Object(d)!==d)throw new TypeError("iterable for fromEntries should yield objects");c[d[0]]=d[1]}return c}});
ea("Array.prototype.flatMap",function(a){return a?a:function(b,c){var d=[];Array.prototype.forEach.call(this,function(e,f){e=b.call(c,e,f,this);Array.isArray(e)?d.push.apply(d,e):d.push(e)});return d}});ea("Promise.prototype.finally",function(a){return a?a:function(b){return this.then(function(c){return Promise.resolve(b()).then(function(){return c})},function(c){return Promise.resolve(b()).then(function(){throw c;})})}});ea("globalThis",function(a){return a||ca});__webpack_require__(427164);__webpack_require__(699131);var qj=__webpack_require__(785893).jsx;var rj=__webpack_require__(667294),sj=rj.useState,tj=rj.useContext,mg=rj.useMemo,uj=rj.createContext;var vj=__webpack_require__(168949),dg=vj.aD,wj=vj.LO,xj=vj.Fl,bg=vj.rC,fg=vj.pu;var yj=__webpack_require__(129323).Pi;var zj=__webpack_require__(735129).Z;var Aj=__webpack_require__(832333).en;var Bj=__webpack_require__(189525).en;var Cj=__webpack_require__(544339).en;var xh=__webpack_require__(812699).S;var yh=__webpack_require__(353610).I;var Dj=__webpack_require__,Ej=Dj(294184),Fj=Dj.n_x(Ej)();var nj=__webpack_require__(821697).ZP;var fh=__webpack_require__(464517).m;Intl&&!Intl.PluralRules&&(Intl.PluralRules=zj(Intl.NumberFormat,()=>Aj,(a,b)=>Bj[b?"ordinal":"cardinal"],()=>Cj));__webpack_require__.p=self.__canva_public_path__;m=__c.m=class extends Error{constructor(a){super(`unhandled case: ${JSON.stringify(a)}`)}};var Gj=class{constructor(a){this.type=a}};var Hj=class extends Gj{required(a,b){b=b[a];if(null==b||typeof b!==this.type)throw new TypeError(`expected ${this.type} for property "${a}", found: ${JSON.stringify(b)}`);return b}optional(a,b){b=b[a];if(null!=b){if(typeof b!==this.type)throw new TypeError(`expected optional ${this.type} for property "${a}", found: ${JSON.stringify(b)}`);return b}}},pa=new Hj("object");var na={},ja={},la="undefined"!==typeof window&&window.location?ra():{},ta=new Map([["",!0],["true",!0],["false",!1]]),ua=new Map([["",void 0],["null",null],["undefined",void 0]]),sa=/^str\((.*)\)$/;var va=class{get ok(){return!0}map(a){return new va(a(this.value))}constructor(a){this.value=a}},xa=class{get ok(){return!1}map(){return this}constructor(a){this.error=a}},Ba=wa,Ca=ya;var Ga,Ij,Jj,Kj,Lj,Mj,Q,Oj,R,Pj,Qj,V,W,Sj,Tj;Ga={G:"string"};Ij={G:"boolean",defaultValue:!1,Ug:1};Jj={G:"number",defaultValue:0,Ug:8};Kj={G:"number",defaultValue:0};Lj={G:"number",defaultValue:0};Mj=a=>{const {tag:b,H:c,ba:d}=p(a);return Ea(Jj,c,b,d)};Q=a=>{const {tag:b,H:c,ba:d}=p(a);return Ea(Kj,c,b,d)};__c.Nj=a=>{const {tag:b,H:c,ba:d}=p(a);return Ea(Lj,c,b,d)};Oj=a=>{const {tag:b,H:c}=p(a);return Fa(Jj,c,b)};R=a=>{const {tag:b,H:c}=p(a);return Fa(Kj,c,b)};
Pj=a=>{const {tag:b,H:c}=p(a);return Fa(Lj,c,b)};Qj=a=>{const {tag:b,H:c}=p(a);return{tag:b,U:4,H:c,G:Kj.G}};S=__c.S=(a,b)=>{const {tag:c,H:d,ba:e}=p(a,b);return Ea(Ga,d,c,e)};U=__c.U=a=>{const {tag:b,H:c}=p(a);return Fa(Ga,c,b)};Rj=__c.Rj=a=>{const {tag:b,H:c}=p(a);return{tag:b,U:4,H:c,G:Ga.G}};V=a=>{const {tag:b,H:c,ba:d}=p(a);return Ea(Ij,c,b,d)};W=a=>{const {tag:b,H:c}=p(a);return Fa(Ij,c,b)};Sj=Ha(Ga);Tj=Ha("object");var Uj=E(()=>Object.assign({},{},{M:r(2,"CONSOLE")}));var Vj=H(()=>[1,2,3],1);__c.Sg=E(()=>({name:S(1),value:S(2)}));var Wj=E(()=>({Gg:W(1)}));var Xj=E(()=>({Hd:W(1),kf:R(2),lf:R(3),mf:R(4)}));__c.Ug=E(()=>Object.assign({},{},{type:r(1,"STRING"),value:S(1)}));__c.Yj=E(()=>Object.assign({},{},{type:r(2,"BOOL"),value:V(1)}));__c.Zj=E(()=>Object.assign({},{},{type:r(3,"INT"),value:Q(1)}));__c.ak=E(()=>Object.assign({},{},{type:r(4,"DOUBLE"),value:Mj(1)}));__c.Og=E(()=>Object.assign({},{},{type:r(5,"ARRAY"),values:y(1,bk)}));__c.Qg=E(()=>Object.assign({},{},{type:r(6,"KVLIST"),values:y(1,__c.Tg)}));var bk=G(()=>({type:[1,__c.Ug,2,__c.Yj,3,__c.Zj,4,__c.ak,5,__c.Og,6,__c.Qg]}),()=>({}));__c.Tg=E(()=>({name:S(1),value:t(2,bk)}));var ck=E(()=>Object.assign({},{},{M:r(3,"SENTRY"),dsn:U(28),environment:U(30),release:U(34),sampleRate:Oj(29),tracesSampleRate:Oj(31),Vi:W(32),uh:Ia(33,Vj),tags:y(35,__c.Sg),flags:u(36,Wj),Zb:u(37,Xj),extra:y(38,__c.Tg)}));var dk=G(()=>({M:[2,Uj,3,ck]}),()=>({}));var ek=H(()=>[0,"CLIENT_FULL",1,"CLIENT_HYDRATE",2,"SERVER_FULL"]);var fk=H(()=>[1,3,2],1);var gk=E(()=>Object.assign({},{},{action:r(1,"REGISTER"),Qj:S(1),scope:S(2)}));var hk=E(()=>Object.assign({},{},{action:r(2,"UNREGISTER")}));var ik=E(()=>Object.assign({},{},{action:r(3,"UPDATE")}));var jk=E(()=>Object.assign({},{},{action:r(4,"RETAIN")}));var kk=G(()=>({action:[1,gk,2,hk,3,ik,4,jk]}),()=>({}));var lk=E(()=>({qk:S(1)}));var mk=H(()=>[1,2]);var nk=H(()=>[1,2,3,4]);var ok=E(()=>({category:C(1,nk),name:S(2)}));var pk=E(()=>({Uj:V(12),dk:V(13),Bi:V(1),Li:V(2),Qi:V(7),Xi:V(14),Di:S(3),vj:S(9),Hj:S(10),Kj:y(5,ok),Fj:U(6)}));var qk=E(()=>({enable:W(1),Lj:R(2),Ki:R(3),hj:R(4)}));var rk=()=>({Jg:W(5),Nc:R(6),Mc:R(7),Qg:R(8),Ig:W(9),Oj:Oj(10),ei:Oj(11),Zb:u(12,qk),source:U(13),fd:U(14),Ge:U(15),Sg:W(16)});var sk=E(()=>Object.assign({},rk(),{M:r(1,"HTTP"),app:S(27),endpoint:S(28),release:U(29),Vg:U(31),Yi:W(32),Zi:W(33),platform:U(35),variant:U(36)}));var tk=E(()=>Object.assign({},rk(),{M:r(2,"CONSOLE"),app:S(27)}));var Ki=E(()=>Object.assign({},rk(),{M:r(3,"NOOP")}));var uk=G(()=>({M:[1,sk,2,tk,3,Ki]}),rk);var vk=E(()=>({traceId:S(1),spanId:S(2),Ae:Q(3)}));var wk=E(()=>({href:S(1),Wj:U(3)}));var xk=()=>({Kh:V(12),Hg:V(14),commit:S(5),timestamp:Pj(11),j:t(6,dk),Mj:C(7,ek),Pj:C(9,fk),Tj:u(15,kk),pk:u(4,lk),zj:U(13),rj:Ia(17,mk),bk:u(18,pk),Ti:V(19),Ui:V(23),ai:u(20,uk),Ej:u(24,vk),Gj:y(21,wk),ek:Rj(22),$i:V(33),Ai:U(34)});var di=E(()=>({token:S(1),Pg:__c.Nj(2)}));var yk=E(()=>({xc:U(1),qd:U(9),ub:U(2),wb:U(3),jd:U(12),zc:U(4),Lc:U(10),app:U(11),Ac:U(5),Bc:U(6),Gb:U(7),Ra:Tj(8,di)}));var zk=E(()=>({xc:U(1),ub:U(2),wb:U(3),jd:U(9),zc:U(4),Lc:U(5),app:U(6),Ac:U(7),Bc:U(8)}));var Ak=E(()=>({url:S(1),context:u(2,zk)}));var Bk=E(()=>({Og:S(27)}));var Ck=E(()=>({Og:S(27),Ei:U(28),locale:S(29),Ci:R(30),xi:U(31),Cj:U(37),fd:U(34),fj:U(32),ij:U(33),deviceId:U(35)}));var Dk=()=>({fk:u(3,Bk),ej:t(4,Ck),gj:Sj(5),appName:U(9),qj:Qj(16),Zj:Qj(17),Oi:V(18)});var Ek=E(()=>Object.assign({},Dk(),{M:r(2,"CONSOLE")}));var Fk=E(()=>Object.assign({},Dk(),{M:r(8,"NOOP")}));var Gk=E(()=>({containerId:S(1)}));var Hk=E(()=>({mi:S(1),projectId:S(2)}));var Ik=E(()=>({ag:S(1)}));var Jk=E(()=>({}));var Kk=E(()=>({pj:u(2,Gk),Aj:u(4,Hk),ri:u(6,Ik),oj:u(7,Jk)}));var Lk=E(()=>Object.assign({},Dk(),{M:r(14,"PRODUCT_ANALYTICS"),plugins:u(32,Kk),lk:R(36),aj:V(37),nk:V(40),Wi:V(45)}));var Mk=G(()=>({M:[2,Ek,8,Fk,14,Lk]}),Dk);var Nk=E(()=>Object.assign({},{},{M:r(1,"NONE")}));var Ok=E(()=>Object.assign({},{},{M:r(2,"FULLSTORY"),Bj:S(28)}));var Pk=G(()=>({M:[1,Nk,2,Ok]}),()=>({}));var Qk=E(()=>({fd:U(1),ag:S(2)}));var Rk=E(()=>({url:S(1),oi:U(2),ck:V(3),ik:U(4)}));var Sk=E(()=>Object.assign({},xk(),{mode:r(2,"REAL"),Ye:t(27,yk),jk:t(30,Ak),ni:t(28,Mk),sj:u(29,Pk),zi:u(32,Qk),Rj:u(31,Rk)}));var Tk=E(()=>Object.assign({},xk(),{mode:r(3,"FAKE"),$h:Q(27),hostname:U(28)}));var Uk=G(()=>({mode:[2,Sk,3,Tk]}),xk);"internal comment";var I=class extends Error{constructor(a){const b=a.message.endsWith(".")?"":".";super(`[${a.code}]:  ${a.message}${b}`.trim());this.name="CanvaError";this.rawMessage=a.message;this.code=a.code;Object.setPrototypeOf(this,I.prototype)}};var J=class extends I{};var X=({ea:a,client:b,method:c})=>({level:"log",data:{app_api_namespace:a,app_api_client:b,app_api_method:c}});var Vk=E(()=>Object.assign({},{},{type:r(1,"IMAGE"),id:S(1),parentRef:U(7),url:S(2),mimeType:S(3),thumbnailUrl:S(4),width:R(5),height:R(6),uploadedToastVisibility:U(8)}));var Wk=E(()=>Object.assign({},{},{type:r(2,"VIDEO"),id:S(1),parentRef:U(8),url:S(2),mimeType:S(3),thumbnailImageUrl:S(4),thumbnailVideoUrl:U(5),width:R(6),height:R(7),uploadedToastVisibility:U(9)}));var Xk=E(()=>Object.assign({},{},{type:r(3,"AUDIO"),id:S(1),url:S(2),mimeType:S(3),title:S(4),durationMs:Q(5),uploadedToastVisibility:U(6)}));var Yk=G(()=>({type:[1,Vk,2,Wk,3,Xk]}),()=>({}));var Zk=E(()=>Object.assign({},{},{type:r(1,"DONE"),ref:S(1),X:V(2)}));var $k=E(()=>Object.assign({},{},{type:r(2,"FAILED"),Ua:S(1)}));var al=G(()=>({type:[1,Zk,2,$k]}),()=>({}));var bl=E(()=>Object.assign({},{},{type:r(1,"IMAGE"),ref:S(1)}));var cl=E(()=>Object.assign({},{},{type:r(2,"VIDEO"),ref:S(1)}));var dl=E(()=>Object.assign({},{},{type:r(3,"AUDIO"),ref:S(1)}));var Xa=G(()=>({type:[1,bl,2,cl,3,dl]}),()=>({}));var el=E(()=>Object.assign({},{},{type:r(1,"DONE")}));var fl=E(()=>Object.assign({},{},{type:r(2,"FAILED"),Ua:S(1)}));var Ya=G(()=>({type:[1,el,2,fl]}),()=>({}));var gl=E(()=>Object.assign({},{},{type:r(1,"IMAGE"),ref:S(1)}));var hl=E(()=>Object.assign({},{},{type:r(2,"VIDEO"),ref:S(1)}));var il=G(()=>({type:[1,gl,2,hl]}),()=>({}));var jl=E(()=>Object.assign({},{},{type:r(1,"IMAGE"),ref:S(1),url:S(2)}));var kl=E(()=>Object.assign({},{},{type:r(2,"VIDEO"),ref:S(1),url:S(2)}));var ll=G(()=>({type:[1,jl,2,kl]}),()=>({}));var ml=E(()=>({x:Q(1),y:Q(2),height:Q(3),width:Q(4)}));var nl=H(()=>[1]);var ol=E(()=>{const {tag:a,H:b,ba:c}=p(2,nl);return{anchor:t(1,ml),scopes:{tag:a,U:4,H:b,N:c,G:"string"}}});var $a=E(()=>({}));var pl=E(()=>({fontRefs:Rj(1)}));var ql=E(()=>({weight:S(1),styles:Rj(2)}));var rl=E(()=>({ref:S(1),name:S(2),weights:y(3,ql),previewUrl:U(4)}));var sl=E(()=>({fonts:y(1,rl)}));var tl=E(()=>({selectedFontRef:U(1)}));var ul=E(()=>Object.assign({},{},{type:r(1,"COMPLETED"),font:t(1,rl)}));var vl=E(()=>Object.assign({},{},{type:r(2,"ABORTED")}));var wl=G(()=>({type:[1,ul,2,vl]}),()=>({}));var xl=E(()=>Object.assign({},{},{type:r(1,"SOLID"),hexString:S(1)}));var yl=E(()=>Object.assign({},{},{re:r(1,"SOLID"),selection:t(1,xl)}));var bb=G(()=>({re:[1,yl]}),()=>({}));var zl=class{async queueMediaUpload(a){a=Yk.C(a);a=await this.A.request("CONTENT_V1_QUEUE_MEDIA_UPLOAD",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"CONTENT_V1_QUEUE_MEDIA_UPLOAD: Response cannot be empty"});return al.D(a.value)}async getTemporaryUrl(a){a=il.C(a);a=await this.A.request("CONTENT_V1_GET_TEMPORARY_URL",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"CONTENT_V1_GET_TEMPORARY_URL: Response cannot be empty"});
return ll.D(a.value)}async openColorSelector(a){a=ol.C(a);a=await this.A.request("CONTENT_V1_OPEN_COLOR_SELECTOR",a);if(!a.ok)throw a.error;}async findFonts(a){a=pl.C(a);a=await this.A.request("CONTENT_V1_FIND_FONTS",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"CONTENT_V1_FIND_FONTS: Response cannot be empty"});return sl.D(a.value)}async requestFontSelection(a){a=tl.C(a);a=await this.A.request("CONTENT_V1_REQUEST_FONT_SELECTION",a);if(!a.ok)throw a.error;
if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"CONTENT_V1_REQUEST_FONT_SELECTION: Response cannot be empty"});return wl.D(a.value)}constructor(a){this.A=a}};var Cl=a=>{const b=a.type;switch(b){case "IMAGE":return new Vk(a);case "VIDEO":return new Wk(a);case "AUDIO":return new Xk(a);default:throw new J({code:"BAD_REQUEST",message:`Unexpected upload options type '${b}'.`});}},Dl=a=>{const b=a.type;switch(b){case "IMAGE":return new bl(Object.assign({},a));case "VIDEO":return new cl(Object.assign({},a));case "AUDIO":return new dl(Object.assign({},a));default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected options type '${b}'.`});}},El=a=>{const b=
a.type;switch(b){case "DONE":return{type:"done"};case "FAILED":return{type:"failed",reason:{type:a.Ua}};default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected result type '${b}'.`});}},Fl=a=>a.map(b=>{switch(b){case "solid":return 1;default:throw new J({code:"INTERNAL_ERROR",message:`Invalid scope ${b}`});}}),Gl=({anchor:a,scopes:b})=>({anchor:{height:a.height,width:a.width,x:a.left,y:a.top},scopes:Fl(b)}),Hl=a=>a.map(b=>{switch(b){case "normal":case "italic":return b;default:throw new J({code:"BAD_REQUEST",
message:`Unknown font style ${b}`});}}),Il=a=>{const b=a.weight;switch(b){case "normal":case "thin":case "extralight":case "light":case "medium":case "semibold":case "bold":case "ultrabold":case "heavy":return{weight:a.weight,styles:Hl(a.styles)};default:throw new J({code:"BAD_REQUEST",message:`Unknown font weight ${b}`});}},Jl=a=>Object.assign({},a,{weights:a.weights.map(Il),ref:a.ref}),db=a=>{switch(a){case "invalid_dimensions":return new I({code:"BAD_REQUEST",message:"Invalid asset dimensions received."});
case "invalid_id":return new I({code:"BAD_REQUEST",message:"Invalid asset ID received."});case "invalid_parent_ref":return new I({code:"BAD_REQUEST",message:"Invalid reference to parent asset received."});case "invalid_duration":return new I({code:"BAD_REQUEST",message:"Invalid asset duration received."});case "invalid_media_type":return new I({code:"BAD_REQUEST",message:"Invalid asset type received."});case "invalid_options":return new I({code:"BAD_REQUEST",message:"Invalid upload options received."});
case "invalid_thumbnail_url":return new I({code:"BAD_REQUEST",message:"Invalid asset thumbnail URL received."});case "invalid_title":return new I({code:"BAD_REQUEST",message:"Invalid asset title received."});case "invalid_url":return new I({code:"BAD_REQUEST",message:"Invalid asset URL received."});case "mismatched_mime_type":return new I({code:"BAD_REQUEST",message:"Mime type mismatch between supplied and asset mime-types."});case "unsupported_mime_type":return new I({code:"BAD_REQUEST",message:"Unsupported asset mime-type."});
case "offline":return new I({code:"USER_OFFLINE",message:"Could not carry out the request due to the user being offline."});case "quota_exceeded":return new I({code:"QUOTA_EXCEEDED",message:"Unable to upload asset due to user having exceeded their uploads quota."});case "timeout":return new I({code:"TIMEOUT",message:"Upload operation timed-out. Please try again later."});case "unavailable_thumbnail":return new I({code:"NOT_FOUND",message:"Asset thumbnail was unavailable at provided URL."});case "unavailable_media":return new I({code:"NOT_FOUND",
message:"Asset was unavailable at provided URL."});case "unknown":return new I({code:"INTERNAL_ERROR",message:"Something unexpected went wrong."});case "oversized_media":return new I({code:"BAD_EXTERNAL_SERVICE_RESPONSE",message:"Asset upload failed due to it exceeding the maximum supported file size of 25 MBs. "});case "oversized_media_dimensions":return new I({code:"BAD_EXTERNAL_SERVICE_RESPONSE",message:"Asset upload failed due to it exceeding the 250 megapixels limit."});default:throw new J({code:"INTERNAL_ERROR",
message:`Unexpected failure reason type '${a}'.`});}};var Kl=["IMAGE","VIDEO","AUDIO"],Ll=["IMAGE","VIDEO"],Ml=["solid"],ib=/^Y[A-Za-z0-9_-]{10}:[0-9]+$/,Rl=a=>{if(!Nl(a))return{type:"invalid_options"};if(!K(a.type)||!Kl.includes(a.type))return{type:"invalid_media_type"};if(null!=a.uploadedToastVisibility&&!K(a.uploadedToastVisibility))return{type:"invalid_options"};const b=a.type;switch(b){case "IMAGE":return Ol(a);case "VIDEO":return Pl(a);case "AUDIO":return Ql(a);default:return new m(b),{type:"invalid_media_type"}}},Ol=a=>{if(!K(a.id))return{type:"invalid_id"};
if(a.parentRef&&!K(a.parentRef))return{type:"invalid_parent_ref"};if(!K(a.url))return{type:"invalid_url"};if(!K(a.mimeType))return{type:"unsupported_mime_type"};if(!K(a.thumbnailUrl))return{type:"invalid_thumbnail_url"};if(!Sl(a))return{type:"invalid_dimensions"}},Pl=a=>{if(!K(a.id))return{type:"invalid_id"};if(a.parentRef&&!K(a.parentRef))return{type:"invalid_parent_ref"};if(!K(a.url))return{type:"invalid_url"};if(!K(a.mimeType))return{type:"unsupported_mime_type"};if(!K(a.thumbnailImageUrl)||null!=
a.thumbnailVideoUrl&&!K(a.thumbnailVideoUrl))return{type:"invalid_thumbnail_url"};if(!Sl(a))return{type:"invalid_dimensions"}},Ql=a=>{if(!K(a.id))return{type:"invalid_id"};if(!K(a.url))return{type:"invalid_url"};if(!K(a.mimeType))return{type:"unsupported_mime_type"};if(!K(a.title))return{type:"invalid_title"};var b;(b=!Tl(a.durationMs))||(a=a.durationMs,b=!(Number.isSafeInteger(a)&&0<a));if(b)return{type:"invalid_duration"}},Ul=a=>{if(!Nl(a))throw new I({code:"BAD_REQUEST",message:"Anchor must be an object and cannot be undefined."});
if(!(Tl(a.height)&&Tl(a.width)&&Tl(a.top)&&Tl(a.left)))throw new I({code:"BAD_REQUEST",message:"Anchor values must be numbers."});},Vl=a=>{if(!Nl(a))throw new I({code:"BAD_REQUEST",message:"Open color selector options must be an object and cannot be undefined."});if(!Array.isArray(a.scopes))throw new I({code:"BAD_REQUEST",message:`Invalid scopes. Expected "array" received "${a.scopes}".`});for(const b of a.scopes){if(!K(b))throw new I({code:"BAD_REQUEST",message:`Invalid scope. Expected "string" received "${b}".`});
if(!Ml.includes(b))throw new I({code:"BAD_REQUEST",message:`Invalid scope. Expected one of ${Ml} received "${b}".`});}},Nl=a=>"object"===typeof a&&null!=a,K=a=>"string"===typeof a,Tl=a=>"number"===typeof a&&Number.isFinite(a),Sl=({width:a,height:b})=>"number"===typeof a&&"number"===typeof b||null==a&&null==b;var fj=class{async queueMediaUpload(a){this.B("queueMediaUpload");Of(this.T,{Qb:"method",Rb:"queueMediaUpload",Yb:"upload"});try{const b=Rl(a);if(null!=b){const d=a.type;switch(d){case "IMAGE":return{type:"failed",reason:b};case "VIDEO":return{type:"failed",reason:b};case "AUDIO":return{type:"failed",reason:b};default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected request type '${d}'.`});}}const c=await this.l.queueMediaUpload(Cl(a));return fb({type:a.type,result:c,eb:this.Dd})}catch(b){if(b instanceof
I)throw b;throw new I({code:"INTERNAL_ERROR",message:`
      Something unexpected happened while trying to find or import media.

      Error Details: ${b instanceof Error?b.message:b}

      Please check that:

      1. You are connected to the internet.
      2. You are using the recent version of the Canva mobile app, if you're on a Canva mobile app.
      3. The media MIME type is supported.
      4. The MIME type you've provided matches the media MIME type.
      5. The media you're trying to import is available at the specified URL and does not require cookies or the basic HTTP authentication to access it.

      If you have tried all the above and it has not helped, please report your issue to Canva.
`});}}async getTemporaryUrl(a){this.B("getTemporaryUrl");try{if(!(Nl(a)&&K(a.type)&&Ll.includes(a.type)&&K(a.ref)))throw new I({code:"BAD_REQUEST",message:"Malformed request"});const c=await this.l.getTemporaryUrl(a);a:{const d=c.type;switch(d){case "IMAGE":var b={type:"IMAGE",ref:c.ref,url:c.url};break a;case "VIDEO":b={type:"VIDEO",ref:c.ref,url:c.url};break a;default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected result type '${d}'.`});}}return b}catch(c){if(c instanceof I)throw new I({code:c.code,
message:`Encountered an error while trying to get a temporary URL: ${c.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`Encountered an error while trying to get a temporary URL: ${c instanceof Error?c.message:c}`});}}async upload(a){this.B("upload");a:{if(!Nl(a))throw new I({code:"BAD_REQUEST",message:"Upload options must be an object and cannot be undefined."});if(!K(a.type))throw new I({code:"BAD_REQUEST",message:`Invalid upload type. Expected "string" received "${typeof a.type}".`});
if(null!=a.uploadedToastVisibility&&!K(a.uploadedToastVisibility))throw new I({code:"BAD_REQUEST",message:`Invalid uploaded toast visibility. Expected "string" or "undefined" received "${typeof a.type}".`});var b=a.type;switch(b){case "IMAGE":if(null!=a.id&&!K(a.id))throw new I({code:"BAD_REQUEST",message:`Invalid image 'id'. Expected "string" received "${typeof a.id}".`});if(a.parentRef&&!K(a.parentRef))throw new I({code:"BAD_REQUEST",message:`Invalid image 'parentRef'. Expected "string" received "${typeof a.parentRef}".`});
if(!K(a.url))throw new I({code:"BAD_REQUEST",message:`Invalid image 'url'. Expected "string" received "${typeof a.url}".`});if(!K(a.mimeType))throw new I({code:"BAD_REQUEST",message:`Invalid image 'mimeType'. Expected "string" received "${typeof a.mimeType}".`});if(!K(a.thumbnailUrl))throw new I({code:"BAD_REQUEST",message:`Invalid image 'thumbnailUrl'. Expected "string" received "${typeof a.thumbnailUrl}".`});if(!Sl(a))throw new I({code:"BAD_REQUEST",message:"Invalid image 'dimensions'."});break a;
case "VIDEO":if(null!=a.id&&!K(a.id))throw new I({code:"BAD_REQUEST",message:`Invalid video 'id'. Expected "string" received "${typeof a.id}".`});if(a.parentRef&&!K(a.parentRef))throw new I({code:"BAD_REQUEST",message:`Invalid video 'parentRef'. Expected "string" received "${typeof a.parentRef}".`});if(!K(a.url))throw new I({code:"BAD_REQUEST",message:`Invalid video 'url'. Expected "string" received "${typeof a.url}".`});if(!K(a.mimeType))throw new I({code:"BAD_REQUEST",message:`Invalid video 'mimeType'. Expected "string" received "${typeof a.mimeType}".`});
if(!K(a.thumbnailImageUrl))throw new I({code:"BAD_REQUEST",message:`Invalid video 'thumbnailImageUrl'. Expected "string" received "${typeof a.thumbnailImageUrl}".`});if(null!=a.thumbnailVideoUrl&&!K(a.thumbnailVideoUrl))throw new I({code:"BAD_REQUEST",message:`Invalid video 'thumbnailVideoUrl'. Expected "string" or "undefined" received "${typeof a.thumbnailVideoUrl}".`});if(!Sl(a))throw new I({code:"BAD_REQUEST",message:"Invalid video 'dimensions'."});break a;case "AUDIO":if(null!=a.id&&!K(a.id))throw new I({code:"BAD_REQUEST",
message:`Invalid audio 'id'. Expected "string" received "${typeof a.id}".`});if(!K(a.url))throw new I({code:"BAD_REQUEST",message:`Invalid audio 'url'. Expected "string" received "${typeof a.url}".`});if(!K(a.mimeType))throw new I({code:"BAD_REQUEST",message:`Invalid audio 'mimeType'. Expected "string" received "${typeof a.mimeType}".`});if(!K(a.mimeType))throw new I({code:"BAD_REQUEST",message:`Invalid audio 'title'. Expected "string" received "${typeof a.title}".`});if(!Tl(a.durationMs))throw new I({code:"BAD_REQUEST",
message:`Invalid audio 'durationMs'. Expected "number" received "${typeof a.durationMs}".`});b=a.durationMs;if(!(Number.isSafeInteger(b)&&0<b))throw new I({code:"BAD_REQUEST",message:"Invalid audio 'durationMs'. Duration must be a non-zero positive integer."});break a;default:throw new J({code:"BAD_REQUEST",message:`Invalid upload type "${b}".`});}}try{if(null!=a.id)var c=a;else{var d=Sa().replace(/-/g,"");c=Object.assign({},{id:d},a)}const e=await this.l.queueMediaUpload(Cl(c));return eb({type:a.type,
result:e,eb:this.eb})}catch(e){if(e instanceof I)throw e;throw new I({code:"INTERNAL_ERROR",message:`Encountered an error while uploading asset: ${e instanceof Error?e.message:e}`});}}async openColorSelector(a,b){Ul(a);Vl(b);this.Le=b.onColorSelect;this.l.openColorSelector(new ol(Gl({anchor:a,scopes:b.scopes}))).catch(c=>{if(c instanceof I)throw c;throw new I({code:"INTERNAL_ERROR",message:`Failed to open the color selector: ${c instanceof Error?c.message:c}`});});return()=>{ab(this.l).catch(c=>{throw new I({code:"INTERNAL_ERROR",
message:`Failed to close the color selector: ${c}`});})}}async Rd(a){if(null!=this.Le){var b=this.Le;if("SOLID"===a.re)a={selection:{type:"solid",hexString:a.selection.hexString}};else throw new m(a.re);b.call(this,a)}}async findFonts(a){a=void 0===a?{}:a;this.B("findFonts");hb(a.fontRefs);return{fonts:(await this.l.findFonts(new pl(a))).fonts.map(Jl)}}async requestFontSelection(a){a=void 0===a?{}:a;this.B("requestFontSelection");a=await this.l.requestFontSelection(new tl(a));return"ABORTED"===a.type?
{type:"ABORTED"}:{type:"COMPLETED",font:Jl(a.font)}}Dd(a){var b=Object.assign({},a),c=a.X,d=(delete b.X,b);return async()=>{try{if(c)return{type:"done"};const e=await Za(this.l,Dl(d));return El(e)}catch(e){if(e instanceof I)throw e;throw new I({code:"INTERNAL_ERROR",message:`
      Something unexpected happened while trying to find or get the media upload status.

      Error Details: ${e instanceof Error?e.message:e}

      Please check that:

      1. You are connected to the internet.
      2. You are using the recent version of the Canva mobile app, if you're on a Canva mobile app.
      3. The media you're trying to import is supported. We support:
         - Images:
           - JPEG, PNG, HEIC, or WEBP of up to 25 MB.
           - SVGs of up to 3 MB.
         - Videos:
           - AVI, GIF, M4V, Matroska, QuickTime, MP4, MPEG, or WEBM of up to 100 MB.
           - SVGs of up to 3 MB.
           - Lottie of up to 0.5 MB
         - Audio:
           - MP3, MP4, WAV, OGG or WEBM of up to 50 MB.
      4. There are additional limitations per each supported media type:
         - JPEGs, PNGs, and HEICs must not have more than 250 million pixels.
         - SVG images must not contain external links, external fonts, duplicate ids, and some other attributes, properties, and tags.
           Please refer to the Canva developer documentation to find the full list of things not allowed in SVGs.
      5. The media you're trying to import is available at the specified URL and does not require cookies or the basic HTTP authentication to access it.

      If you have tried all the above and it has not helped, please report your issue to Canva.
`});}}}eb(a){var b=Object.assign({},a),c=a.X,d=(delete b.X,b);return async()=>{if(!c){var e=await Za(this.l,Dl(d));e=El(e);var f=e.type;switch(f){case "done":break;case "failed":throw db(e.reason.type);default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected upload result type '${f}'.`});}}}}B(a){this.j.B(X({ea:"asset",client:"Content",method:a}))}constructor(a,b,c){this.T=b;this.j=c;this.l=new zl(a);this.eb=this.eb.bind(this);this.Dd=this.Dd.bind(this);cb(a,{Rd:async d=>{await this.Rd(d)}})}};var Wl=H(()=>[0,1,2,3]);var Xl=E(()=>({name:S(1),type:C(2,Wl),values:S(3)}));var lb=E(()=>({name:S(1),columns:y(2,Xl)}));var Yl=class{async getDataTable(){const a=await this.A.request("getDataTable");if(!a.ok)throw new I({code:"INTERNAL_ERROR",message:"Failed to retrieve a data table."});if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"Data table cannot be undefined."});return lb.D(a.value)}constructor(a){this.A=a}};var qb=class{async getDataTable(){this.B("getDataTable");Pf(this.T,"getDataTable");const a=await this.l.getDataTable();return{name:a.name,columns:a.columns.map(jb)}}B(a){this.j.B(X({ea:"data",client:"DataConsumer",method:a}))}constructor(a,b,c){this.T=b;this.j=c;this.l=new Yl(a)}};var Zl=class{constructor(a){this.A=a}};var ob=class{B(a){this.j.B(X({ea:"data",client:"DataProvider",method:a}))}constructor(a,b,c){this.A=a;this.T=b;this.j=c;this.onSelectDataTable=async d=>{this.B("onSelectDataTable");this.T.Vb("preview","onSelectDataTable");this.Me.handler=d;await kb(this.l)};this.Me=new $l;this.l=new Zl(a);mb(a,this.Me)}},$l=class{set handler(a){this._handler=a}get handler(){return this._handler}async selectDataTable(){if(this.Kc)throw new I({code:"FAILED_PRECONDITION",message:"Received 'selectDataTable' request while the user is still selecting data. Please wait until the initial request has settled before sending another request."});
this.Kc=!0;return new Promise(async a=>{if(null==this._handler)throw this.Kc=!1,new I({code:"FAILED_PRECONDITION",message:"You've tried calling 'selectDataTable' before the provider registered a callback with 'onSelectDataTable'.\nPlease wait a moment for the provider to register its callback before calling the 'selectDataTable' method."});this._handler({selectDataTable:b=>{this.Kc=!1;return a({name:b.name,columns:b.columns.map(nb)})}})})}constructor(){this._handler=void 0;this.Kc=!1}};var Tb=(a,b)=>["<MULTI_SEGMENT>",a,b],tf=a=>Array.isArray(a)&&3===a.length&&"<MULTI_SEGMENT>"===a[0];var Ub=E(()=>({target:S(1),yd:U(2)}));var tb=E(()=>({data:Sj(1),version:Q(2)}));var am=H(()=>[1,2],1);var bm=E(()=>({ref:S(1),width:Q(2),height:Q(3),type:C(4,am)}));var ub=E(()=>({cg:S(1),dg:t(2,bm)}));var oc=E(()=>({top:Mj(1),left:Mj(2),width:U(3),height:U(4),rotation:Oj(5)}));var cm=E(()=>Object.assign({},{},{type:r(1,"IMAGE"),ref:U(1),dataUrl:U(2),box:u(3,oc)}));var dm=E(()=>Object.assign({},{},{type:r(2,"VIDEO"),ref:S(1),box:u(2,oc)}));var em=E(()=>Object.assign({},{},{type:r(3,"EMBED"),url:S(1),box:u(2,oc)}));var fm=E(()=>Object.assign({},{},{type:r(4,"TEXT"),children:Rj(1),fontSize:R(2),textAlign:U(3),color:U(4),fontRef:U(9),fontWeight:U(5),fontStyle:U(6),decoration:U(7),box:u(8,oc)}));var gm=E(()=>({top:Mj(1),left:Mj(2),width:Mj(3),height:Mj(4)}));var hm=E(()=>({ref:S(1)}));var im=E(()=>({ref:S(1)}));var jm=E(()=>({dropTarget:W(1),color:U(2),image:u(3,hm),video:u(4,im)}));var km=E(()=>({weight:Q(1),color:S(2),strokeAlign:S(3)}));var lm=E(()=>({d:S(1),fill:t(2,jm),stroke:u(3,km)}));var mm=E(()=>Object.assign({},{},{type:r(5,"SHAPE"),viewBox:t(1,gm),paths:y(2,lm),box:u(3,oc)}));var om=E(()=>Object.assign({},{},{type:r(6,"GROUP"),children:y(1,nm),box:u(2,oc)}));var pm=E(()=>({text:u(1,fm),fill:u(2,jm),rowSpan:R(3),colSpan:R(4)}));var qm=E(()=>({cells:y(1,pm)}));var rm=E(()=>Object.assign({},{},{type:r(10,"TABLE"),rows:y(1,qm)}));var nm=G(()=>({type:[1,cm,2,dm,3,em,4,fm,5,mm,6,om,10,rm]}),()=>({}));var uc=E(()=>({type:S(1,"INTERACTIVE_ELEMENT"),width:Mj(2),height:Mj(3)}));var vb=E(()=>({Sa:U(1),$a:Sj(2),Ta:y(3,nm),interactiveElement:u(4,uc),placement:u(5,oc)}));var sm=E(()=>({id:S(1),version:Q(2)}));var wb=E(()=>({data:Sj(1),version:Q(2),mediaRef:t(3,sm)}));var Ib=E(()=>({id:S(1)}));var tm=H(()=>[1,2,3,4]);var xb=E(()=>({Ga:t(1,Ib),scope:C(2,tm),count:Q(3)}));var yb=E(()=>({id:S(1),canOpen:V(2),reason:U(3)}));var qc=E(()=>({elements:y(1,nm),background:u(2,jm),title:U(3)}));var um=E(()=>({token:S(1)}));var vm=E(()=>({width:Mj(1),height:Mj(2)}));var wm=E(()=>({dimensions:u(1,vm)}));var xm=E(()=>({dimensions:u(1,vm)}));var ym=E(()=>({ref:S(1)}));var Ab=E(()=>({Sa:U(1)}));var Db=E(()=>({Sa:U(1),isLoading:W(2)}));var zm=E(()=>({code:S(1),message:S(2)}));var Gb=E(()=>({Lg:u(1,zm),yc:S(5),data:Sj(6)}));var Bc=E(()=>Object.assign({},{},{scope:r(1,"TOMBSTONE")}));var Ec=E(()=>Object.assign({},{},{scope:r(2,"PLAINTEXT"),text:S(1)}));var Dc=E(()=>Object.assign({},{},{scope:r(3,"IMAGE"),ref:S(1)}));var Am=E(()=>({index:Q(1),length:Q(2)}));var xc=E(()=>({fontRef:U(1),fontSize:R(2),textAlign:U(3),color:U(4),fontWeight:U(5),fontStyle:U(6),decoration:U(7),strikethrough:U(8),link:U(9),listLevel:R(10),listMarker:U(11)}));var zc=E(()=>Object.assign({},{},{type:r(1,"FORMAT"),bounds:t(1,Am),formatting:t(2,xc)}));var Bm=E(()=>({Mb:S(1),formatting:u(2,xc)}));var yc=E(()=>Object.assign({},{},{type:r(2,"REPLACE"),bounds:t(1,Am),Ka:y(2,Bm)}));var wc=E(()=>Object.assign({},{},{type:r(3,"APPEND"),Ka:y(1,Bm)}));var Cm=G(()=>({type:[1,zc,2,yc,3,wc]}),()=>({}));var Cc=E(()=>Object.assign({},{},{scope:r(4,"RICHTEXT"),xa:y(1,Cm),ma:U(5)}));var Fc=E(()=>Object.assign({},{},{scope:r(6,"VIDEO"),ref:S(1)}));var Dm=G(()=>({scope:[1,Bc,2,Ec,3,Dc,4,Cc,6,Fc]}),()=>({}));var Jb=E(()=>({values:y(1,Dm)}));var Lb=E(()=>({Ga:t(1,Ib),scope:C(2,tm),values:y(3,Dm)}));var Nb=E(()=>({scope:C(1,tm)}));var Qb=E(()=>({id:Q(1)}));var Ob=E(()=>({Ub:t(1,Qb),kb:t(2,xb)}));var Vb=E(()=>({appProcessId:S(1)}));var Em=E(()=>({Ga:t(1,Ib),fe:y(3,Cm),ma:U(4)}));var Fm=E(()=>({text:S(1)}));var Xb=E(()=>({Ga:t(1,Ib),fe:y(3,Cm),ma:U(4)}));var Yb=E(()=>({Ka:y(1,Bm)}));var $b=E(()=>({target:S(1)}));var ac=E(()=>({Ub:Q(1),kb:t(2,yb)}));var cc=E(()=>({Ub:Q(1)}));var Gm=class{async addNativeElement(a){a=await this.A.request("DI_V1_ADD_NATIVE_ELEMENT",nm.C(a));if(!a.ok)throw a.error;}async setCurrentPageBackground(a){a=await this.A.request("DI_V1_SET_CURRENT_PAGE_BACKGROUND",jm.C(a));if(!a.ok)throw a.error;}async addPage(a){a=await this.A.request("DI_V1_ADD_PAGE",qc.C(a));if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while adding page"}: ${a.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while adding page"}: ${a.error}`});
}}async getDesignToken(){const a=await this.A.request("DI_V1_GET_DESIGN_TOKEN");if(!a.ok){if(a.error instanceof I)throw a.error;throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while trying to retrieve design token."}: ${a.error}`});}if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"Encountered an error while trying to retrieve design token.: DI_V1_GET_DESIGN_TOKEN: Response cannot be empty"});return um.D(a.value)}async getDefaultPageDimensions(){const a=await this.A.request("DI_V1_GET_DEFAULT_PAGE_DIMENSIONS");
if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while trying to read default page dimensions."}: ${a.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while trying to read default page dimensions."}: ${a.error}`});}if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"Encountered an error while trying to read default page dimensions.: DI_V1_GET_DEFAULT_PAGE_DIMENSIONS: Response cannot be empty"});return wm.D(a.value)}async getCurrentPageContext(){const a=
await this.A.request("DI_V1_GET_CURRENT_PAGE_CONTEXT");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"DI_V1_GET_CURRENT_PAGE_CONTEXT: Response cannot be empty"});return xm.D(a.value)}async addAudioTrack(a){a=await this.A.request("DI_V1_ADD_AUDIO_TRACK",ym.C(a));if(!a.ok)throw a.error;}async setAppElementData(a){a=await this.A.request("DI_V1_SET_APP_ELEMENT_DATA",vb.C(a));if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while setting app element data"}: ${a.error.rawMessage}`});
throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while setting app element data"}: ${a.error}`});}}registerRenderAppElement(){this.A.request("DI_V1_REGISTER_RENDER_APP_ELEMENT")}async readPlaintext(a){a=await this.A.request("DI_V1_READ_PLAINTEXT",Em.C(a));if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while reading text"}: ${a.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while reading text"}: ${a.error}`});
}if(null==a.value)throw new I({code:"INTERNAL_ERROR",message:"DI_V1_READ_PLAINTEXT: Result Cannot be empty"});return Fm.D(a.value)}constructor(a){this.A=a}};var sc=a=>{var b,c;return new jm({dropTarget:a.dropTarget,color:a.color,image:"IMAGE"===(null===(b=a.asset)||void 0===b?void 0:b.type)?new hm({ref:a.asset.ref}):void 0,video:"VIDEO"===(null===(c=a.asset)||void 0===c?void 0:c.type)?new im({ref:a.asset.ref}):void 0})},Hm=a=>new pm({fill:a.fill&&sc(a.fill),colSpan:a.colSpan,rowSpan:a.rowSpan,text:a.text&&rc(a.text)}),rc=a=>{switch(a.type){case "TEXT":return new fm(Object.assign({},a,{box:pc(a)}));case "IMAGE":return new cm(Object.assign({},a,{box:pc(a)}));
case "VIDEO":return new dm(Object.assign({},a,{box:pc(a)}));case "EMBED":return new em(Object.assign({},a,{box:pc(a)}));case "SHAPE":return new mm(Object.assign({},a,{box:pc(a),paths:a.paths.map(b=>new lm(Object.assign({},b,{fill:sc(b.fill),stroke:b.stroke?new km(b.stroke):void 0})))}));case "GROUP":return new om(Object.assign({},a,{box:pc(a),children:a.children.map(rc)}));case "TABLE":return rm.wg({rows:a.rows.map(b=>{({cells:b}=b);return{cells:b.map(Hm)}})});default:throw new J({code:"INTERNAL_ERROR",
message:`Unsupported element type: '${a}'.`});}};var Im=class{get xa(){return[...this.sb]}formatText(a,b){this.sb.push(Vc(this.va,{type:"format",bounds:a,formatting:b}))}appendText(a,b){this.sb.push(Vc(this.va,{type:"append",Hb:{text:a,formatting:b}}))}replaceText(a,b,c){this.sb.push(Vc(this.va,{type:"replace",bounds:a,$c:[{text:b,formatting:c}]}))}async readPlaintext(){const a=this.xa;this.sb=[];return(await this.l.readPlaintext(new Em({ma:this.Od,Ga:new Ib({id:this.Ga}),fe:a.map(Ac)}))).text}async readTextRegions(){const a=this.xa;this.sb=[];
return(await Zb(this.l,new Xb({ma:this.Od,Ga:new Ib({id:this.Ga}),fe:a.map(Ac)}))).Ka.map(b=>({text:b.Mb,formatting:b.formatting&&Hc(b.formatting)}))}constructor(a,b,c,d){this.Od=a;this.Ga=b;this.l=c;this.va=d;this.sb=[]}};var ud=class{async save(){if(this.Xe)throw new I({code:"BAD_REQUEST",message:"Attempted to save a new change on an outdated draft. To make another change, read a fresh draft from the selection event."});if(!this.eh())throw new I({code:"BAD_REQUEST",message:"Attempted to save a change on a selection event which has been disposed of"});var a=[],b=this.contents,c=0;for(let l=0;l<this.qf.length;l++){var d=this.qf[l];if(null==d)a.push(void 0);else{var e=b[c++],f=a,g=f.push;a:{var h=this.scope;switch(h){case "plaintext":h=
d.text!==e.text;break a;case "image":h=d.ref!==e.ref;break a;case "video":h=d.ref!==e.ref;break a;case "richtext":h=!0;break a;default:throw new I({code:"BAD_REQUEST",message:`${h} is not a supported selection scope.`});}}if(h)a:switch(h=this.scope,d=this.va,h){case "image":e=Yc(d,e,"image");break a;case "plaintext":e=Yc(d,e,"plaintext");break a;case "video":e=Yc(d,e,"video");break a;case "richtext":e=Yc(d,{ma:e.Od,xa:e.xa},"richtext");break a;default:throw new m(h);}else e=void 0;g.call(f,e)}}this.Xe=
!0;b=this.l;c=this.scope;f=this.id;a=Gc(a,c);a=new Lb({Ga:new Ib({id:f}),scope:Kc(c),values:a.values});await Mb(b,a)}constructor(a,b,c,d,e,f){this.l=a;this.id=b;this.scope=c;this.qf=d;this.eh=e;this.va=f;this.Xe=!1;this.contents=Object.freeze(d.filter(g=>null!=g).map(g=>{if("richtext"===c)g=new Im(g.ma,this.id,this.l,this.va);else if("plaintext"===c||"image"===c||"video"===c)g=Object.assign({},g);else throw new m(c);return g}))}};var Oc=class{get canOpen(){return this.qb&&this.Td.canOpen&&!this.od}get reason(){if(!this.canOpen){if(!this.qb)return"Overlay can not be opened on stale event";Va(!1===this.Td.canOpen,"Invalid state.");return this.Td.reason}}constructor(a){this.Td=a;this.qb=!0;this.od=!1}};var Jm=class{constructor(a){this.l=a;this.Cf=new Map}};var ad=/^Y[A-Za-z0-9_-]{10}:[0-9]+$/,Vd="normal thin extralight light medium semibold bold ultrabold heavy".split(" "),rd="none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ");var gd=/data:.*,.*/,hd=/^data:image\/svg\+xml;base64,/i,id=/^https?:\/\/[^\s]+\s*$/,nd=/^#[0-9a-f]{6}$/i,Wc=/^M[a-zA-Z0-9_-]{10}:[0-9]+$/,Xc=/^V[A-Za-z0-9_-]{10}$/,Km=/^a[A-Za-z0-9_-]{10}$/,N=Math.pow(2,15),cd=Vd.map(a=>`"${a}"`).join(" | "),sd=rd.map(a=>`"${a}"`).join(" | "),Lm=class{constructor(a){this.T=a}};var td=["plaintext","image","video","richtext"],Pe=class{async setAppElementData(a,b){this.B("setAppElementData");let c,d;try{"function"===typeof a?(c=await Bb(this.l),await Eb(this.l,{Sa:null===c||void 0===c?void 0:c.Sa,isLoading:!0}),{appElementData:d,placement:b}=await a(),await Eb(this.l,{Sa:null===c||void 0===c?void 0:c.Sa,isLoading:!1})):d=a;if(!this.dc)throw new I({code:"FAILED_PRECONDITION",message:"You've tried calling the 'setAppElementData' method without registering a callback with the 'registerRenderAppElement' method.\nThis doesn't work because setting the app element's data triggers the callback, so the callback needs to be registered first.\n\nPlease register a callback with 'registerRenderAppElement' before calling the 'setAppElementData' method."});
try{if(null!=b){a=b;const e=[];null==a.top&&e.push("top");null==a.left&&e.push("left");null==a.width&&e.push("width");null==a.height&&e.push("height");L(0===e.length,`Missing placement properties: ${e.join(",")}.`,"invalid_element_placement");md(a)}await this.l.setAppElementData(vc({$a:qd(d),Ta:xd(this,d),placement:b,kg:null===c||void 0===c?void 0:c.Sa}))}catch(e){throw e instanceof I&&yd(this,{error:e,fg:this.dc(d),yc:"setAppElementData",data:ec(d)}),e;}}finally{c&&await Cb(this.l,c)}}async addAudioTrack(a){this.B("addAudioTrack");
try{L(null!=a,"audio track must exist","invalid_element_state"),L(Km.test(a.ref),"Invalid audio reference","invalid_element_state"),await this.l.addAudioTrack(new ym({ref:a.ref}))}catch(b){if(b instanceof I)throw new I({code:b.code,message:`${"Encountered an error while adding audio track"}: ${b.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while adding audio track"}: ${b instanceof Error?b.message:b}`});}}we(){zb(this.zb,{ue:async a=>{var b;null===(b=this.rd)||
void 0===b?void 0:b.call(this,a?{data:fc(a.data),version:a.version}:void 0)},Oh:async a=>{zd(this,"onCreateFromPreset","onAppElementCreateFromPreset");if(!this.He)throw new I({code:"INTERNAL_ERROR",message:"Unexpected create event"});var b=a.dg;b=this.He(a.cg,1===b.type?{type:"IMAGE",ref:b.ref,dimensions:{width:b.width,height:b.height}}:{type:"VIDEO",ref:b.ref,dimensions:{width:b.width,height:b.height}});a=qd(b);b=xd(this,b);return vc({$a:a,Ta:b})},Ph:async a=>{zd(this,"onDrop","onAppElementDrop");
if(!this.Ie)throw new I({code:"INTERNAL_ERROR",message:"Unexpected drop event"});var b=a.mediaRef;const c=a.version;b=await this.Ie({data:fc(a.data),version:c},{mediaRef:b});a=qd(b);b=xd(this,b);return vc({$a:a,Ta:b})},Qh:async a=>{const b=Mc(a);this.Wc.forEach(c=>c(b))},Rh:async a=>{a=Nc(a);Qc(this.Bf,a)}})}initAppElement({render:a}){this.B("initAppElement");this.registerRenderAppElement(a);return{addOrUpdateElement:(...b)=>this.setAppElementData(...b),registerOnElementChange:(...b)=>this.onAppElementChange(...b)}}B(a){this.j.B(X({ea:"design",
client:"DesignInteraction",method:a}))}constructor(a,b,c){this.zb=a;this.T=b;this.j=c;this.Wc=new Map;this.selection={registerOnChange:d=>vd(this,d)};this.overlay={registerOnCanOpen:d=>wd(this,d)};this.registerRenderAppElement=d=>{this.B("registerRenderAppElement");this.dc=d;this.l.registerRenderAppElement()};this.onAppElementChange=d=>{this.B("onAppElementChange");this.rd=d;Fb(this.l)};this.onAppElementCreateFromPreset=d=>{this.He=d};this.onAppElementDrop=d=>{this.Ie=d};this.getCurrentPageContext=
()=>{this.B("getCurrentPageContext");return this.l.getCurrentPageContext().catch(d=>{if(d instanceof I)throw d;throw new I({code:"INTERNAL_ERROR",message:`Encountered an error while trying to read current page context: ${d instanceof Error?d.message:d}`});})};this.getDefaultPageDimensions=async()=>{this.B("getDefaultPageDimensions");const {dimensions:d}=await this.l.getDefaultPageDimensions();return d};this.setCurrentPageBackground=({color:d,asset:e})=>{this.B("setCurrentPageBackground");null==d&&
null==e&&(d="#ffffff");if(null!=d&&null!=e)throw new I({code:"BAD_REQUEST",message:"Only 1 of color or asset can be defined."});d=pd({color:d,asset:e});return this.l.setCurrentPageBackground(sc(d))};this.addNativeElement=async d=>{this.B("addNativeElement");try{const e=gc(d)?ed(this.va,d):kd(this.va,d);await this.l.addNativeElement(rc(e))}catch(e){e instanceof I&&yd(this,{error:e,fg:d,yc:"addNativeElement"});if(e instanceof I)throw e;throw new I({code:"INTERNAL_ERROR",message:`Encountered an error while adding native element: ${e instanceof
Error?e.message:e}`});}};this.addPage=async d=>{var e;this.B("addPage");const f=null===d||void 0===d?void 0:null===(e=d.elements)||void 0===e?void 0:e.map(g=>ed(this.va,g));e=(null===d||void 0===d?void 0:d.background)&&pd(d.background);d=(null===d||void 0===d?void 0:d.title)&&od(d.title);await this.l.addPage(tc({elements:f,background:e,title:d}))};this.getDesignToken=()=>{this.B("getDesignToken");return this.l.getDesignToken()};this.we();this.l=new Gm(this.zb);this.Bf=new Jm(this.l);this.va=new Lm(this.T)}};var Hd=new Set(["IMAGE"]),Pd={type:a=>O(a,Id,"'type' is not a valid drag type"),fullSizeSrc:a=>O(a,Ad,"'fullSizeSrc' must be a jpg or png data url"),previewSize:a=>O(a,Ld,"'previewSize' must be an object containing only a positive numeric width and height")},Sd={type:a=>Nd(a,["IMAGE"],"type"),previewSrc:a=>O(a,Dd,"'previewSrc' must be a url"),resolveImageRef:a=>O(a,Ed,"'resolveImageRef' must be a function"),previewSize:a=>O(a,Ld,"'previewSize' must be an object containing only a positive numeric width and height"),
fullSize:a=>O(a,Ld,"'fullSize' must be an object containing only a positive numeric width and height")},Qd={fullSize:a=>O(a,Ld,"'fullSize' must be an object containing only a positive numeric width and height or undefined",!0),previewSrc:a=>O(a,Ad,"'previewSrc' must be a jpg or png data url or undefined",!0)},Xd={type:a=>Nd(a,["VIDEO"],"type"),previewSrc:a=>O(a,Dd,"'previewSrc' must be a url"),resolveVideoRef:a=>O(a,Ed,"'resolveVideoRef' must be a function"),previewSize:a=>O(a,Ld,"'previewSize' must be an object containing only a positive numeric width and height"),
fullSize:a=>O(a,Ld,"'fullSize' must be an object containing only a positive numeric width and height")},Zd={type:a=>Nd(a,["AUDIO"],"type"),title:a=>O(a,Fd,"'title' must be supplied"),resolveAudioRef:a=>O(a,Ed,"'resolveAudioRef' must be a function"),durationMs:a=>O(a,Gd,"'durationMs' must be a number greater than 0")};var ie=new Set(["IMAGE"]),me={type:a=>ke(a,["IMAGE"],"type"),previewUrl:a=>P(a,be,"'previewUrl' must be a url"),resolveImageRef:a=>P(a,ce,"'resolveImageRef' must be a function"),previewSize:a=>P(a,he,"'previewSize' must be an object containing only a positive numeric width and height"),fullSize:a=>P(a,he,"'fullSize' must be an object containing only a positive numeric width and height")},pe={type:a=>ke(a,["VIDEO"],"type"),previewUrl:a=>P(a,be,"'previewUrl' must be a url"),resolveVideoRef:a=>P(a,ce,
"'resolveVideoRef' must be a function"),previewSize:a=>P(a,he,"'previewSize' must be an object containing only a positive numeric width and height"),fullSize:a=>P(a,he,"'fullSize' must be an object containing only a positive numeric width and height")},se={type:a=>ke(a,["AUDIO"],"type"),title:a=>P(a,de,"'title' must be supplied"),resolveAudioRef:a=>P(a,ce,"'resolveAudioRef' must be a function"),durationMs:a=>P(a,ee,"'durationMs' must be a number greater than 0")};var Mm=class{ib({dragData:a}){if("AUDIO"!==(null===a||void 0===a?void 0:a.type))throw new I({code:"BAD_REQUEST",message:`Invalid drag type. Expected 'AUDIO' received '${null===a||void 0===a?void 0:a.type}'`});if(!$d(a))throw new I({code:"BAD_REQUEST",message:"invalid drag data"});return()=>a}gb(a){if(!te(a))throw new I({code:"BAD_REQUEST",message:"invalid drag data"});return a}};var ue=E(()=>({ref:S(1)}));var ve=E(()=>({ref:S(1)}));var we=E(()=>({ref:S(1)}));var Y=E(()=>({x:Q(1),y:Q(2)}));var Nm=E(()=>({width:Q(1),height:Q(2)}));var Ke=E(()=>Object.assign({},{},{type:r(1,"IMAGE"),ab:t(1,Y),mb:t(2,Y),fb:t(3,Nm),fullSizeSrc:S(4),previewSize:t(5,Nm),fullSize:u(6,Nm),previewSrc:U(7)}));var Le=E(()=>Object.assign({},{},{type:r(2,"TEXT"),ab:t(1,Y),mb:t(2,Y),fb:t(3,Nm),children:Rj(4),fontRef:U(10),fontSize:R(5),fontWeight:U(6),fontStyle:U(7),decoration:U(8),textAlign:U(9)}));var Je=E(()=>Object.assign({},{},{type:r(3,"EXTERNAL_IMAGE"),ab:t(1,Y),mb:t(2,Y),fb:t(3,Nm),previewSize:t(4,Nm),previewSrc:S(5)}));var Me=E(()=>Object.assign({},{},{type:r(4,"VIDEO"),ab:t(1,Y),mb:t(2,Y),fb:t(3,Nm),previewSize:t(5,Nm),fullSize:u(6,Nm),previewSrc:S(7)}));var Ne=E(()=>Object.assign({},{},{type:r(5,"AUDIO"),ab:t(1,Y),mb:t(2,Y),fb:t(3,Nm),title:S(5),durationMs:Q(6)}));var Om=E(()=>Object.assign({},{},{type:r(6,"EMBED"),ab:t(1,Y),mb:t(2,Y),fb:t(3,Nm),previewSize:t(4,Nm),previewSrc:S(5),embedUrl:S(6)}));var ye=G(()=>({type:[1,Ke,2,Le,3,Je,4,Me,5,Ne,6,Om]}),()=>({}));var Ae=E(()=>({x:Q(1),y:Q(2),timestamp:__c.Nj(3),Zh:S(4)}));var Pm=class{async startDrag(a){a=await this.A.request("DND_V1_START_DRAG",ye.C(a));if(!a.ok)throw a.error;}constructor(a){this.A=a}};var Qm={now:()=>Date.now()},Rm=class{constructor(a,b){this.node=a;this.startDrag=b;this.Dc=Qm;this.Xb=!1;this.init=()=>{this.Qf();this.node.addEventListener("mouseup",this.onMouseUp);this.node.addEventListener("mousedown",this.onMouseDown);this.node.addEventListener("mousemove",this.onMouseMove);this.node.addEventListener("mouseleave",this.onMouseLeave)};this.Qf=()=>{this.node.removeEventListener("mouseup",this.onMouseUp);this.node.removeEventListener("mousedown",this.onMouseDown);this.node.removeEventListener("mousemove",
this.onMouseMove);this.node.removeEventListener("mouseleave",this.onMouseLeave)};this.onMouseDown=c=>{c.preventDefault();c.stopPropagation();this.Xb=!0;this.Db={coords:Object.assign({},{x:c.clientX,y:c.clientY}),timestamp:this.Dc.now()};return!1};this.onMouseUp=()=>{this.Xb=!1;this.Db=void 0;return!1};this.onMouseMove=c=>{if(this.Xb&&this.bh(c))return this.$e(c),!1};this.onMouseLeave=c=>{this.Xb&&this.$e(c)};this.$e=c=>{this.Xb=!1;this.Db=void 0;c={x:c.clientX,y:c.clientY};const {top:d,left:e,width:f,
height:g}=this.node.getBoundingClientRect();this.startDrag({ab:c,mb:{x:e,y:d},fb:{width:f,height:g}})};this.bh=c=>{if(null==this.Db)return!0;var d=c.clientX,e=c.clientY;c=this.Db.timestamp>this.Dc.now()-100;d=10>Math.abs(this.Db.coords.x-d);e=10>Math.abs(this.Db.coords.y-e);return!(c&&d&&e)}}};var Sm=class{Pd({node:a,dragData:b}){return()=>{"img"===a.nodeName.toLowerCase()&&(b=Object.assign({},{fullSize:{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height},previewSrc:a.src,previewSize:{width:a.width,height:a.height}},b));Td(b);return Promise.resolve(b)}}ib({node:a,dragData:b}){if(Ce(b))return this.Pd({node:a,dragData:b});"img"===a.nodeName.toLowerCase()?Ud(Object.assign({},{fullSizeSrc:a.src},b)):Rd(b);if((null===b||void 0===b?0:b.type)&&"IMAGE"!==b.type)throw new I({code:"BAD_REQUEST",
message:`Invalid drag type. Expected 'IMAGE' received '${b.type}'`});return async()=>{var c="img"===a.nodeName.toLowerCase()?a:void 0;c=Object.assign({},{type:"IMAGE"},c&&{fullSizeSrc:c.src,fullSize:{width:c.naturalWidth,height:c.naturalHeight},previewSize:{width:c.width,height:c.height}},b);if(!Rd(c))throw new I({code:"BAD_REQUEST",message:"Invalid image data"});await De(c);return c}}async gb(a,b){var c=Object.assign({},b);"img"===a.nodeName.toLowerCase()&&(c={fullSize:{width:a.naturalWidth||a.width,
height:a.naturalHeight||a.height},previewSize:{width:a.width,height:a.height}},a.src&&(c.previewUrl=a.src),c=Object.assign({},c,b));ne(c);return Promise.resolve(c)}};var He=(a,b)=>{switch(a.type){case "TEXT":return new Le(Object.assign({},a,b));case "AUDIO":return new Ne(Object.assign({},a,b));case "EMBED":return Object.assign({},b,Tm(a,["previewUrl"]),{previewSrc:a.previewUrl});case "VIDEO":return new Me(Object.assign({},b,Tm(a,["previewUrl"]),{previewSrc:a.previewUrl}));case "IMAGE":return new Je(Object.assign({},b,Tm(a,["previewUrl","fullSize"]),{previewSrc:a.previewUrl}));default:throw new J({code:"INTERNAL_ERROR",message:`Unsupported drag type: '${a}'.`});
}},Tm=(a,b)=>Object.keys(a).filter(c=>!b.includes(c)).reduce((c,d)=>Object.assign({},c,{[d]:a[d]}),{});var Vm=class{ib(a){return()=>{var b=this.Ee.getComputedStyle(a.node),c=a.dragData&&Object.fromEntries(Object.entries(a.dragData).filter(([,d])=>null!=d));c=Object.assign({},{fontStyle:"italic"===b.fontStyle?"italic":"normal",decoration:b.textDecoration.includes("underline")?"underline":"none",fontWeight:600<=parseInt(b.fontWeight,10)?"bold":"normal",textAlign:Ee(b.textAlign),children:[a.node.innerText]},c,{type:"TEXT"});Wd(c);if(b=parseFloat(b.fontSize))c.fontSize=b;return Promise.resolve(c)}}async gb(a,
b){var c=Um(a);c=this.Ee.getComputedStyle(c);b=b&&Object.fromEntries(Object.entries(b).filter(([,d])=>null!=d));a=Object.assign({},{fontStyle:"italic"===c.fontStyle?"italic":"normal",decoration:c.textDecoration.includes("underline")?"underline":"none",fontWeight:600<=parseInt(c.fontWeight,10)?"bold":"normal",textAlign:Ee(c.textAlign),children:[a.innerText]},b,{type:"TEXT"});oe(a);if(c=parseFloat(c.fontSize))a.fontSize=c;return Promise.resolve(a)}constructor(){this.Ee=window}},Um=a=>{var b;if(a.nodeType===
Node.TEXT_NODE||(null===(b=a.firstChild)||void 0===b?void 0:b.nodeType)===Node.TEXT_NODE)return a;b=[...a.querySelectorAll("*")].filter(c=>{var d;return(null===(d=c.firstChild)||void 0===d?void 0:d.nodeType)===Node.TEXT_NODE});return 0<b.length?b[0]:a};var Wm=class{Pd({node:a,dragData:b}){return()=>{"img"===a.nodeName.toLowerCase()&&(b=Object.assign({},{fullSize:{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height},previewSrc:a.src,previewSize:{width:a.width,height:a.height}},b));if(!Yd(b))throw new I({code:"BAD_REQUEST",message:"invalid drag data"});return Promise.resolve(b)}}ib({node:a,dragData:b}){"img"===a.nodeName.toLowerCase()?ae(Object.assign({},{previewSrc:a.src},b)):Yd(b);if("VIDEO"!==(null===b||void 0===b?void 0:b.type))throw new I({code:"BAD_REQUEST",
message:`Invalid drag type. Expected 'Video' received '${null===b||void 0===b?void 0:b.type}'`});return this.Pd({node:a,dragData:b})}async gb(a,b){"img"===a.nodeName.toLowerCase()?re(Object.assign({},{previewUrl:a.src},b)):qe(b);let c=Object.assign({},b);"img"===a.nodeName.toLowerCase()&&(c=Object.assign({},{fullSize:{width:a.naturalWidth||a.width,height:a.naturalHeight||a.height},previewUrl:a.src,previewSize:{width:a.width,height:a.height}},b));if(!qe(c))throw new I({code:"BAD_REQUEST",message:"invalid drag data"});
return Promise.resolve(c)}};var Fe=["VIDEO","IMAGE","TEXT","AUDIO","EMBED"],Xm=(a,b)=>{a=new Rm(a,b);a.init();return a},Qe=class{makeDraggable(a){this.B("makeDraggable");Of(this.T,{Qb:"method",Rb:"makeDraggable",Yb:"startDrag"});const b={onDragStart:a.onDragStart,onDragEnd:a.onDragEnd};let c;try{var d;const e=null===(d=a.dragData)||void 0===d?void 0:d.type;switch(e){case void 0:case "IMAGE":c=this.Ze.ib(a);break;case "TEXT":c=this.Rf.ib(a);break;case "VIDEO":c=this.Vf.ib(a);break;case "AUDIO":c=this.Ke.ib(a);break;default:throw new J({code:"BAD_REQUEST",
message:`Unsupported and/or invalid drag data type: '${e}'`});}this.Dh(a.node,b,c)}catch(e){if(e instanceof I)throw new I({code:e.code,message:`Encountered an error while trying to make node draggable: ${e.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`Encountered an error while trying to make node draggable: ${e instanceof Error?e.message:e}`});}}async startDrag(a,b){this.B("startDrag");a.preventDefault();const c=a.currentTarget;if(c){var d=document.body.style.pointerEvents||"all";document.body.style.pointerEvents=
"none";var {top:e,left:f,width:g,height:h}=c.getBoundingClientRect();await Ie(this,c,b,{ab:{x:a.clientX,y:a.clientY},mb:{x:f,y:e},fb:{width:g,height:h}},()=>{document.body.style.pointerEvents=d;const l=new DragEvent("dragend",a);c.dispatchEvent(l)})}}ke(){return Wa(this.gg,"BAD_REQUEST","'resolveAudioRef' could not be found. Please confirm that it has been supplied in 'dragData'")()}le(){return Wa(this.Sd,"BAD_REQUEST","resolveImageRef could not be found. Please confirm that it has been supplied in dragData")()}B(a){this.j.B(X({ea:"design",
client:"DragAndDrop",method:a}))}constructor(a,b,c,d){var e=new Sm,f=new Vm,g=new Wm,h=new Mm;this.Gc=b;this.T=c;this.j=d;this.Dg=Xm;this.Ze=e;this.Rf=f;this.Vf=g;this.Ke=h;this.Gd=new Map;this.Fh=l=>{const n=this.Gd.get(l);if(n)try{n.Qf()}finally{this.Gd.delete(l)}};this.gh=l=>({onDragStart:n=>{l.onDragStart(n)},onDragEnd:n=>{l.onDragEnd(n)}});this.Dh=(l,n,q)=>{this.Fh(l);this.Gd.set(l,this.Dg(l,Oe(this,l,this.gh(n),q)))};this.Hf=l=>{this.Sd=l};this.Mf=l=>{this.gi=l};this.Ef=l=>{this.gg=l};this.l=
new Pm(a);xe(a,{le:()=>this.le(),Ih:()=>Wa(this.gi,"BAD_REQUEST","resolveVideoRef could not be found. Please confirm that it has been supplied in dragData")(),ke:()=>this.ke()})}};var Re=class{start(){this.B("start");this.stop();this.addEventListener("mousemove",this.pf);this.addEventListener("mouseup",this.onDragEnd)}stop(){this.B("stop");this.removeEventListener("mousemove",this.pf);this.removeEventListener("mouseup",this.onDragEnd)}B(a){this.j.B(X({ea:"design",client:"DragSync",method:a}))}constructor(a,b,c=f=>window.requestAnimationFrame(f),d=(f,g)=>window.addEventListener(f,g),e=(f,g)=>window.removeEventListener(f,g)){this.A=a;this.j=b;this.requestAnimationFrame=c;this.addEventListener=
d;this.removeEventListener=e;this.timestamp=0;this.Ne=g=>async({clientX:h,clientY:l})=>{await Be(this.l,{Zh:g,timestamp:this.timestamp,x:h,y:l})};this.l=new Pm(a);const f=this.Ne("mousemove");this.pf=g=>{this.requestAnimationFrame(h=>{if(!(h<=this.timestamp))return this.timestamp=h,f(g)})};this.onDragEnd=this.Ne("mouseup")}};var Ym=E(()=>({acceptedFileTypes:Rj(1)}));var Zm=E(()=>({url:S(1)}));var $m=E(()=>({exportBlobs:y(1,Zm),status:S(2),title:U(3)}));var an=class{async requestExport(a){a=Ym.C(a);a=await this.A.request("EXPORT_V1_REQUEST_EXPORT",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"EXPORT_V1_REQUEST_EXPORT: Response cannot be empty"});return $m.D(a.value)}constructor(a){this.A=a}};var bn=new Set("PNG JPG PDF_STANDARD VIDEO GIF PPTX SVG".split(" ")),cn=a=>{Ua("object"===typeof a&&null!=a,"options passed to requestExport is not an object");Ua(null!=a.acceptedFileTypes,"`acceptedFileTypes` must be passed");Ua(Array.isArray(a.acceptedFileTypes),"`acceptedFileTypes` should be an array");Ua(0<a.acceptedFileTypes.length,"`acceptedFileTypes` requires at least one file type specified in the options");a=a.acceptedFileTypes.filter(b=>!("string"===typeof b&&bn.has(b)));Ua(0===a.length,
`Invalid file type(s) passed to requestExport: ${a.join(", ")}`)};var Se=class{async queueDocument(a){this.B("queueDocument");return this.requestExport(a)}async requestExport(a){this.B("requestExport");cn(a);return await this.l.requestExport(new Ym(a))}B(a){this.j.B(X({ea:"design",client:"Export",method:a}))}constructor(a,b){this.j=b;this.l=new an(a)}};var dn=H(()=>[1,2]);var en=E(()=>({feature:C(1,dn)}));var fn=E(()=>Object.assign({},{},{status:r(1,"COMPLETED")}));var gn=E(()=>Object.assign({},{},{status:r(2,"ABANDONED")}));var hn=E(()=>Object.assign({},{},{status:r(3,"UNAVAILABLE")}));var jn=G(()=>({status:[1,fn,2,gn,3,hn]}),()=>({}));var kn=E(()=>({requestId:S(1)}));var ln=E(()=>Object.assign({},{},{status:r(1,"COMPLETED")}));var mn=E(()=>Object.assign({},{},{status:r(2,"ABANDONED")}));var nn=G(()=>({status:[1,ln,2,mn]}),()=>({}));var on=E(()=>({feature:C(1,dn)}));var pn=E(()=>({limit:R(1),usage:Q(2),resetsAt:Pj(3),canUpgrade:V(4)}));var qn=E(()=>Object.assign({},{},{type:r(1,"IMAGEN"),prompt:S(1)}));var rn=E(()=>Object.assign({},{},{type:r(2,"DALLE"),prompt:S(1)}));var sn=G(()=>({type:[1,qn,2,rn]}),()=>({}));var tn=E(()=>({url:S(1),thumbnailUrl:U(2)}));var un=E(()=>Object.assign({},{},{type:r(1,"SUCCESS"),images:y(1,tn),requestId:S(2)}));var vn=H(()=>[1,2,3]);var wn=E(()=>Object.assign({},{},{type:r(2,"FAILURE"),reason:C(1,vn)}));var xn=G(()=>({type:[1,un,2,wn]}),()=>({}));var yn=class{async requestUpgrade(a){a=en.C(a);a=await this.A.request("GENERATION_V1_REQUEST_UPGRADE",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"GENERATION_V1_GET_QUOTA: Response cannot be empty"});return jn.D(a.value)}async requestReportContent(a){a=kn.C(a);a=await this.A.request("GENERATION_V1_REQUEST_REPORT",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"GENERATION_V1_GET_QUOTA: Response cannot be empty"});
return nn.D(a.value)}async getQuota(a){a=on.C(a);a=await this.A.request("GENERATION_V1_GET_QUOTA",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"GENERATION_V1_GET_QUOTA: Response cannot be empty"});return pn.D(a.value)}async generateImages(a){a=sn.C(a);a=await this.A.request("GENERATION_V1_GENERATE",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"GENERATION_V1_GENERATE: Response cannot be empty"});return xn.D(a.value)}constructor(a){this.A=
a}};var hj=class{B(a){this.j.B(X({ea:"generation",client:"Generation",method:a}))}constructor(a,b){this.j=b;this.requestReportContent=async c=>{this.B("requestReportContent");return{status:(await this.l.requestReportContent(c)).status}};this.requestUpgrade=async c=>{this.B("requestUpgrade");switch(c.feature){case "DALLE":c=2;break;case "IMAGEN":c=1;break;default:throw new I({code:"INTERNAL_ERROR",message:`Unknown feature ${c.feature}`});}return{status:(await this.l.requestUpgrade({feature:c})).status}};
this.generateImages=async c=>{this.B("generateImages");if(!["DALLE","IMAGEN"].includes(c.type))throw new I({code:"BAD_REQUEST",message:`Request type must be one of "DALLE" or "IMAGEN". Received ${c.type}`});if(!c.prompt||0===c.prompt.length)throw new I({code:"BAD_REQUEST",message:"Request requires a non-empty prompt"});c=await this.l.generateImages({type:c.type,prompt:c.prompt});if("FAILURE"===c.type){switch(c.reason){case 1:c="QUOTA_EXCEEDED";break;case 2:c="INTERNAL_ERROR";break;case 3:c="UNSAFE_CONTENT";
break;default:throw new m(c.reason);}return{status:"FAILURE",reason:c}}return{status:"SUCCESS",images:c.images,requestId:c.requestId}};this.getQuota=async c=>{this.B("getQuota");switch(c.feature){case "DALLE":c=2;break;case "IMAGEN":c=1;break;default:throw new I({code:"INTERNAL_ERROR",message:`Unknown feature ${c.feature}`});}c=await this.l.getQuota({feature:c});return{limit:c.limit,usage:c.usage,resetsAt:null!=c.resetsAt?new Date(c.resetsAt):void 0,canUpgrade:c.canUpgrade}};this.l=new yn(a)}};var Ue=E(()=>({data:Sj(1),version:Q(2)}));var zn=E(()=>({$a:Sj(1)}));var An=class{async setAppElementData(a){a=await this.A.request("IE_V1_SET_APP_ELEMENT_DATA",zn.C(a));if(!a.ok){if(a.error instanceof I)throw new I({code:a.error.code,message:`${"Encountered an error while setting app element data"}: ${a.error.rawMessage}`});throw new I({code:"INTERNAL_ERROR",message:`${"Encountered an error while setting app element data"}: ${a.error}`});}}constructor(a){this.A=a}};var gj=class{async setAppElementData(a){Pf(this.T,"setAppElementData");a=Xe(a);if(5120<(new TextEncoder).encode(JSON.stringify(Object.fromEntries(a))).length)throw Error("Your app config data exceeds the maximum limit of 5KB.");await this.l.setAppElementData(new zn({$a:a}))}we(){Ve(this.zb,{ue:async a=>{var b;if(null===(b=this.rd)||void 0===b)void 0;else{var c=b.call;if(a){var d=a.data;const e={};for(const [f,g]of d)e[f]=JSON.parse(g);a={data:e,version:a.version}}else a=void 0;c.call(b,this,a)}}})}constructor(a,
b){this.zb=a;this.T=b;this.onAppElementChange=c=>{Pf(this.T,"onAppElementChange");this.rd=c;We(this.l)};this.we();this.l=new An(this.zb)}};var Bn=H(()=>[1,2]);var Ye=E(()=>({tb:C(1,Bn)}));var $e=E(()=>({tb:C(1,Bn),durationMs:Q(2),Fb:Q(3)}));var Cn=H(()=>[1]);var bf=E(()=>({type:C(1,Cn)}));var df=E(()=>({ec:S(1)}));var lf=E(()=>({theme:U(1),direction:U(2),disableUiRefresh:W(3),refreshDisabled:W(4)}));var Dn=E(()=>({version:S(1)}));var gf=E(()=>({Eh:S(1),methodName:S(2),propertyName:U(3)}));var jf=E(()=>({Qb:S(1),Rb:S(2),Yb:S(3)}));var En=E(()=>({xe:V(1)}));var Fn=E(()=>({canAcceptPayments:V(1)}));var Gn=E(()=>({wh:t(1,Fn)}));var Hn=E(()=>({platform:t(1,Gn)}));var Hf=class{async getUiContext(){const a=await this.A.request("UI_CONTEXT_V1_GET_UI_CONTEXT");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"UI_CONTEXT_V1_GET_UI_CONTEXT: response cannot be empty"});return lf.D(a.value)}async registerAppUiKitVersion(a){a=Dn.C(a);a=await this.A.request("UI_CONTEXT_V1_REGISTER_APP_UI_KIT_VERSION",a);if(!a.ok)throw a.error;}async xe(){const a=await this.A.request("LOCAL_STORAGE_V1_SHOULD_CLEAR");if(!a.ok)throw a.error;if(void 0===
a.value)throw new I({code:"INTERNAL_ERROR",message:"LOCAL_STORAGE_V1_SHOULD_CLEAR: response cannot be empty"});return En.D(a.value)}async getInfo(){const a=await this.A.request("GET_INFO_V1");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"GET_INFO_V1: response cannot be empty"});return Hn.D(a.value)}constructor(a){this.A=a}};var In=H(()=>[1,2,3]);var Jn=E(()=>({surface:C(1,In),processId:S(2)}));var Kn=H(()=>[1,2]);var Ln=E(()=>({reason:C(1,Kn)}));var Mn=E(()=>({params:t(1,Ln),Pf:S(2)}));var Nn=()=>({sourceId:S(1)});var On=E(()=>Object.assign({},Nn(),{type:r(2,"CLOSING"),params:t(2,Ln)}));var vf=G(()=>({type:[2,On]}),Nn);var wf=E(()=>({surface:C(1,In),processId:S(2)}));var Pn=()=>({sourceId:S(1)});var Qn=E(()=>Object.assign({},Pn(),{type:r(2,"OPENING")}));var Rn=E(()=>Object.assign({},Pn(),{type:r(3,"OPEN")}));var Sn=E(()=>Object.assign({},Pn(),{type:r(4,"CLOSING"),params:t(2,Ln)}));var Tn=E(()=>Object.assign({},Pn(),{type:r(5,"CLOSED")}));var uf=G(()=>({type:[2,Qn,3,Rn,4,Sn,5,Tn]}),Pn);var pf=E(()=>({kc:V(1)}));var nf=E(()=>({processId:S(1),kc:V(2)}));var Un=H(()=>[1,2,3,4]);var rf=E(()=>({processId:S(1),xf:V(2),state:C(3,Un)}));var Cf=class{async requestClose(a){a=Tb(Mn.C(a[0]),a[1]);a=await this.A.request("APP_PROCESS_V1_REQUEST_CLOSE",a);if(!a.ok)throw a.error;}async getInfo(){var a=await this.A.request("APP_PROCESS_V1_GET_INFO");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"APP_PROCESS_V1_GET_INFO: Response cannot be empty"});var b=a.value;if(!tf(b))throw new I({code:"INTERNAL_ERROR",message:"Could not convert object into GetInfoResponse"});a=b[1];b=b[2];if(void 0===a)throw new I({code:"INTERNAL_ERROR",
message:"Missing AppProcessInfo in GetInfoResponse"});return[Jn.D(a),b]}async broadcastMessage(a){a=Tb(...a);a=await this.A.request("APP_PROCESS_V1_BROADCAST_MESSAGE",a);if(!a.ok)throw a.error;}constructor(a){this.A=a}};var Df=class{B(a){this.j.B(X({ea:"platform",client:"AppProcess",method:a}))}constructor(a,b,c,d){this.ua=b;this.T=c;this.j=d;this.Qc=new Map;this.Wd=new Set;this.current={getInfo:()=>{this.B("current.getInfo");return this.ua},requestClose:async e=>{this.B("current.requestClose");if("selected_image_overlay"!==this.ua.surface)throw new I({code:"BAD_REQUEST",message:`requestClose is not implemented for surface ${this.ua.surface}`});await this.l.requestClose([{params:{reason:Bf(e.reason)},Pf:this.ua.processId},
e])},setOnDispose:e=>{this.B("current.setOnDispose");if("selected_image_overlay"!==this.ua.surface)throw new I({code:"BAD_REQUEST",message:`setOnDispose is not implemented for surface ${this.ua.surface}`});this.nf=e;sf(this.l,{processId:this.ua.processId,state:3,xf:!0});return()=>new Promise(f=>{this.nf=void 0;sf(this.l,{processId:this.ua.processId,state:3,xf:!1});f()})}};this.requestClose=async(e,f)=>{this.B("requestClose");await this.l.requestClose([{params:{reason:Bf(f.reason)},Pf:e},f])};this.registerOnStateChange=
(e,f)=>{this.B("registerOnStateChange");if(e===this.ua.processId)throw new I({code:"BAD_REQUEST",message:"Cannot subscribe to state changes of the current process"});const g=this.Qc.get(e);g?g.add(f):this.Qc.set(e,new Set([f]));of(this.l,{processId:e,kc:!0});return()=>new Promise(h=>{this.Qc.get(e).delete(f);of(this.l,{processId:e,kc:!1});h()})};this.registerOnMessage=e=>{this.B("registerOnMessage");this.Wd.add(e);qf(this.l,{kc:!0});return()=>new Promise(f=>{this.Wd.delete(e);qf(this.l,{kc:!1});f()})};
this.broadcastMessage=e=>{this.B("broadcastMessage");this.l.broadcastMessage([void 0,e])};this.l=new Cf(a);xf(a,{mh:async e=>{const f=this.Qc.get(e[0].sourceId);null===f||void 0===f?void 0:f.forEach(g=>{g({state:yf(e)})})},Nh:async([e,f])=>{var g;if("CLOSING"===e.type&&e.sourceId===this.ua.processId){if(null===(g=this.nf)||void 0===g)f=void 0;else{var h=g.call,l=Object,n=l.assign;a:switch(e=e.params.reason,e){case 1:e="completed";break a;case 2:e="aborted";break a;default:throw new m(e);}f=h.call(g,
this,n.call(l,{},f,{reason:e}))}await f}},Mh:async e=>{const [f,g]=e;this.Wd.forEach(h=>{h(Object.assign({},{appProcessId:f.processId,surface:zf(f.surface)}),g)})}})}};var Ff=class{constructor(a){this.ua=a;this.getInfo=()=>this.ua}};var Vn=E(()=>({url:S(1)}));var Wn=E(()=>Object.assign({},{},{status:r(1,"COMPLETED")}));var Xn=E(()=>Object.assign({},{},{status:r(2,"ABORTED")}));var Yn=G(()=>({status:[1,Wn,2,Xn]}),()=>({}));var Zn=class{async requestOpenExternalUrl(a){a=Vn.C(a);a=await this.A.request("PLATFORM_V1_REQUEST_OPEN_EXTERNAL_URL",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"PLATFORM_V1_REQUEST_OPEN_EXTERNAL_URL: Response cannot be empty"});return Yn.D(a.value)}constructor(a){this.A=a}};var If=class{B(a){this.j.B(X({ea:"platform",client:"Platform",method:a}))}constructor(a,b,c){this.info=b;this.j=c;this.requestOpenExternalUrl=async d=>{this.B("requestOpenExternalUrl");let e;try{e=new URL(d.url)}catch(f){throw new I({code:"BAD_REQUEST",message:"Invalid URL."});}if("https:"!==e.protocol.toLowerCase())throw new I({code:"BAD_REQUEST",message:`Received a request to open an external URL with '${e.protocol}' protocol. Only URLs with '${"https:"}' protocol are supported.`});return{status:(await this.l.requestOpenExternalUrl(d)).status}};
this.getPlatformInfo=()=>{this.B("getPlatformInfo");return this.info};this.l=new Zn(a)}};var $n=E(()=>({}));var ao=E(()=>Object.assign({},{},{status:r(1,"COMPLETED")}));var bo=E(()=>Object.assign({},{},{status:r(2,"ABORTED")}));var co=G(()=>({status:[1,ao,2,bo]}),()=>({}));var eo=E(()=>({token:S(1)}));var fo=class{async requestOauth(a){a=a?$n.C(a):void 0;a=await this.A.request("TEMP_GOOGLE_ADS_REQUEST_OAUTH_V1",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"TEMP_GOOGLE_ADS_REQUEST_OAUTH_V1: Response cannot be empty"});return co.D(a.value)}async getOauthToken(){const a=await this.A.request("TEMP_GOOGLE_ADS_GET_OAUTH_TOKEN_V1");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"TEMP_GOOGLE_ADS_REQUEST_OAUTH_V1: Response cannot be empty"});
return eo.D(a.value)}constructor(a){this.A=a}};var Kf=class{B(a){this.j.B(X({ea:"tmp_google_ads_auth",client:"TmpGoogleAdsAuth",method:a}))}constructor(a,b){this.j=b;this.requestOauth=async c=>{this.B("requestOauth");try{return await this.l.requestOauth(c)}catch(d){if(d instanceof I)throw d;throw new I({code:"INTERNAL_ERROR",message:"Something unexpected happened during oauth"});}};this.getOauthToken=async()=>{this.B("getOauthToken");try{const c=await this.l.getOauthToken();return null===c||void 0===c?void 0:c.token}catch(c){if(c instanceof I)throw c;
throw new I({code:"INTERNAL_ERROR",message:"Something unexpected happened during while requesting an OAuth token"});}};this.l=new fo(a)}};var go=E(()=>({context:U(1)}));var ho=E(()=>Object.assign({},{},{type:r(1,"AUTHENTICATED")}));var io=E(()=>Object.assign({},{},{type:r(2,"CANCELED")}));var jo=E(()=>Object.assign({},{},{type:r(3,"DENIED"),details:Rj(1)}));var ko=E(()=>Object.assign({},{},{type:r(4,"FAILED"),Ua:S(1),Ch:Rj(2)}));var lo=G(()=>({type:[1,ho,2,io,3,jo,4,ko]}),()=>({}));var mo=E(()=>({token:S(1)}));var no=E(()=>({token:S(1)}));var oo=E(()=>({key:S(1),value:S(2)}));var po=E(()=>({queryParams:y(1,oo),scope:U(2)}));var qo=E(()=>Object.assign({},{},{status:r(1,"COMPLETED"),scope:S(1)}));var ro=E(()=>Object.assign({},{},{status:r(2,"ABORTED")}));var so=G(()=>({status:[1,qo,2,ro]}),()=>({}));var to=E(()=>Object.assign({},{},{status:r(1,"AUTHORIZED"),accessToken:S(1)}));var uo=E(()=>Object.assign({},{},{status:r(2,"NOT_AUTHORIZED")}));var vo=G(()=>({status:[1,to,2,uo]}),()=>({}));var wo=class{async authenticate(a){a=go.C(a);a=await this.A.request("AUTH_V1_AUTHENTICATE",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"AUTH_V1_AUTHENTICATE: Response cannot be empty"});return lo.D(a.value)}async requestUpgrade(){const a=await this.A.request("AUTH_V1_REQUEST_UPGRADE");if(!a.ok)throw a.error;}async getUserCapabilitiesToken(){const a=await this.A.request("AUTH_V1_GET_USER_CAPABILITIES_TOKEN");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",
message:"AUTH_V1_GET_USER_CAPABILITIES_TOKEN: Response cannot be empty"});return mo.D(a.value)}async getCanvaUserToken(){const a=await this.A.request("AUTH_V1_GET_CANVA_USER_TOKEN");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"AUTH_V1_GET_CANVA_USER_TOKEN: Response cannot be empty"});return no.D(a.value)}async requestOauth(a){a=po.C(a);a=await this.A.request("AUTH_V1_REQUEST_OAUTH",a);if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",
message:"AUTH_V1_REQUEST_OAUTH: Response cannot be empty"});return so.D(a.value)}async getOauthAccessToken(){const a=await this.A.request("AUTH_V1_GET_OAUTH_ACCESS_TOKEN");if(!a.ok)throw a.error;if(void 0===a.value)throw new I({code:"INTERNAL_ERROR",message:"AUTH_V1_GET_OAUTH_ACCESS_TOKEN: Response cannot be empty"});return vo.D(a.value)}constructor(a){this.A=a}};var ej=class{async authenticate(a={}){this.B("authenticate");Of(this.T,{Qb:"method",Rb:"authenticate",Yb:"requestAuthentication"});try{const b=await this.l.authenticate(new go(a));return Mf(b)}catch(b){if(b instanceof I)throw b;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while authenticating: ${b instanceof Error?b.message:b}`});}}async requestAuthentication(a={}){this.B("requestAuthentication");if(null!=a&&"object"!==typeof a)throw new I({code:"BAD_REQUEST",message:`Invalid authentication request. Expected an object but received '${typeof a}'.`});
var b=a.context;if(null!=b){if("string"!==typeof b)throw new I({code:"BAD_REQUEST",message:`Invalid authentication context. Expected a string but received '${typeof b}'.`});if(!(32>=b.length))throw new I({code:"BAD_REQUEST",message:`Authentication context can be at most '${32}' characters. Received context of length '${b.length}'.`});}try{const d=await this.l.authenticate(new go(a)),e=Mf(d);a:{const f=e.type;switch(f){case "authenticated":var c={status:"COMPLETED"};break a;case "canceled":c={status:"ABORTED"};
break a;case "denied":c={status:"DENIED",details:e.details};break a;case "failed":const g=e.reason.type;switch(g){case "invalid_context":throw new I({code:"BAD_REQUEST",message:"Invalid authentication context provided."});case "invalid_options":throw new I({code:"BAD_REQUEST",message:"Invalid authentication request."});case "invalid_redirect_parameters":throw new I({code:"BAD_EXTERNAL_SERVICE_RESPONSE",message:"Invalid redirect parameters received from app backend."});case "invalid_redirect_url":throw new I({code:"FAILED_PRECONDITION",
message:"Invalid redirect URL received. Please make sure a valid redirect URL has been provided via the developer portal."});case "offline":throw new I({code:"USER_OFFLINE",message:"Unable to authenticate user as they are offline."});case "popup_is_not_available":throw new I({code:"PERMISSION_DENIED",message:"Unable to open popup dialog as it was blocked either by the user or their browser."});case "signature_verification_failed":throw new I({code:"INTERNAL_ERROR",message:"Signature verification is no longer supported. If issue persists please report to Canva."});
case "get_connection_status_failed":throw new I({code:"INTERNAL_ERROR",message:"Something went wrong while authenticating."});case "fetch_redirect_url_failed":throw new I({code:"INTERNAL_ERROR",message:"Something went wrong while authenticating."});case "unknown":throw new I({code:"INTERNAL_ERROR",message:"Something went wrong while authenticating."});default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected auth failure reason type: '${g}'.`});}default:throw new J({code:"INTERNAL_ERROR",message:`Unexpected auth result: '${f}'.`});
}}return c}catch(d){if(d instanceof I)throw d;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while authenticating: ${d instanceof Error?d.message:d}`});}}async getCanvaUserToken(){this.B("getCanvaUserToken");try{return(await this.l.getCanvaUserToken()).token}catch(a){if(a instanceof I)throw a;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while retrieving the Canva Token: ${a instanceof Error?a.message:a}`});}}async getUserCapabilitiesToken(){this.B("getUserCapabilitiesToken");
try{return(await this.l.getUserCapabilitiesToken()).token}catch(a){if(a instanceof I)throw a;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while retrieving the User Capabilities Token: ${a instanceof Error?a.message:a}`});}}async requestUpgrade(){this.B("requestUpgrade");try{return await this.l.requestUpgrade()}catch(a){if(a instanceof I)throw a;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while requesting to upgrade: ${a instanceof Error?a.message:
a}`});}}async requestOauth({scope:a="",queryParams:b={}}={}){this.B("requestOauth");const c=null!==b&&void 0!==b?b:{};if("string"!==typeof(null!==a&&void 0!==a?a:""))throw new I({code:"BAD_REQUEST",message:"Invalid scope"});if("object"!==typeof c)throw new I({code:"BAD_REQUEST",message:"Invalid query parameters"});try{return await this.l.requestOauth(new po({queryParams:Nf(b),scope:a}))}catch(d){if(d instanceof I)throw d;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while requesting OAuth: ${d instanceof
Error?d.message:d}`});}}async getOauthAccessToken(){this.B("getOauthAccessToken");try{return this.l.getOauthAccessToken()}catch(a){if(a instanceof I)throw a;throw new I({code:"INTERNAL_ERROR",message:`Something unexpected happened while getting OAuth access token: ${a instanceof Error?a.message:a}`});}}B(a){this.j.B(X({ea:"user",client:"Authentication",method:a}))}constructor(a,b,c){this.zb=a;this.T=b;this.j=c;this.l=new wo(a)}};var dj=class{constructor(a,b){this.Jc=a;this.j=b;this.Vb=(c,d,e)=>{console.warn(`${"Apps SDK"}: ${null!=e?`The property "${e}" in the options for "${d}"`:`The method ${d}`} is currently ${"preview"===c?"in "+c:c} and cannot be used in production code. While you can experiment with it in your apps, please note that apps using ${c} methods cannot be submitted for review until a stable version is released.`);hf(this.Jc,new gf({Eh:c,methodName:d,propertyName:e})).catch(f=>this.j.F(`Encountered an error while registering unstable api usage: ${f}`))}}};var Qf=class{constructor(a,b){this.port=a;this.j=b;this.send=c=>{try{return this.port.postMessage(c),Ba()}catch(d){return this.j.F(d),Ca(d)}};this.handle=c=>{if(this.handler)return Ca(new I({code:"INTERNAL_ERROR",message:"a handler for Bus has already been defined"}));this.handler=c;return Ba()};this.qh=c=>{this.j.F(c)};this.ph=({data:c})=>{if(this.handler)if(c)try{this.handler(c)}catch(d){this.j.F(d)}else this.j.error(new I({code:"INTERNAL_ERROR",message:"missing data in 'MessageEvent'"}));else this.j.error(new I({code:"INTERNAL_ERROR",
message:"no handler configured for bus"}))};this.port.onmessage=this.ph;this.port.onmessageerror=this.qh}};var xo=new I({code:"INTERNAL_ERROR",message:"Comms promise timed out."}),Vf=class{reset(a){a&&(this.mc=a);this.setTimeout()}resolve(a){clearTimeout(this.ze);this.Hh(a)}reject(a){clearTimeout(this.ze);this.yf(a)}promise(){return this.p}setTimeout(){clearTimeout(this.ze);this.ze=setTimeout(()=>{this.yf(xo)},this.mc)}constructor(a){this.mc=a;this.p=new Promise((b,c)=>{this.Hh=b;this.yf=c});this.setTimeout()}};var Rf=class{constructor(a,b){this.send=a;this.j=b;this.Gh=Sa;this.ie=new Map;this.request=async(c,d)=>{const e=new Vf(5E3);var f=this.Gh();this.ie.set(f,e);d={type:"request",requestId:f,path:c,payload:d};f=this.send(d);if(!f.ok)return this.j.F(f.error,{J:"unable to send request",tags:new Map([["type",d.type],["path",c]])}),f;try{const g=await e.promise();return Ba(g)}catch(g){return Ca(g)}};this.$g=c=>{const d=c.requestId,e=c.type,f=this.ie.get(d);if(f)switch(e){case "response":f.resolve(c.payload);
this.ie.delete(d);break;case "ack":f.reset(2E4);break;case "error":f.reject(new I({code:c.code,message:c.message}));break;default:throw new m(c);}else this.j.error("request has already been handled and resolved or was not sent from this client",{tags:new Map([["type",e],["requestId",`${d}`]])})}}};var yo=()=>"Something went wrong on our end, if this issue persists please contact us.",Sf=class{constructor(a,b){this.jc=a;this.j=b;this.requestHandler=new Map;this.handle=(c,d)=>{if(this.requestHandler.has(c))throw new I({code:"INTERNAL_ERROR",message:`Handler for '${c}' is already defined.`});this.requestHandler.set(c,d)};this.ah=async c=>{const d=c.requestId,e=c.path;c=c.payload;const f=this.requestHandler.get(e);if(f){this.jc({type:"ack",requestId:d});var g=setInterval(()=>this.jc({type:"ack",
requestId:d}),9E3);try{var h=await f(c);clearInterval(g);this.jc({type:"response",requestId:d,payload:h})}catch(l){clearInterval(g),h={code:"INTERNAL_ERROR",message:yo()},l instanceof I&&(h.code=l.code,"INTERNAL_ERROR"===l.code?(console.error(l.message),h.message=yo()):h.message=l.rawMessage),h=this.jc(Object.assign({},{type:"error",requestId:d},h)),h.ok||this.j.Ob(h.error,{J:"unable to send error response",tags:new Map([["type","request"],["path",e]])})}}else h=this.jc({type:"error",requestId:d,
code:"INTERNAL_ERROR",message:`No request handler configured for path: "${e}".`}),h.ok||this.j.Ob(h.error,{J:"unable to send error response",tags:new Map([["type","request"],["path",e]])})}}};var Tf=(a,b)=>c=>{switch(c.type){case "ack":case "error":case "response":a.$g(c);break;case "request":b.ah(c);break;default:throw new m(c);}};var Wf=new I({code:"INTERNAL_ERROR",message:"Iframe connection timed out after 4 retries"});uj(null);var Zf=new WeakMap,$f=class extends Error{constructor(a){super(a);this.name="MakeObservableError";Object.setPrototypeOf(this,$f.prototype)}};var zo,hg=a=>null!==(zo=null===a||void 0===a?void 0:a.replace(/^\s*:global\(\.(.+?)\)\s*$/,"$1"))&&void 0!==zo?zo:"",gg,jg,Ao=class{If(a){this.parent=a}Vh(a){this.De=a}get appearance(){var a,b;return null!==(b=this.De)&&void 0!==b?b:null===(a=this.parent)||void 0===a?void 0:a.appearance}Jf(a){this.ye=a}get Ed(){var a;const b=this.appearance;if(null!=b){var c;return null!==(c=this.ye[b])&&void 0!==c?c:null===(a=this.parent)||void 0===a?void 0:a.Ed}}constructor(){cg(this,{parent:wj.ref,De:wj.ref,ye:wj.deep,
If:dg,Vh:dg,appearance:xj,Jf:dg,Ed:xj});this.ye={}}},Bo=class{get classNames(){var a=this.store.Ed;if(null==a)a=[];else{const b=ig();a=[kg(),ia(b.get(a))]}return a}get className(){const a=this.classNames;if(0!==a.length)return Fj(a)}get mode(){switch(this.store.appearance){case "dark":case "light":return"modern";case "classicDark":case "classicLight":return"classic";case void 0:break;default:throw new m(this.store.appearance);}}constructor(a){cg(this,{classNames:xj,className:xj,mode:xj});this.store=
a}},Co=new Ao,Do=new Bo(Co),Eo=uj({store:Co,data:Do});yj(function(a){var b=Object.assign({},a);a=a.children;b=(delete b.children,b);b=ng(b);const [c]=sj(()=>{const e=new Ao;return{store:e,data:new Bo(e)}}),{store:d}=tj(Eo);c.store.If(d);c.store.Jf(b);return qj(Eo.Provider,{value:c,children:a(c.data)})});yj(function(a){({children:a}=a);const b=tj(Eo).data;return a(b)});var Fo=H(()=>[1,2],1);var Go=H(()=>[1,"ADAPTIVE",2,"LIGHT",3,"DARK"]);var Ho=H(()=>[0,1,2]);var Io=E(()=>({Mi:V(1),direction:C(2,Fo),Ii:V(3),cj:V(4),theme:Ia(7,Go),Si:W(8),Ri:V(13),pi:Ia(11,Ho),Hi:V(9),Rg:V(10),bj:V(14)}));var rg=!1;if(null!=("undefined"===typeof window?void 0:window))try{rg=ma("ui",Io.D,{Je:!0}).Rg}catch(a){if(!(a instanceof TypeError))throw a;};var Jo,Ko="undefined"===typeof window?void 0:window,qg=(null===Ko||void 0===Ko?void 0:null===(Jo=Ko.cmsg)||void 0===Jo?void 0:Jo.strings)||{},mj=new Map,Lo,pg=()=>{var a;return Lo=Lo||(null===Ko||void 0===Ko?void 0:null===(a=Ko.cmsg)||void 0===a?void 0:a.locale)||"en"},oj={date:{weekday:{weekday:"long"},mediumNoYear:{month:"short",day:"numeric"},mediumNoYearUTC:{month:"short",day:"numeric",timeZone:"UTC"},monthUTC:{month:"long",timeZone:"UTC"},shortMonthUTC:{month:"short",timeZone:"UTC"},monthYear:{month:"long",
year:"numeric"},monthYearUTC:{month:"long",year:"numeric",timeZone:"UTC"},longNoYear:{month:"long",day:"numeric"},longUTC:{month:"long",day:"numeric",year:"numeric",timeZone:"UTC"}}};var Mo=H(()=>[1,"DEVELOPMENT",2,"APPROVED",3,"SUBMITTED",4,"REJECTED",5,"RELEASED",6,"SUPERSEDED",7,"DISABLED"]);var No=E(()=>({eg:S(1),appId:S(5),appName:S(6),Za:C(10,Mo),Lb:V(8),locale:U(2),country:U(3),Ve:U(4),Sb:V(11),Zg:Rj(12),Ni:V(13)}));var Oo,Po;Po=null!==(Oo=":global(.cc24)".replace(/^\s*:global\(\.(.+?)\)\s*$/,"$1"))&&void 0!==Oo?Oo:"";var ij=class{async getUiContext(){this.B("getUiContext");const a=await this.Ca.getUiContext();a.disableUiRefresh||this.Eg();return a}onUiContextChange(a){mf(this.A,{Sh:a});ff(this.Ca)}registerAppUiKitVersion(a){return this.Ca.registerAppUiKitVersion(a)}B(a){this.j.B(X({ea:"ui_kit",client:"UiKit",method:a}))}constructor(a,b){this.A=a;this.j=b;this.Eg=()=>{window.document.documentElement.classList.add(Po)};this.Ca=new Hf(a)}};var Gg=()=>{Clipboard.prototype.write;vg(Clipboard.prototype,"write",async function(){return Promise.reject(new I({code:"NOT_ALLOWED",message:sg("TRCV3w")}))})};var Eg=({Sb:a,window:b})=>{a||(a=Object.getOwnPropertyDescriptor(b.Document.prototype,"cookie"))&&a.configurable&&(Object.defineProperty(b.Document.prototype,"cookie",Object.assign({},a,{set:()=>{console.warn("Canva apps setting cookies is not yet supported.")}})),wg(b,"cookieStore"),wg(b,"CookieStore"))};var Bg=class{start(){Ze(this.Pa.Ca,new Ye({tb:this.tb})).catch(a=>this.Pa.j.F(a,{J:"unable to track native fetch call start"}))}complete(a){this.span&&this.span.end(199<a&&300>a?"ok":"error",new Map([["response_code",a]]));const b=Date.now()-this.Xh;af(this.Pa.Ca,new $e({tb:this.tb,durationMs:b,Fb:a})).catch(c=>this.Pa.j.kd(c,{J:"unable to track native fetch call"}))}constructor(a,b,c){this.tb=a;this.Pa=b;this.Xh=Date.now();switch(a){case 1:a="fetch";break;case 2:a="xml_http";break;default:throw new m(a);
}5!==b.Za||b.Lb||(this.span=b.Ha.Zc("fetch",new Map([["net.peer.name",c.hostname],["apps_sdk_app.id",b.appId],["apps_sdk_app.name",b.appName],["apps_sdk_app.approval_status",Mo.C(b.Za)],["browser_api",a]])))}};var Qo={AAF8xDuFUNg:[{name:"create-upscale-image",Fb:200,requestUrl:"https://dj7jvjeb1v6pc.cloudfront.net/prod/a1d-image-upscale/upscale",Vc:"POST",Uc(a){if("string"===typeof a)try{if("create-upscale-image"===JSON.parse(a).operation)return!0}catch(b){}return!1}}]},Fg=class{track(a){var b=this.config[this.appId];b&&(b=b.find(c=>{try{const d=c.Uc||(()=>!0);return c.Fb===a.Fb&&c.requestUrl===a.requestUrl&&c.Vc===a.Vc&&d(a.Uc)}catch(d){this.j.kd(d,{J:"requestBody unexpectedly failed"})}return!1}))&&ef(this.Ca,
new df({ec:b.name})).catch(c=>this.j.kd(c,{J:"unable to track developer server processing request"}))}constructor(a,b,c){this.appId=a;this.Ca=b;this.j=c;this.config=Qo}};var Hg=async({Ca:a,j:b})=>{({xe:a}=await a.xe());if(a){if(window.localStorage)try{window.localStorage.clear()}catch(c){b.Jb(c)}if(window.sessionStorage)try{window.sessionStorage.clear()}catch(c){b.Jb(c)}if(window.indexedDB&&!window.indexedDB.databases)try{window.location.origin.includes("localhost")&&console.warn("\n      WARNING: If you're Proxying the App Sandbox Editor webpage locally on the same origin \n\n               as the Editor (ie localhost:9090 for both the Editor and App Sandbox) you will increase \n\n               the likelihood of IndexDB operations timing out as both the editor \n\n               and App Sandbox share the same web storage layers. \n\n\n               To avoid this, run the Editor and the App Sandbox development environments on \n\n               different ports. Such as running the Editor on port 9090, and the App Sandbox on 9091.\n      ");
const c=await window.indexedDB.databases();for(const d of c)await Cg(d)}catch(c){b.Jb(c)}}};var Ro=!1,Xi=class{setTag(a,b){this.tags[a]=b}Gf(){}Fe(){}Nb(a){return new Xi(this,a)}B(a){this.console.log("breadcrumb added",a)}setContext(a){this.context=a}Ob(a,b){this.console.error(...Mg(this,"critical",a,b))}error(a,b){this.console.error(...Mg(this,"error",a instanceof Error?a:Error(a),b))}F(a,b){this.console.error(...Mg(this,"error",a,b))}kd(a,b){this.console.warn(...Mg(this,"warning",a,b))}Jb(a,b){this.console.warn(...Mg(this,"warning",a,b))}info(a,b){this.console.info(...Mg(this,"info",a,
b))}debug(a,b){this.console.debug(...Mg(this,"debug",a,b))}toJSON(){return{name:this.name,context:this.context,tags:this.tags}}constructor(a=console,b="default"){this.name=b;this.tags={};if(!Ro&&"object"===typeof window){const c=window.onerror;window.onerror=(...e)=>{"function"===typeof c&&c(...e);console.error("unhandled error:",...e)};const d=window.onunhandledrejection;window.onunhandledrejection=e=>{"function"===typeof d&&d(e);console.error("[ConsoleErrorClient]: Unhandled promise rejection",
e)};Ro=!0}k(-1===b.indexOf("."),"name must not contain a dot");a instanceof Xi?(this.name=`${a.name}.${b}`,this.console=a.console):this.console=a}};var Ah;__c.Kh=class extends Error{constructor(a,b){super(a);this.sampleRate=b;this.sampleRate=Math.min(Math.max(0,b),1)}};
Ah=class{setupOnce(a,b){a((c,d)=>{const e=b().getIntegration(Ah);if(!e)return c;if(!(Math.random()<Rg(e,null===d||void 0===d?void 0:d.originalException)))return null;d={sampleRate:Rg(this,null===d||void 0===d?void 0:d.originalException)};c.extra=null!=c.extra?Object.assign({},c.extra,d):d;c.tags=null!=c.tags?Object.assign({},c.tags,d):d;return c})}constructor(a){this.Re=a;this.name=Ah.id;this.Re=Math.min(Math.max(0,a),1)}};Ah.id="Sampling";var So=class{constructor(){this.Df={}}};var Eh=class{setupOnce(a,b){a(c=>{const d=b().getIntegration(Eh);return d?ah(d,c)?null:c:c})}constructor(a=[]){this.Zf=a;this.name=Eh.id}};Eh.id="FilterErrors";var Bh=class{setupOnce(a,b){a(c=>{b().getIntegration(Bh);return c})}constructor(){this.name=Bh.id}};Bh.id="HostRpcServiceErrors";var mh=class extends Error{constructor(a){var b=a.message,c=a.statusCode,d=a.requestUrl;let e=To[c];e||(e=400<=c&&500>c?"unknown client error":500<=c&&600>c?"unknown server error":"unknown error");super(b&&b!==e?b:d?`HTTP ${e} on: ${d.split("?")[0]}`:`HTTP ${e}`);this.statusCode=a.statusCode;this.requestId=a.requestId;this.requestUrl=a.requestUrl;this.endUserMessage=a.endUserMessage;this.body=a.body;Object.setPrototypeOf(this,mh.prototype)}},To={[0]:"client timeout",[400]:"bad request",[401]:"unauthorized",
[403]:"forbidden",[404]:"not found",[409]:"version conflict",[418]:"CSRF token expired",[429]:"too many requests",[500]:"internal server error",[501]:"not implemented",[503]:"service unavailable",[504]:"gateway timeout"},Uo=class extends mh{},Vo=class extends mh{},Wo=class extends mh{constructor(a={}){super(Object.assign({},a,{statusCode:0}));this.name="HttpTimeoutError";Object.setPrototypeOf(this,Wo.prototype)}},Mh=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:400}));this.name=
"HttpBadRequestError";Object.setPrototypeOf(this,Mh.prototype)}},Nh=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:401}));this.name="HttpUnauthorizedError";Object.setPrototypeOf(this,Nh.prototype)}},Oh=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:403}));this.name="HttpForbiddenError";Object.setPrototypeOf(this,Oh.prototype)}},Ph=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:404}));this.name="HttpNotFoundError";Object.setPrototypeOf(this,
Ph.prototype)}},Qh=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:409}));this.name="HttpConflictError";Object.setPrototypeOf(this,Qh.prototype)}},Rh=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:418}));this.name="CsrfTokenExpiredError";Object.setPrototypeOf(this,Rh.prototype)}},Sh=class extends Uo{constructor(a={}){super(Object.assign({},a,{statusCode:429}));this.name="HttpTooManyRequestsError";Object.setPrototypeOf(this,Sh.prototype)}},Wh=class extends Uo{constructor(a){k(400<=
a.statusCode&&500>a.statusCode);super(a);this.name="UnknownClientError";Object.setPrototypeOf(this,Wh.prototype)}},Th=class extends Vo{constructor(a={}){super(Object.assign({},a,{statusCode:500}));this.name="HttpInternalServerError";Object.setPrototypeOf(this,Th.prototype)}},Uh=class extends Vo{constructor(a={}){super(Object.assign({},a,{statusCode:503}));this.name="HttpServiceUnavailableError";Object.setPrototypeOf(this,Uh.prototype)}},Vh=class extends Vo{constructor(a={}){super(Object.assign({},
a,{statusCode:504}));this.name="HttpGatewayTimeout";Object.setPrototypeOf(this,Vh.prototype)}},Xh=class extends Vo{constructor(a){k(500<=a.statusCode&&600>a.statusCode);super(a);this.name="UnknownServerError";Object.setPrototypeOf(this,Xh.prototype)}},Yh=class extends mh{constructor(a){super(a);this.name="UnknownHttpError";Object.setPrototypeOf(this,Yh.prototype)}};var Ch=class{setupOnce(a,b){a((c,d)=>{b().getIntegration(Ch)&&d&&d.originalException instanceof mh&&(d=d.originalException,c.tags||(c.tags={}),Object.assign(c.tags,Object.assign({},{http_service_error:!0,statusCode:d.statusCode},d.requestId?{requestId:d.requestId}:{})),d.requestUrl&&(c.tags.phase=d.requestUrl.includes("/csrf3/")?"csrf":"request"));return c})}constructor(){this.name=Ch.id}};Ch.id="HttpServiceErrors";var dh={now:()=>Date.now()};var Xo=class{add(a){this.Pb=this.Wg(this.Pb);this.list[this.Pb]=a}find(a){let b=this.Pb;do{if(this.list[b]&&a(this.list[b]))return this.list[b];b=this.Yg(b)}while(b!==this.Pb)}constructor(){this.zd=10;this.Pb=0;this.Wg=a=>(a+1)%this.zd;this.Yg=a=>(a+this.zd-1)%this.zd;this.list=Array(10)}},zh=class{setupOnce(a,b){a(c=>{const d=b().getIntegration(zh);d&&(eh(d,c)?c=null:d.history.add({event:c,timestamp:dh.now()}));return c})}constructor(a){this.ci=a;this.name=zh.id;this.history=new Xo}};zh.id="NoSuccessiveEvent";var wh=class{setupOnce(a,b){a(c=>{var d,e;if(!b().getIntegration(wh))return c;var f;c.tags=null!==(f=c.tags)&&void 0!==f?f:{};c.tags["prior.unhandled.error.count"]=this.zf;(null===(e=c.exception)||void 0===e?0:null===(d=e.values)||void 0===d?0:d.some(g=>{var h;return!1===(null===(h=g.mechanism)||void 0===h?void 0:h.handled)}))&&this.zf++;return c})}constructor(){this.name=wh.id;this.zf=0}};var Dh=class{setupOnce(a,b){a(c=>{const d=b().getIntegration(Dh);return d?jh(d,c):c})}pe(a){var b,c,d;const e=(null===a||void 0===a?0:a.url)?ih(this,null===a||void 0===a?void 0:a.url):void 0,f={};if(null===a||void 0===a?0:null===(b=a.headers)||void 0===b?0:b["User-Agent"])f["User-Agent"]=null===a||void 0===a?void 0:a.headers["User-Agent"];if(null===a||void 0===a?0:null===(c=a.headers)||void 0===c?0:c.Referer)f.Referer=ih(this,null===a||void 0===a?void 0:null===(d=a.headers)||void 0===d?void 0:d.Referer);
return{url:e,headers:f}}constructor(a,b){this.$f=a;this.location=b;this.name=Dh.id}};Dh.id="UrlScrubber";var kh=[function(a){if(a=/canvaeditor\/(\d+\.\d+\.\d+)/.exec(a))return{name:"mobile_app_version",value:a[1]}},function(a){if(a=/com.canva.editor\s\(version\/(\d+\.\d+\.\d+)/.exec(a))return{name:"mobile_app_version",value:a[1]}}];var Fh=["TimeoutError","HttpTimeoutError",/^ResizeObserver loop/,/^WHEN_CANCELLED$/,"ChunkLoadError",/^NetworkError: Failed to execute 'importScripts' on 'WorkerGlobalScope':/,/Failed to register a ServiceWorker.*(The document is in an invalid state|An unknown error occurred when fetching the script|Failed to access storage|The URL protocol of the current origin \('null'\) is not supported|Timed out while trying to start the Service Worker)\.$/,/^(Can't find variable: indexedDB|Internal error opening backing store for indexedDB.open.|Failed to execute 'transaction' on 'IDBDatabase': The database connection is closing.|Encountered full disk while opening backing store for indexedDB.open.|Transaction was aborted|An internal error was encountered in the Indexed Database server)/],
Yi=class{pe(a){var b,c,d;if(!a.url)return{headers:{"User-Agent":null!==(d=null===a||void 0===a?void 0:null===(b=a.headers)||void 0===b?void 0:b["User-Agent"])&&void 0!==d?d:""}};b=/^(\/design\/[a-zA-Z0-9_-]+\/)([a-zA-Z0-9_-]{22})(.*)/;d=new URL(a.url);d.search="";b.test(d.pathname)&&(d.pathname=d.pathname.replace(b,"$1<REDACTED>$3"));var e;return{url:d.toString(),headers:{"User-Agent":null!==(e=null===a||void 0===a?void 0:null===(c=a.headers)||void 0===c?void 0:c["User-Agent"])&&void 0!==e?e:""}}}Fe(a){this.vd.push(a)}Nb(a){return new Yi(this.L,
this.componentStack.concat(a),this.Md,this.W,this.Qe,this.vd,!0,this.Eb)}setContext({user:a,locale:b,jj:c}){var d,e;null===(e=this.W)||void 0===e?void 0:null===(d=e.getCurrentHub())||void 0===d?void 0:d.configureScope(f=>{a&&(f.setUser(a),f.setExtra("isAnonymousUser",!1));b&&f.setTag("locale",b);null===c||void 0===c?void 0:c.forEach((g,h)=>f.setExtra(h,g))})}setTags(a){for(const b of a)this.setTag(b.name,b.value)}setTag(a,b){if(null!=this.W){{var c=32>=a.length;const d=200>=b.length;c&&d?c=Ba(!0):
(c=(c?"":"Key name length cannot exceed 32 characters.\n")+(d?"":"Key value length cannot exceed 200 characters.\n"),c=Ca(Error(c+`Tag: ${a}:${b}`)))}c.ok?this.W.setTag(a,b):Hh(this,c.error)}}setExtras(a){for(const b of a)this.setExtra(b.name,b.value)}setExtra(a,b){null!=this.W&&this.W.setExtra(a,Pg(b))}Gf(a){this.Md=a}B(a){var b;null!=this.W&&(null===(b=this.W)||void 0===b?void 0:b.addBreadcrumb(Object.assign({},a,{level:a.level})))}Ob(a,b){Jh(this,"fatal",a,b)}error(a,b){Jh(this,"error",a instanceof
Error?a:Error(a),b)}F(a,b){Jh(this,"error",a,b)}kd(a,b){Jh(this,"warning",a instanceof Error?a:Error(a),b)}Jb(a,b){Jh(this,"warning",a,b)}info(a,b){Jh(this,"info",a instanceof Error?a:Error(a),b)}debug(a,b){Jh(this,"debug",a instanceof Error?a:Error(a),b)}constructor(a,b=[],c=[],d=self.Sentry,e=new So,f=[],g=!1,h){var l=self;"object"===typeof l.Ce&&"function"===typeof l.Ce.Xg?(l=l.Ce.Xg(),l="string"===typeof l?l:void 0):l=void 0;this.L=a;this.componentStack=b;this.Md=c;this.W=d;this.Qe=e;this.vd=
f;this.Eb=h;this.allowUrls="/dist/renderer/ canva.com canva.cn canva-dev.com canva-staging.com canva-staging.cn www.features.canva-internal.com www.features.canva-internal-staging.com canva-apps.com canva-apps.cn canva-apps-dev.com canva-apps-staging.com canva-apps-staging.cn".split(" ");this.W?g||(Gh(this,a,{sf:l}),void 0!==this.Eb&&th(this,a)):"undefined"!==typeof self.suppressSentryInitializationError&&!0===self.suppressSentryInitializationError||console.error("Sentry can not be found on the global scope.")}};var Yo=class{constructor(a){cg(this,{ub:wj.ref,wb:wj.ref});a&&(this.xc=a.xc,this.ub=a.ub,this.wb=a.wb,this.jd=a.jd,this.zc=a.zc,this.Lc=a.Lc,this.app=a.app,this.Ac=a.Ac,this.Bc=a.Bc)}};var Zo=class extends Error{constructor(a){super(`${a}: Timeout`);this.name="TimeoutError";Object.setPrototypeOf(this,Zo.prototype)}};var $o=class{get status(){return this.xhr.status}getResponseHeader(a){return this.xhr.getResponseHeader(a)}constructor(a){this.xhr=a}},ap=class extends $o{get body(){return this.xhr.responseText}},bp=class extends $o{get body(){return this.xhr.response}},aj=class{Xc(a){return new Promise((b,c)=>{const d=new XMLHttpRequest;d.responseType=a.responseType;d.timeout=a.timeout||0;const e=Error("xhr internal error"),f=this.Yh&&0<d.timeout?setTimeout(()=>{d.abort();const g=new Zo("xhrEngine");g.stack=e.stack;
c(g)},d.timeout+1E3):void 0;d.onload=()=>{f&&clearTimeout(f);if("blob"===a.responseType)return b(new bp(d));if("text"===a.responseType)return b(new ap(d));throw new m(a.responseType);};d.onerror=()=>{f&&clearTimeout(f);c(e)};d.ontimeout=()=>{f&&clearTimeout(f);const g=new Zo("xhrEngine");g.stack=e.stack;c(g)};a.$d&&d.upload.addEventListener("progress",a.$d);d.open(a.method,a.url,!0);if(a.headers)for(const g in a.headers){const h=a.headers[g];null!=h&&d.setRequestHeader(g,h)}d.withCredentials=!!a.withCredentials;
d.send(a.body)})}constructor(){this.Yh=!0}};var cp=class{async Xc(a,b,c){let d;if(c.Da){const h=c.Da.tracing,l=h&&(c.Da.ec||h.Yc);if(l){var e;const n=b.startsWith(`${this.Gb}/${bi}`)?"csrf":"request";d=null===(e=this.Ha)||void 0===e?void 0:e.startSpan(l,h.O,new Map([["http.method",a],["http.phase",n]]))}}try{const h=this.Ad;var f;if(f=d){const n=d.context;f=`00-${n.traceId}-${n.spanId}-${d.Na()?"01":"00"}`}var g={method:a,url:b,body:c.body,headers:Object.assign({},c.headers,{"X-Canva-Analytics":h.xc,"X-Canva-Api":this.qd,"X-Canva-Auth":h.ub,
"X-Canva-Authz":h.wb,"X-Canva-User":h.jd,"X-Canva-Brand":h.zc,"X-Canva-App":h.app,"X-Canva-Build-Name":h.Ac,"X-Canva-Build-Sha":h.Bc,"X-Canva-Locale":h.Lc,"X-Canva-Request":c.Da&&c.Da.ec,"X-Canva-Request-Case":c.Da&&c.Da.Nj,"X-Canva-Service-Method":c.Da&&c.Da.Sj,"X-Canva-Traceparent":f,"X-Csrf-Token":c.Oe&&c.Oe.token}),$d:c.$d,withCredentials:!!this.Gb,timeout:c.mc};const l=await this.Kg.Xc(Object.assign({},g,{responseType:"text"}));null===d||void 0===d?void 0:d.setAttribute("http.status_code",l.status);
return hi(this,b,l)}catch(h){null===d||void 0===d?void 0:d.setStatus("error");if(h instanceof Zo){const l=new Wo({requestUrl:b,message:h.message});l.stack=h.stack;null===d||void 0===d?void 0:d.setAttribute("http.error_type","timeout");throw l;}h instanceof mh?null===d||void 0===d?void 0:d.setAttribute("http.error_type","http_service_error"):null===d||void 0===d?void 0:d.setAttribute("http.error_type","unknown");throw h;}finally{null===d||void 0===d?void 0:d.end()}}wf(a){const b=a.getResponseHeader("X-Canva-Auth");
a=a.getResponseHeader("X-Canva-Authz");null!=b&&(this.Ad.ub="!"!==b?b:void 0);null!=a&&(this.Ad.wb="!"!==a?a:void 0)}constructor(a,b,c=new aj,d=dh,e){cg(this,{wf:dg});this.Kg=c;this.Dc=d;this.Ha=e;this.Ad=null!==b&&void 0!==b?b:new Yo(a);this.qd=a&&a.qd;this.Gb=a&&a.Gb||"";this.Ra=a?Lh(a.Ra,f=>Promise.resolve(f)):new Map}},fi=3E5,ci=3E4,bi="_ajax/csrf3";var $i=class extends cp{get(a,b){return ji(this,"GET",a,b)}post(a,b,c){return gi(this,ii(a),c,d=>ji(this,"POST",a,c,d,b))}delete(a,b){return gi(this,ii(a),b,c=>ji(this,"DELETE",a,b,c))}};var Li=class{jb(){return new dp}We(){return new dp}Ff(){}Kf(){}Lf(){}},dp=class{Zc(){return new ep}startSpan(){return new ep}ra(){}async flush(){}},ep=class{Ia(){return new fp}abort(){}Xa(){}setAttribute(){return this}setStatus(){return this}df(){return!1}Na(){return!1}end(){return{bb:()=>({}),cb:()=>({})}}ra(){}vc(){}constructor(){this.name="";this.attrs=new Map;this.aa="NOOP";this.xb=[];this.status="unset";this.Y=new Map;this.startTime=performance.now();this.Ba="span";this.context={traceId:"",spanId:"",
Ae:0};this.links=[]}},fp=class{ra(){}vc(){}setAttribute(){}Xa(){}};var gp=class{isEnabled(){return this.enabled}constructor(a,b,c){this.name=a;this.j=c;this.config={enabled:!0};this.enabled=!1;var d;this.enabled=null!==(d=this.config.enabled)&&void 0!==d?d:!1;this.Ha=b}};var hp=class extends gp{enable(){li(this)&&!this.enabled&&(this.enabled=!0,ki(this))}disable(){this.enabled=!1;var a;null===(a=this.observer)||void 0===a?void 0:a.disconnect()}constructor(a,b=new dp){var c=window.PerformanceObserver;super("LongTaskService",b,a);this.Rc={type:"longtask",buffered:!0};this.PerformanceObserver=c;li(this)&&this.enabled?(this.observer=new c(d=>{d=d.getEntries();for(const e of d)this.Wb.length>=this.ld&&(this.Wb=this.Wb.slice(d.length)),this.Wb.push(e)}),ki(this)):this.enabled=
!1}};var Ni=class extends hp{Xd(a){if(this.enabled&&null!=a.startTime&&null!=a.endTime){var {count:b,duration:c}=ni(this,a.startTime,a.endTime);a.Xa(new Map([["long_task_count",b],["long_task_duration",c]]));if(null==a.parentSpanId){const d=mi(this,a.startTime,a.endTime);if(0<d.length){const e=this.Ha.startSpan("long_tasks",a,{startTime:a.startTime});d.forEach(({startTime:f,duration:g,name:h})=>this.Ha.startSpan("long_task",e,{startTime:f,attrs:new Map([["name",h]])}).end("ok",f+g));e.end()}}}}constructor(a){super(a,
new dp);this.Wb=[];this.ld=80}};var Oi=class extends gp{disable(){this.enabled=!1;this.document.removeEventListener("visibilitychange",this.ac)}enable(){this.enabled=!0;this.Sf=this.getCurrentTime();this.document.addEventListener("visibilitychange",this.ac);this.Ya.push({status:"visible"===this.document.visibilityState?1:0,time:this.Sf})}Xd(a){this.enabled&&null!=a.startTime&&null!=a.endTime&&a.setAttribute("was_always_visible",oi(this,a.startTime,a.endTime))}constructor(a){var b=window.document;super("VisibilityService",new dp,
a);this.document=b;this.getCurrentTime=()=>performance.now();this.ld=40;this.Ya=[];this.ac=()=>{const c="visible"===this.document.visibilityState?1:0;this.Ya.length>=this.ld&&(this.Ya=this.Ya.slice(1));this.Ya.push({status:c,time:this.getCurrentTime()})};this.enable()}};var Pi=class extends gp{enable(){this.enabled=!0}disable(){this.enabled=!1;this.Ea.clear()}la(a){this.enabled&&this.Ea.add(a)}Xd(a){this.enabled&&this.Ea.delete(a)}constructor(a){super("UnhandledExceptions",new dp,a);this.Ea=new Set;this.hg=b=>{try{var c,d;(null===(d=b.exception)||void 0===d?0:null===(c=d.values)||void 0===c?0:c.some(e=>{var f;return!1===(null===(f=e.mechanism)||void 0===f?void 0:f.handled)}))&&this.enabled&&this.pg(b.event_id)}catch(e){this.j.F(e,{J:"Failed to close all spans"})}return b};
this.pg=b=>{for(const c of this.Ea)c.name+=".unhandled_exception",c.end("error",new Map([["unhandled_exception",!0],["sentry_event_id",b]]));this.Ea.clear()};a.Fe(b=>this.hg(b));this.enabled&&this.enable()}};var Wi=class{la(a){this.V?this.V.la(a):this.xd.push(a)}process(a){try{this.V?this.V.process(a):this.wd.push(a)}catch(b){this.j.F(b,{J:`Failed to export the span buffer from ${Wi.name}`,extra:new Map(pi(a))})}}async flush(){const a=await this.hf;this.wd.forEach(b=>a.process(b));await a.flush();this.wd.length=0}constructor(a,b){this.hf=a;this.j=b;this.wd=[];this.xd=[];this.V=void 0;this.hf.then(c=>this.V=c).then(()=>{for(const c of this.xd)this.V.la(c);this.xd.length=0;return this.flush()})}};var Ui=class{Nf(){return!0}};var ip=wi(16),jp=wi(8),vi=Array(32);var zi=class{Ia(){return this.Aa||new fp}Xa(a){this.Kb||(this.attrs=new Map([...this.attrs,...a]))}setAttribute(a,b,c=!1){if(this.Kb&&!c)return this;this.attrs.set(a,b);return this}setStatus(a){try{if(this.Kb)return this;this.status=a;return this}catch(b){return this.status="error",this.j.F(b),this}}df(){return!this.ended}Na(){return 0!==(this.context.Ae&1)}abort(){try{var a;if(!this.aborted){this.aborted=!0;this.setAttribute("span_aborted",!0);for(const b of this.yb)b.abort();this.ended||(this.Kb=
this.ended=!0,this.timeout&&clearTimeout(this.timeout),(null===(a=this.Qa)||void 0===a?0:a.frameRate)&&Bi(this.Qa.frameRate),this.endTime=this.getCurrentTime(),this.duration=this.endTime-this.startTime,xi(this),Ai(this),this.Vd.forEach(b=>b()),this.za.cc.process(this))}}catch(b){this.j.F(b)}}end(a,b,c){try{if(this.ended)return{bb:this.bb,cb:this.cb};this.ended=!0;return Ci(this,a,b,c)}catch(d){return this.j.F(d,{J:"Error ending span",extra:new Map(pi(this))}),{bb:this.bb,cb:this.cb}}}vc(a){try{this.ended&&
this.aborted||(this.ended&&this.Id?a(this.Id):this.$b.push(a))}catch(b){this.j.F(b)}}ra(a,b){try{k(0<a.length,"Event name cannot be empty");const {Oc:c,Pc:d}=qi(b),e=new kp({name:a,O:this,za:this.za,Ma:this.Ma,aa:this.aa,j:this.j,startTime:null===d||void 0===d?void 0:d.startTime,Aa:void 0,Ba:"event",Tb:null===d||void 0===d?void 0:d.Tb,getCurrentTime:this.getCurrentTime,ya:this.ya,attrs:(null===d||void 0===d?void 0:d.attrs)||c,ge:this.startTime});this.xb.push(e)}catch(c){this.j.F(c)}}get Y(){return this.Ma()}constructor(a){var b;
this.Kb=this.aborted=this.ended=!1;this.attrs=new Map;this.xb=[];this.yb=[];this.status="unset";this.Id=void 0;this.$b=[];this.Vd=[];this.bb=g=>ui(Object.assign({},{span:this,j:this.j,ya:this.ya},g));this.cb=()=>this.Na()?this.context:void 0;this.name=a.name;this.ended=!1;this.za=a.za;var c,d;this.getCurrentTime=null!==(d=a.getCurrentTime)&&void 0!==d?d:g=>null!==(c=null===g||void 0===g?void 0:g.override)&&void 0!==c?c:performance.now();d=jp();this.identifier=`${this.name}_${d}`;this.startTime=this.getCurrentTime({id:this.identifier,
override:a.startTime});this.aa=a.aa;this.Aa=a.Aa;this.Ba=a.Ba;this.j=a.j;this.Qa=a.Qa;const e=(null===(b=a.O)||void 0===b?void 0:b.context.traceId)||ip();a.attrs&&(this.attrs=new Map(a.attrs));this.attrs.set("span_type",this.Ba);b=a.za.Af.Nf({traceId:e,Yc:this.name,attributes:this.attrs,O:a.O})?1:0;this.context={spanId:d,traceId:e,Ae:b};this.links=a.links||[];a.O&&(this.parentSpanId=a.O.context.spanId,this.O=a.O);this.Ma=a.Ma;this.ya=a.ya;this.setStatus("ok");this.timeout=setTimeout(()=>{this.name+=
".timed_out";this.setAttribute("timed_out",!0);this.end("ok")},a.timeout||12E4);for(const g of this.za.plugins)if(g.isEnabled())try{var f;null===(f=g.la)||void 0===f?void 0:f.call(g,this)}catch(h){this.j.F(h,{J:"Error calling plugin onSpanStart",extra:new Map([["plugin",g.name],...pi(this)])})}this.za.cc.la(this)}},kp=class extends zi{constructor(a){super(a);null!=a.ge&&(this.setAttribute("parent_relative_start_ms",Math.round(this.startTime-a.ge)),this.setAttribute("parent_start",a.ge));a.Tb&&this.setAttribute("event_type",
a.Tb);this.end("ok",this.startTime)}};var Di=class{get aborted(){return this.qa.aborted}vc(a){try{this.ended&&this.aborted||(this.ended&&this.Jd?a(this.Jd):this.$b.push(a))}catch(b){this.j.F(b,{tags:new Map([["user_operation",this.name]])})}}ra(a,b){try{let {Oc:c,Pc:d}=qi(b),e;e=null!=c?c:(null===d||void 0===d?void 0:d.attrs)||new Map;null!=d||(d={});d.attrs=e;this.Mg.forEach((f,g)=>{e.has(g)||e.set(g,f)});e.set("user_operation",this.name);e.set("is_uop",!0);e.set("sample_rate_override",1);null!=this.type&&e.set("uop_attr_type",this.type);
this.fc&&e.set("uop_persist",!0);this.qa.ra(a,d)}catch(c){this.j.F(c,{tags:new Map([["user_operation",this.name]])})}}Xa(a){this.qa.Xa(a)}setAttribute(a,b){this.qa.setAttribute(a,b)}constructor(a,b,c,d,e,f,g){var h=new Set;this.name=a;this.type=b;this.qa=c;this.Mg=d;this.j=e;this.fc=f;this.Fc=g;this.Fd=h;this.$b=[];this.Vd=[];this.Jd=void 0;this.ended=!1}};var Ti=class{Nf({Yc:a,attributes:b,O:c}){b=null===b||void 0===b?void 0:b.get("sample_rate_override");if(null!=b&&"number"===typeof b){if(0>b||1<b)this.j.error(Error(`Invalid sample rate (${b}) for ${a}`)),b=this.sampleRate;return Math.random()<b}a=this.hh(c);return null!=a?a:Math.random()<this.sampleRate}constructor(a=0,b){var c=Ii;this.sampleRate=a;this.j=b;this.hh=c;this.sampleRate=Math.min(Math.max(0,this.sampleRate),1)}};var lp=class{add(a,b=1){k(isFinite(a));k(0<b);if(0===this.Ja)this.Ja=b,this.rc=this.tc=this.rb=a,this.uc=0;else{this.Ja+=b;const c=a-this.rb;this.rb+=b*c/this.Ja;this.uc+=b*c*(a-this.rb);this.tc=Math.min(this.tc,a);this.rc=Math.max(this.rc,a)}}addAll(a){for(const b of a)this.add(b)}get count(){return this.Ja}get ih(){return this.rb}get min(){return this.tc}get max(){return this.rc}get Ah(){return 0===this.Ja?NaN:1===this.Ja?0:Math.max(this.uc,0)/this.Ja}get yh(){return Math.sqrt(this.Ah)}constructor(){this.Ja=
0;this.rb=NaN;this.uc=0;this.rc=this.tc=NaN}};var mp=class{start(){this.ob=new lp;this.Sc=void 0;this.pd=this.je.requestAnimationFrame(this.vf);this.document.addEventListener("visibilitychange",this.ac)}get cf(){return"visible"===this.document.visibilityState}constructor(){var a=window.document;this.je=window;this.document=a;this.ob=new lp;this.vf=b=>{void 0!==this.Sc&&this.ob.add(Math.min(b-this.Sc,5E3));this.Sc=this.cf?b:void 0;this.pd=this.je.requestAnimationFrame(this.vf)};this.ac=()=>{this.cf||(this.Sc=void 0)}}},np=class{reset(){this.hb=
0;this.jf=new lp;this.bf.clear()}constructor(){this.hb=0;this.jf=new lp;this.bf=new Set}},Ji=new np;var op=class{la(){}process(){}async flush(){}};var pp,qp=class{Zc(a,b){return this.startSpan(a,void 0,b)}startSpan(a,b,c){try{var d;const {Oc:e,Pc:f}=qi(c),g=ia(this.aa(b),"No instrumentation scope found for '{}' of parent '{}:{}'",a,null===b||void 0===b?void 0:b.aa,null===b||void 0===b?void 0:b.context.spanId),h=(null===f||void 0===f?0:null===(d=f.performance)||void 0===d?0:d.xj)?this.Cd.frameRate():void 0;null===h||void 0===h?void 0:h.start();const l=(null===f||void 0===f?0:f.Of)?Fi({Pa:Object.assign({},f.Of,{startTime:f.startTime,timeout:f.timeout}),
Ha:this.hd,O:b,vg:[this.config.qc,this.qc].filter(Yf),j:this.j,oh:q=>{b=q}}):Gi(b),n=new zi({name:a,O:b,za:this.config,Ma:this.Ma,aa:g,j:this.j,getCurrentTime:this.getCurrentTime,startTime:null===f||void 0===f?void 0:f.startTime,timeout:null===f||void 0===f?void 0:f.timeout,ya:this.ya,attrs:(null===f||void 0===f?void 0:f.attrs)||e,links:null===f||void 0===f?void 0:f.links,Aa:l,Ba:"span",Qa:{frameRate:h}});null===l||void 0===l?void 0:(n.attrs.get("is_uop")||n.setAttribute("user_operation",l.name),
null==l.fc&&(l.fc=n.Na(),l.fc&&l.qa.setAttribute("uop_persist",!0)),l.Fd.add(n));null!=b&&b instanceof zi&&b.yb.push(n);return n}catch(e){return this.j.F(e),new ep}}ra(a,b){try{const {Oc:c,Pc:d}=qi(b);k(0<a.length,"Event name cannot be empty");const e=ia(this.aa(),"Event ({}) requires instrumentation scope",a);new kp({name:a,za:this.config,Ma:this.Ma,aa:e,Aa:void 0,j:this.j,Ba:"event",Tb:null===d||void 0===d?void 0:d.Tb,getCurrentTime:this.getCurrentTime,startTime:null===d||void 0===d?void 0:d.startTime,
ya:this.ya,attrs:(null===d||void 0===d?void 0:d.attrs)||c,O:void 0})}catch(c){this.j.F(c)}}async flush(){try{await this.config.cc.flush()}catch(a){this.j.F(a)}}constructor(a,b,c,d,e,f,g,h=n=>null!==(pp=null===n||void 0===n?void 0:n.override)&&void 0!==pp?pp:performance.now(),l={frameRate:()=>new mp}){this.aa=a;this.ya=b;this.config=c;this.Ma=d;this.j=e;this.hd=f;this.qc=g;this.getCurrentTime=h;this.Cd=l}};var rp,Si=class{jb(a,b){try{return new qp(()=>a,this,this.config,()=>new Map([...this.config.Y,["service.name",this.serviceName+" | "+a]]),this.j,this.hd,null===b||void 0===b?void 0:b.qc,this.getCurrentTime,this.Cd)}catch(d){var c;this.j.F(d,{extra:new Map([["attrs",Object.fromEntries(null===(c=this.config)||void 0===c?void 0:c.Y)]])});return new dp}}We(a){try{return new qp(c=>null===c||void 0===c?void 0:c.aa,this,this.config,()=>this.config.Y,this.j,this.hd,null===a||void 0===a?void 0:a.qc,this.getCurrentTime)}catch(c){var b;
this.j.F(c,{extra:new Map([["attrs",Object.fromEntries(null===(b=this.config)||void 0===b?void 0:b.Y)]])});return new dp}}Ff(a){try{a.mj().then(b=>{this.config.Y.set("device.model",b)}).catch(b=>{this.j.F(b)})}catch(b){this.j.F(b)}}Kf(a){try{this.config.Y.set("ctx.user",a.nj())}catch(b){this.j.F(b)}try{this.config.Y.set("ctx.brand",a.kj())}catch(b){this.j.F(b)}}Lf(a){this.config.qc=a}wc(a){try{const c=a.name;if(this.config.plugins.some(d=>d.name===c))throw Error(`Plugin already exists: ${a.name}`);
this.config.plugins.push(a)}catch(c){var b;this.j.F(c,{extra:new Map([["attrs",Object.fromEntries(null===(b=this.config)||void 0===b?void 0:b.Y)]])})}}Qd(a){try{return this.config.plugins.find(c=>c.name===a)}catch(c){var b;this.j.F(c,{extra:new Map([["attrs",Object.fromEntries(null===(b=this.config)||void 0===b?void 0:b.Y)]])})}}constructor(a={},b,c=e=>null!==(rp=null===e||void 0===e?void 0:e.override)&&void 0!==rp?rp:performance.now(),d={frameRate:()=>new mp}){this.j=b;this.getCurrentTime=c;this.Cd=
d;this.config=Object.assign({},{Af:new Ui,cc:new op,Y:new Map,plugins:[]},a);this.serviceName=(a=this.config.Y.get("service.name"))&&"string"===typeof a?a:"no_service_name";this.hd=this.jb("telemetry.user_operation")}};var pj="https://thirdparty-public-apps.canva-apps.com https://thirdparty-private-apps.canva-apps.com https://thirdparty-public-apps.canva-apps.cn https://thirdparty-private-apps.canva-apps.cn https://thirdparty-public-apps.canva-apps-staging.com https://thirdparty-private-apps.canva-apps-staging.com https://thirdparty-public-apps.canva-apps-staging.cn https://thirdparty-private-apps.canva-apps-staging.cn https://thirdparty-public-apps.canva-apps-dev.com https://thirdparty-private-apps.canva-apps-dev.com https://thirdparty-public-apps-tmp.canva-apps.com https://thirdparty-private-apps-tmp.canva-apps.com https://thirdparty-public-apps-tmp.canva-apps.cn https://thirdparty-private-apps-tmp.canva-apps.cn https://thirdparty-public-apps-tmp.canva-apps-staging.com https://thirdparty-private-apps-tmp.canva-apps-staging.com https://thirdparty-public-apps-tmp.canva-apps-staging.cn https://thirdparty-private-apps-tmp.canva-apps-staging.cn https://thirdparty-public-apps-tmp.canva-apps-dev.com https://thirdparty-private-apps-tmp.canva-apps-dev.com".split(" ");
(async()=>{var a=No.D;let b={};var c=performance.now(),d=ma("base",Uk.D,b),e={start:c,end:performance.now()};d.Hg&&(b=Object.assign({},b,{Je:!0}),d=ma("base",Uk.D,b));const f=d.Kh;c=performance.now();a=ma("page",a,Object.assign({},b,{Jh:f}));c={start:c,end:performance.now()};({L:e}={L:{ud:d,bc:a},wi:{ui:e,Dj:c}});d=e.bc;const {j:g,ad:h}=await bj({ud:e.ud});e=h.jb("app_sandbox_editor").Zc("load_page",{Of:{name:"app_sandbox_editor.use_app"}});try{lj({j:g,ad:h,bc:d,Lh:e})}catch(l){e.end("error")}e.end("ok")})();
}).call(self, self._45f7853dc7660378a038952b53c0953e);},

/***/ 672972:
(_, __, r) => r(813110)

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, [5436,2653], () => (__webpack_exec__(813110), __webpack_exec__(672972)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
])
//# sourceMappingURL=sourcemaps/bbc834d4d7b8025b.js.map